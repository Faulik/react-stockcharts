{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2aad3401ea9feb4d18de","webpack:///./src/index.js","webpack:///./src/lib/ChartCanvas.jsx","webpack:///./~/process/browser.js","webpack:///external \"React\"","webpack:///external \"d3\"","webpack:///./src/lib/utils/index.js","webpack:///./src/lib/utils/zipper.js","webpack:///./src/lib/utils/identity.js","webpack:///./src/lib/utils/merge.js","webpack:///./src/lib/utils/noop.js","webpack:///./src/lib/utils/slidingWindow.js","webpack:///./src/lib/utils/shallowEqual.js","webpack:///./src/lib/utils/mappedSlidingWindow.js","webpack:///./src/lib/utils/accumulatingWindow.js","webpack:///./src/lib/utils/ChartDataUtil.js","webpack:///./~/lodash.flattendeep/index.js","webpack:///./src/lib/EventCapture.jsx","webpack:///./src/lib/Chart.jsx","webpack:///./src/lib/utils/PureComponent.js","webpack:///./src/lib/EventHandler.js","webpack:///./src/lib/CanvasContainer.jsx","webpack:///./src/lib/scale/eodIntervalCalculator.js","webpack:///./src/lib/scale/financeEODCalculator.js","webpack:///./src/lib/scale/evaluator.js","webpack:///./src/lib/BackgroundText.jsx","webpack:///./src/lib/series/index.js","webpack:///./src/lib/series/AreaSeries.jsx","webpack:///./src/lib/series/Line.jsx","webpack:///./src/lib/series/wrap.jsx","webpack:///./src/lib/pure.jsx","webpack:///./src/lib/series/Area.jsx","webpack:///./src/lib/series/ScatterSeries.jsx","webpack:///./src/lib/series/CircleMarker.jsx","webpack:///./src/lib/series/LineSeries.jsx","webpack:///./src/lib/series/CandlestickSeries.jsx","webpack:///./src/lib/series/OHLCSeries.jsx","webpack:///./src/lib/series/BarSeries.jsx","webpack:///./src/lib/series/StackedBarSeries.jsx","webpack:///./src/lib/series/GroupedBarSeries.jsx","webpack:///./src/lib/series/KagiSeries.jsx","webpack:///./src/lib/series/PointAndFigureSeries.jsx","webpack:///./src/lib/series/RenkoSeries.jsx","webpack:///./src/lib/series/MACDSeries.jsx","webpack:///./src/lib/series/StraightLine.jsx","webpack:///./src/lib/series/BollingerSeries.jsx","webpack:///./src/lib/series/RSISeries.jsx","webpack:///./src/lib/series/StochasticSeries.jsx","webpack:///./src/lib/series/ElderRaySeries.jsx","webpack:///./src/lib/series/OverlayBarSeries.jsx","webpack:///./src/lib/scale/index.js","webpack:///./src/lib/scale/financeEODDiscontiniousScale.js","webpack:///./src/lib/scale/identityIntervalCalculator.js","webpack:///./src/lib/coordinates/index.js","webpack:///./src/lib/coordinates/EdgeIndicator.jsx","webpack:///./src/lib/coordinates/EdgeCoordinate.jsx","webpack:///./src/lib/coordinates/MouseCoordinates.jsx","webpack:///./src/lib/coordinates/CrossHair.jsx","webpack:///./src/lib/coordinates/CurrentCoordinate.jsx","webpack:///./src/lib/indicator/index.js","webpack:///./src/lib/indicator/defaultOptions.js","webpack:///./src/lib/indicator/ema.js","webpack:///./src/lib/indicator/algorithm/index.js","webpack:///./src/lib/indicator/algorithm/ema.js","webpack:///./src/lib/indicator/algorithm/bollingerband.js","webpack:///./src/lib/indicator/algorithm/haikinAshi.js","webpack:///./src/lib/indicator/algorithm/kagi.js","webpack:///./src/lib/indicator/algorithm/atr.js","webpack:///./src/lib/indicator/algorithm/pointAndFigure.js","webpack:///./src/lib/indicator/algorithm/renko.js","webpack:///./src/lib/indicator/algorithm/macd.js","webpack:///./src/lib/indicator/algorithm/rsi.js","webpack:///./src/lib/indicator/algorithm/sto.js","webpack:///./src/lib/indicator/algorithm/forceIndex.js","webpack:///./src/lib/indicator/algorithm/elderRay.js","webpack:///./src/lib/indicator/algorithm/compare.js","webpack:///./src/lib/indicator/baseIndicator.js","webpack:///./src/lib/indicator/sma.js","webpack:///./src/lib/indicator/bollingerBand.js","webpack:///./src/lib/indicator/haikinAshi.js","webpack:///./src/lib/indicator/kagi.js","webpack:///./src/lib/indicator/pointAndFigure.js","webpack:///./src/lib/indicator/renko.js","webpack:///./src/lib/indicator/macd.js","webpack:///./src/lib/indicator/rsi.js","webpack:///./src/lib/indicator/atr.js","webpack:///./src/lib/indicator/stochasticOscilator.js","webpack:///./src/lib/indicator/forceIndex.js","webpack:///./src/lib/indicator/elderRay.js","webpack:///./src/lib/indicator/change.js","webpack:///./src/lib/indicator/elderImpulse.js","webpack:///./src/lib/indicator/compare.js","webpack:///./src/lib/axes/index.js","webpack:///./src/lib/axes/XAxis.jsx","webpack:///./src/lib/axes/Axis.jsx","webpack:///./src/lib/axes/AxisTicks.jsx","webpack:///./src/lib/axes/AxisLine.jsx","webpack:///./src/lib/axes/YAxis.jsx","webpack:///./src/lib/tooltip/index.js","webpack:///./src/lib/tooltip/MACDTooltip.jsx","webpack:///./src/lib/tooltip/ToolTipText.jsx","webpack:///./src/lib/tooltip/ToolTipTSpanLabel.jsx","webpack:///./src/lib/tooltip/TooltipContainer.jsx","webpack:///./src/lib/tooltip/OHLCTooltip.jsx","webpack:///./src/lib/tooltip/SingleValueTooltip.jsx","webpack:///./src/lib/tooltip/MovingAverageTooltip.jsx","webpack:///./src/lib/tooltip/BollingerBandTooltip.jsx","webpack:///./src/lib/tooltip/RSITooltip.jsx","webpack:///./src/lib/tooltip/StochasticTooltip.jsx","webpack:///./src/lib/helper/index.js","webpack:///./src/lib/helper/TypeChooser.jsx","webpack:///./src/lib/helper/ChartWidthMixin.jsx","webpack:///./src/lib/helper/SaveChartAsImage.js","webpack:///./~/save-svg-as-png/saveSvgAsPng.js","webpack:///./src/lib/helper/fitWidth.jsx","webpack:///external \"ReactDOM\"","webpack:///./src/lib/interactive/index.js","webpack:///./src/lib/interactive/TrendLine.jsx","webpack:///./src/lib/interactive/makeInteractive.jsx","webpack:///./src/lib/interactive/FibonacciRetracement.jsx","webpack:///./src/lib/interactive/ClickCallback.jsx","webpack:///./src/lib/interactive/Brush.jsx"],"names":[],"mappings":"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K;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA;AACA;AACA,6BAA4B,UAAU;;;;;;;AC/JtC,gD;;;;;;ACAA,gD;;;;;;ACAA;;;;;;;;;SAyBgB,sB,GAAA,sB;SAWA,qB,GAAA,qB;SA8BA,c,GAAA,c;SAmBA,M,GAAA,M;SAkBA,I,GAAA,I;SAcA,I,GAAA,I;SAaA,S,GAAA,S;SAIA,Y,GAAA,Y;SAIA,Q,GAAA,Q;SAMA,a,GAAA,a;SASA,a,GAAA,a;SAUA,W,GAAA,W;SAOA,S,GAAA,S;;AAvKhB;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;SAGC,kB;SACA,mB;SACA,K;SACA,Q;SACA,I;SACA,Y;SACA,a;SACA,M;AAGM,UAAS,sBAAT,CAAgC,KAAhC,EAAuC,KAAvC,EAA8C,QAA9C,EAAwD;AAC9D,MAAI,OAAO,YAAG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,EAAE,CAAF,GAAM,EAAE,CAAR,GAAY,CAAZ,GAAgB,CAA1B;AAAA,IAA9E,CAAR;AACA,UAAO,sBAAU,CAAV,IAAe,SAAS,EAAE,GAAX,CAAf,GAAiC,SAAS,CAAT,CAAxC;AACA;AACA;AACD,SAAO,IAAP;AACA,G;;;;;;AC5ID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,MAAM;AACjB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB,YAAW,MAAM;AACjB,cAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA,8BAA6B,kBAAkB,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC7VA;;;;;;;;AAEA;;;;AACA;;;;AAEA;;;;;;;;;;AAEA,KAAI,YAAY,eAAhB;AAAA,KAAiC,UAAU,aAA3C;;AAEA,UAAS,QAAT,CAAkB,IAAlB,EAAwB;AACvB,MAAI,QAAQ,SAAS,KAAK,aAAL,IAAsB,KAAK,aAAL,CAAmB,WAAzC,IAAwD,KAAK,QAAL,IAAiB,IAAzE,IAAiF,KAAK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;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,oCAAmC,6BAA6B;AAChE,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAoC,EAAE;AACtC;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAoC;AACpC;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL;AACA,EAAC;;;;;;;;;;;;;;;;;mBCjMuB,Q;;AARxB;;;;AACA;;;;;;;;;;;;AAEA,UAAS,cAAT,CAAwB,MAAxB,EAAgC;AAC/B,MAAI,OAAO,OAAO,WAAP,IAAsB,OAAO,IAA7B,IAAqC,QAAhD;AACA,SAAO,IAAP;AACA;;AAEc,UAAS,QAAT,CAAkB,gBAAlB,EAAoD;AAAA,MAAhB,OAAgB,yDAAN,IAAM;;AAAA,MAC5D,mBAD4D;AAAA;;AAEjE,gCAAY,KAAZ,EAAmB;AAAA;;AAAA,uGACZ,KADY;;AAElB,UAAK,kBAAL,GAA0B,MAAK,kBA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","file":"react-stockcharts.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"), require(\"d3\"), require(\"ReactDOM\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\", \"d3\", \"ReactDOM\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReStock\"] = factory(require(\"React\"), require(\"d3\"), require(\"ReactDOM\"));\n\telse\n\t\troot[\"ReStock\"] = factory(root[\"React\"], root[\"d3\"], root[\"ReactDOM\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_114__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2aad3401ea9feb4d18de\n **/","\"use strict\";\r\n\r\n// common components\r\nimport ChartCanvas from \"./lib/ChartCanvas\";\r\nimport Chart from \"./lib/Chart\";\r\n\r\nimport BackgroundText from \"./lib/BackgroundText\";\r\n\r\n// interaction components\r\nimport EventCapture from \"./lib/EventCapture\";\r\n\r\n// chart types & Series\r\nimport * as series from \"./lib/series\";\r\nimport * as scale from \"./lib/scale\";\r\n\r\nimport * as coordinates from \"./lib/coordinates\";\r\nimport * as indicator from \"./lib/indicator\";\r\n\r\nimport * as axes from \"./lib/axes\";\r\nimport * as tooltip from \"./lib/tooltip\";\r\nimport * as helper from \"./lib/helper\";\r\n\r\nimport * as interactive from \"./lib/interactive\";\r\nimport * as Utils from \"./lib/utils\";\r\n\r\nconst version = \"0.4.0\";\r\n\r\nexport default {\r\n\tChartCanvas,\r\n\tChart,\r\n\tEventCapture,\r\n\tBackgroundText,\r\n\tseries,\r\n\tcoordinates,\r\n\tindicator,\r\n\taxes,\r\n\tscale,\r\n\ttooltip,\r\n\thelper,\r\n\tinteractive,\r\n\tversion,\r\n\tUtils\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport { shallowEqual, identity, last, isDefined, isNotDefined } from \"./utils\";\r\nimport { shouldShowCrossHairStyle } from \"./utils/ChartDataUtil\";\r\n\r\nimport EventHandler from \"./EventHandler\";\r\nimport CanvasContainer from \"./CanvasContainer\";\r\nimport eodIntervalCalculator from \"./scale/eodIntervalCalculator\";\r\nimport evaluator from \"./scale/evaluator\";\r\n\r\n\r\nconst CANDIDATES_FOR_RESET = [\"seriesName\", /* \"data\",*/\"interval\", \"discontinous\",\r\n\t\"intervalCalculator\", \"allowedIntervals\",\r\n\t\"xScale\", /* \"xAccessor\",*/\"map\", \"dataEvaluator\",\r\n\t\"indexAccessor\", \"indexMutator\"];\r\n\r\nfunction shouldResetChart(thisProps, nextProps) {\r\n\treturn !CANDIDATES_FOR_RESET.every(key => {\r\n\t\tvar result = shallowEqual(thisProps[key], nextProps[key]);\r\n\t\t// console.log(key, result);\r\n\t\treturn result;\r\n\t});\r\n}\r\n\r\nfunction getDimensions(props) {\r\n\treturn {\r\n\t\theight: props.height - props.margin.top - props.margin.bottom,\r\n\t\twidth: props.width - props.margin.left - props.margin.right,\r\n\t};\r\n}\r\n\r\nfunction calculateFullData(props) {\r\n\tvar { data, calculator } = props;\r\n\tvar { xScale, intervalCalculator, allowedIntervals, plotFull } = props;\r\n\tvar { xAccessor, map, dataEvaluator, indexAccessor, indexMutator, discontinous } = props;\r\n\r\n\tvar wholeData = isDefined(plotFull) ? plotFull : xAccessor === identity;\r\n\r\n\tvar evaluate = dataEvaluator()\r\n\t\t.allowedIntervals(allowedIntervals)\r\n\t\t.intervalCalculator(intervalCalculator)\r\n\t\t.xAccessor(xAccessor)\r\n\t\t.discontinous(discontinous)\r\n\t\t.indexAccessor(indexAccessor)\r\n\t\t.indexMutator(indexMutator)\r\n\t\t.map(map)\r\n\t\t.useWholeData(wholeData)\r\n\t\t.scale(xScale)\r\n\t\t.calculator(calculator.slice());\r\n\r\n\tvar { xAccessor, domainCalculator: xExtentsCalculator, fullData } = evaluate(data);\r\n\r\n\treturn {\r\n\t\txAccessor,\r\n\t\txExtentsCalculator,\r\n\t\tfullData,\r\n\t};\r\n}\r\n\r\nfunction calculateState(props) {\r\n\r\n\tvar { data, interval, allowedIntervals } = props;\r\n\tvar { xAccessor: inputXAccesor, xExtents: xExtentsProp, xScale } = props;\r\n\r\n\tif (isDefined(interval)\r\n\t\t&& (isNotDefined(allowedIntervals)\r\n\t\t\t|| allowedIntervals.indexOf(interval) > -1)) throw new Error(\"interval has to be part of allowedInterval\");\r\n\r\n\r\n\tvar { xAccessor, xExtentsCalculator, fullData } = calculateFullData(props);\r\n\r\n\tvar dimensions = getDimensions(props);\r\n\t// xAccessor - if discontinious return indexAccessor, else xAccessor\r\n\t// inputXAccesor - send this down as context\r\n\r\n\t// console.log(xAccessor, inputXAccesor, domainCalculator, domainCalculator, updatedScale);\r\n\t// in componentWillReceiveProps calculate plotData and interval only if this.props.xExtentsProp != nextProps.xExtentsProp\r\n\r\n\tvar extent = typeof xExtentsProp === \"function\"\r\n\t\t? xExtentsProp(fullData)\r\n\t\t: d3.extent(xExtentsProp.map(d3.functor).map(each => each(data, inputXAccesor)));\r\n\r\n\tvar { plotData, interval: showingInterval, scale: updatedScale } = xExtentsCalculator\r\n\t\t\t.width(dimensions.width)\r\n\t\t\t.scale(xScale)\r\n\t\t\t.data(fullData)\r\n\t\t\t.interval(interval)(extent, inputXAccesor);\r\n\r\n\t// console.log(updatedScale.domain());\r\n\treturn {\r\n\t\tfullData,\r\n\t\tplotData,\r\n\t\tshowingInterval,\r\n\t\txExtentsCalculator,\r\n\t\txScale: updatedScale,\r\n\t\txAccessor,\r\n\t\tdataAltered: false,\r\n\t};\r\n}\r\n\r\nfunction getCursorStyle(children) {\r\n\tvar style = `<![CDATA[\r\n\t\t\t.react-stockcharts-grabbing-cursor {\r\n\t\t\t\tcursor: grabbing;\r\n\t\t\t\tcursor: -moz-grabbing;\r\n\t\t\t\tcursor: -webkit-grabbing;\r\n\t\t\t}\r\n\t\t\t.react-stockcharts-crosshair-cursor {\r\n\t\t\t\tcursor: crosshair;\r\n\t\t\t}\r\n\t\t\t.react-stockcharts-toottip-hover {\r\n\t\t\t\tpointer-events: all;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t}\r\n\t\t]]>`;\r\n\treturn shouldShowCrossHairStyle(children)\r\n\t\t? (<style type=\"text/css\" dangerouslySetInnerHTML={{ __html: style }}></style>)\r\n\t\t: null;\r\n}\r\n\r\nclass ChartCanvas extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.getDataInfo = this.getDataInfo.bind(this);\r\n\t\tthis.getCanvases = this.getCanvases.bind(this);\r\n\t}\r\n\tgetDataInfo() {\r\n\t\treturn this.refs.chartContainer.getDataInfo();\r\n\t}\r\n\tgetCanvases() {\r\n\t\tif (this.refs && this.refs.canvases) {\r\n\t\t\treturn this.refs.canvases.getCanvasContexts();\r\n\t\t}\r\n\t}\r\n\tgetChildContext() {\r\n\t\treturn {\r\n\t\t\tdisplayXAccessor: this.props.xAccessor,\r\n\t\t};\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tthis.setState(calculateState(this.props));\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tvar reset = shouldResetChart(this.props, nextProps);\r\n\t\t// console.log(\"shouldResetChart =\", reset);\r\n\r\n\t\tif (reset) {\r\n\t\t\tif (process.env.NODE_ENV !== \"production\") console.log(\"RESET CHART, one or more of these props changed\", CANDIDATES_FOR_RESET);\r\n\t\t\tthis.setState(calculateState(nextProps));\r\n\t\t} else if (!shallowEqual(this.props.xExtents, nextProps.xExtents)) {\r\n\t\t\tif (process.env.NODE_ENV !== \"production\") console.log(\"xExtents changed\");\r\n\t\t\t// since the xExtents changed update fullData, plotData, xExtentsCalculator to state\r\n\t\t\tlet { fullData, plotData, xExtentsCalculator, xScale } = calculateState(nextProps);\r\n\t\t\tthis.setState({ fullData, plotData, xExtentsCalculator, xScale, dataAltered: false });\r\n\t\t} else if (this.props.data !== nextProps.data) {\r\n\t\t\tif (process.env.NODE_ENV !== \"production\") console.log(\"data is changed but seriesName did not\");\r\n\t\t\t// this means there are more points pushed/removed or existing points are altered\r\n\t\t\t// console.log(\"data changed\");\r\n\t\t\tlet { fullData } = calculateFullData(nextProps);\r\n\t\t\tthis.setState({ fullData, dataAltered: true });\r\n\t\t} else if (!shallowEqual(this.props.calculator, nextProps.calculator)) {\r\n\t\t\tif (process.env.NODE_ENV !== \"production\") console.log(\"calculator changed\");\r\n\t\t\t// data did not change but calculator changed, so update only the fullData to state\r\n\t\t\tlet { fullData } = calculateFullData(nextProps);\r\n\t\t\tthis.setState({ fullData, dataAltered: false });\r\n\t\t} else {\r\n\t\t\tif (process.env.NODE_ENV !== \"production\")\r\n\t\t\t\tconsole.log(\"Trivial change, may be width/height or type changed, but that does not matter\");\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tvar cursor = getCursorStyle(this.props.children);\r\n\r\n\t\tvar { interval, data, type, height, width, margin, className, zIndex, postCalculator, flipXScale } = this.props;\r\n\t\tvar { padding } = this.props;\r\n\t\tvar { fullData, plotData, showingInterval, xExtentsCalculator, xScale, xAccessor, dataAltered } = this.state;\r\n\r\n\t\tvar dimensions = getDimensions(this.props);\r\n\t\tvar props = { padding, interval, type, margin, postCalculator };\r\n\t\tvar stateProps = { fullData, plotData, showingInterval, xExtentsCalculator, xScale, xAccessor, dataAltered };\r\n\t\treturn (\r\n\t\t\t<div style={{ position: \"relative\", height: height, width: width }} className={className} >\r\n\t\t\t\t<CanvasContainer ref=\"canvases\" width={width} height={height} type={type} zIndex={zIndex}/>\r\n\t\t\t\t<svg className={className} width={width} height={height} style={{ position: \"absolute\", zIndex: (zIndex + 5) }}>\r\n\t\t\t\t\t{cursor}\r\n\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t<clipPath id=\"chart-area-clip\">\r\n\t\t\t\t\t\t\t<rect x=\"0\" y=\"0\" width={dimensions.width} height={dimensions.height} />\r\n\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t</defs>\r\n\t\t\t\t\t<g transform={`translate(${margin.left + 0.5}, ${margin.top + 0.5})`}>\r\n\t\t\t\t\t\t<EventHandler ref=\"chartContainer\"\r\n\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\t{...stateProps}\r\n\t\t\t\t\t\t\tdirection={flipXScale ? -1 : 1}\r\n\t\t\t\t\t\t\tlastItem={last(data)}\r\n\t\t\t\t\t\t\tdimensions={dimensions}\r\n\t\t\t\t\t\t\tcanvasContexts={this.getCanvases}>\r\n\t\t\t\t\t\t\t{this.props.children}\r\n\t\t\t\t\t\t</EventHandler>\r\n\t\t\t\t\t</g>\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\n\t\t\t\t\t\t\tinterval={interval} type={type} margin={margin}\r\n\t\t\t\t\t\t\tdata={plotData} showingInterval={updatedInterval}\r\n\t\t\t\t\t\t\txExtentsCalculator={domainCalculator}\r\n\t\t\t\t\t\t\txScale={updatedScale} xAccessor={xAccessor}\r\n\t\t\t\t\t\t\tdimensions={dimensions}\r\n\r\n*/\r\n\r\nChartCanvas.propTypes = {\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n\tmargin: PropTypes.object,\r\n\tinterval: PropTypes.oneOf([\"D\", \"W\", \"M\"]), // ,\"m1\", \"m5\", \"m15\", \"W\", \"M\"\r\n\ttype: PropTypes.oneOf([\"svg\", \"hybrid\"]).isRequired,\r\n\tdata: PropTypes.array.isRequired,\r\n\tinitialDisplay: PropTypes.number,\r\n\tcalculator: PropTypes.arrayOf(PropTypes.func).isRequired,\r\n\txAccessor: PropTypes.func,\r\n\txExtents: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]).isRequired,\r\n\txScale: PropTypes.func.isRequired,\r\n\tclassName: PropTypes.string,\r\n\tseriesName: PropTypes.string.isRequired,\r\n\tzIndex: PropTypes.number,\r\n\tchildren: PropTypes.node.isRequired,\r\n\tdiscontinous: PropTypes.bool.isRequired,\r\n\tpostCalculator: PropTypes.func.isRequired,\r\n\tflipXScale: PropTypes.bool.isRequired,\r\n\tpadding: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.shape({\r\n\t\t\tleft: PropTypes.number,\r\n\t\t\tright: PropTypes.number,\r\n\t\t})\r\n\t]).isRequired,\r\n};\r\n\r\nChartCanvas.defaultProps = {\r\n\tmargin: { top: 20, right: 30, bottom: 30, left: 80 },\r\n\tindexAccessor: d => d.idx,\r\n\tindexMutator: (d, idx) => d.idx = idx,\r\n\tmap: identity,\r\n\ttype: \"hybrid\",\r\n\tcalculator: [],\r\n\tclassName: \"react-stockchart\",\r\n\tzIndex: 1,\r\n\txExtents: [d3.min, d3.max],\r\n\tintervalCalculator: eodIntervalCalculator,\r\n\tdataEvaluator: evaluator,\r\n\tdiscontinous: false,\r\n\tpostCalculator: identity,\r\n\tpadding: 0,\r\n\txAccessor: identity,\r\n\tflipXScale: false,\r\n\t// initialDisplay: 30\r\n};\r\n\r\nChartCanvas.childContextTypes = {\r\n\tdisplayXAccessor: PropTypes.func,\r\n};\r\n\r\nChartCanvas.ohlcv = d => ({ date: d.date, open: d.open, high: d.high, low: d.low, close: d.close, volume: d.volume });\r\n\r\nexport default ChartCanvas;\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/ChartCanvas.jsx\n **/","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\n(function () {\n    try {\n        cachedSetTimeout = setTimeout;\n    } catch (e) {\n        cachedSetTimeout = function () {\n            throw new Error('setTimeout is not defined');\n        }\n    }\n    try {\n        cachedClearTimeout = clearTimeout;\n    } catch (e) {\n        cachedClearTimeout = function () {\n            throw new Error('clearTimeout is not defined');\n        }\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/process/browser.js\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"React\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"d3\"\n ** module id = 4\n ** module chunks = 0\n **/","\"use strict\";\r\n\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport zipper from \"./zipper\";\r\nimport merge from \"./merge\";\r\nimport slidingWindow from \"./slidingWindow\";\r\nimport identity from \"./identity\";\r\nimport noop from \"./noop\";\r\nimport shallowEqual from \"./shallowEqual\";\r\nimport mappedSlidingWindow from \"./mappedSlidingWindow\";\r\nimport accumulatingWindow from \"./accumulatingWindow\";\r\n\r\nexport {\r\n\taccumulatingWindow,\r\n\tmappedSlidingWindow,\r\n\tmerge,\r\n\tidentity,\r\n\tnoop,\r\n\tshallowEqual,\r\n\tslidingWindow,\r\n\tzipper,\r\n};\r\n\r\nexport function getClosestItemIndexes2(array, value, accessor) {\r\n\tvar left = d3.bisector(accessor).left(array, value);\r\n\tleft = Math.max(left - 1, 0);\r\n\tvar right = Math.min(left + 1, array.length - 1);\r\n\r\n\tvar item = accessor(array[left]);\r\n\tif (item >= value && item <= value) right = left;\r\n\r\n\treturn { left, right };\r\n};\r\n\r\nexport function getClosestItemIndexes(array, value, accessor, log) {\r\n\tvar lo = 0, hi = array.length - 1;\r\n\twhile (hi - lo > 1) {\r\n\t\tvar mid = Math.round((lo + hi) / 2);\r\n\t\tif (accessor(array[mid]) <= value) {\r\n\t\t\tlo = mid;\r\n\t\t} else {\r\n\t\t\thi = mid;\r\n\t\t}\r\n\t}\r\n\t// for Date object === does not work, so using the <= in combination with >=\r\n\t// the same code works for both dates and numbers\r\n\tif (accessor(array[lo]) >= value && accessor(array[lo]) <= value) hi = lo;\r\n\tif (accessor(array[hi]) >= value && accessor(array[hi]) <= value) lo = hi;\r\n\r\n\tif (accessor(array[lo]) < value && accessor(array[hi]) < value) lo = hi;\r\n\tif (accessor(array[lo]) > value && accessor(array[hi]) > value) hi = lo;\r\n\r\n\tif (log) {\r\n\t\t// console.log(lo, accessor(array[lo]), value, accessor(array[hi]), hi);\r\n\t\t// console.log(accessor(array[lo]), lo, value, accessor(array[lo]) >= value);\r\n\t\t// console.log(value, hi, accessor(array[hi]), accessor(array[lo]) <= value);\r\n\t}\r\n\t// var left = value > accessor(array[lo]) ? lo : lo;\r\n\t// var right = gte(value, accessor(array[hi])) ? Math.min(hi + 1, array.length - 1) : hi;\r\n\r\n\t// console.log(value, accessor(array[left]), accessor(array[right]));\r\n\treturn { left: lo, right: hi };\r\n};\r\n\r\nexport function getClosestItem(array, value, accessor, log) {\r\n\tvar { left, right } = getClosestItemIndexes(array, value, accessor, log);\r\n\r\n\tif (left === right) {\r\n\t\treturn array[left];\r\n\t}\r\n\r\n\tvar closest = (Math.abs(accessor(array[left]) - value) < Math.abs(accessor(array[right]) - value))\r\n\t\t\t\t\t\t? array[left]\r\n\t\t\t\t\t\t: array[right];\r\n\tif (log) {\r\n\t\tconsole.log(array[left], array[right], closest, left, right);\r\n\t}\r\n\treturn closest;\r\n};\r\n\r\n\r\nexport const overlayColors = d3.scale.category10();\r\n\r\nexport function rebind(target, source, mappings) {\r\n\tif (typeof(mappings) !== \"object\") {\r\n\t\treturn d3.rebind.apply(d3, arguments);\r\n\t}\r\n\tObject.keys(mappings)\r\n\t\t.forEach(function(targetName) {\r\n\t\t\tvar method = source[mappings[targetName]];\r\n\t\t\tif (typeof method !== \"function\") {\r\n\t\t\t\tthrow new Error(`The method ${mappings[targetName]} does not exist on the source object`);\r\n\t\t\t}\r\n\t\t\ttarget[targetName] = function() {\r\n\t\t\t\tvar value = method.apply(source, arguments);\r\n\t\t\t\treturn value === source ? target : value;\r\n\t\t\t};\r\n\t\t});\r\n\treturn target;\r\n}\r\n\r\nexport function head(array, accessor) {\r\n\tif (accessor && array) {\r\n\t\tvar value;\r\n\t\tfor (var i = 0; i < array.length; i++) {\r\n\t\t\tvalue = array[i];\r\n\t\t\tif (isDefined(accessor(value))) break;\r\n\t\t};\r\n\t\treturn value;\r\n\t}\r\n\treturn array ? array[0] : undefined;\r\n}\r\n\r\nexport const first = head;\r\n\r\nexport function last(array, accessor) {\r\n\tif (accessor && array) {\r\n\t\tvar value;\r\n\t\tfor (var i = array.length - 1; i >= 0; i--) {\r\n\t\t\tvalue = array[i];\r\n\t\t\tif (isDefined(accessor(value))) break;\r\n\t\t};\r\n\t\treturn value;\r\n\t}\r\n\tvar length = array ? array.length : 0;\r\n\treturn length ? array[length - 1] : undefined;\r\n}\r\n\r\nexport function isDefined(d) {\r\n\treturn d !== null && typeof d != \"undefined\";\r\n}\r\n\r\nexport function isNotDefined(d) {\r\n\treturn !isDefined(d);\r\n}\r\n\r\nexport function isObject(d) {\r\n\treturn isDefined(d) && typeof d === \"object\" && !Array.isArray(d);\r\n}\r\n\r\nexport const isArray = Array.isArray;\r\n\r\nexport function touchPosition(touch, e) {\r\n\tvar container = e.target,\r\n\t\trect = container.getBoundingClientRect(),\r\n\t\tx = touch.clientX - rect.left - container.clientLeft,\r\n\t\ty = touch.clientY - rect.top - container.clientTop,\r\n\t\txy = [Math.round(x), Math.round(y)];\r\n\treturn xy;\r\n};\r\n\r\nexport function mousePosition(e) {\r\n\tvar container = e.currentTarget,\r\n\t\trect = container.getBoundingClientRect(),\r\n\t\tx = e.clientX - rect.left - container.clientLeft,\r\n\t\ty = e.clientY - rect.top - container.clientTop,\r\n\t\txy = [Math.round(x), Math.round(y)];\r\n\treturn xy;\r\n};\r\n\r\n\r\nexport function clearCanvas(canvasList) {\r\n\tcanvasList.forEach(each => {\r\n\t\teach.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\teach.clearRect(-1, -1, each.canvas.width + 2, each.canvas.height + 2);\r\n\t});\r\n};\r\n\r\nexport function hexToRGBA(inputHex, opacity) {\r\n\tvar hex = inputHex.replace(\"#\", \"\");\r\n\tif (inputHex.indexOf(\"#\") > -1 && (hex.length === 3 || hex.length === 6)) {\r\n\r\n\t\tvar multiplier = (hex.length === 3) ? 1 : 2;\r\n\r\n\t\tvar r = parseInt(hex.substring(0, 1 * multiplier), 16);\r\n\t\tvar g = parseInt(hex.substring(1 * multiplier, 2 * multiplier), 16);\r\n\t\tvar b = parseInt(hex.substring(2 * multiplier, 3 * multiplier), 16);\r\n\r\n\t\tvar result = `rgba(${ r }, ${ g }, ${ b }, ${ opacity })`;\r\n\r\n\t\treturn result;\r\n\t}\r\n\treturn inputHex;\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/index.js\n **/","\"use strict\";\r\n\r\n/* an extension to d3.zip so we call a function instead of an array */\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport identity from \"./identity\";\r\n\r\nexport default function zipper() {\r\n\tvar combine = identity;\r\n\r\n\tfunction zip() {\r\n\t\tvar n = arguments.length;\r\n\t\tif (!n) return [];\r\n\t\tvar i, m = d3.min(arguments, d3_zipLength), zips = new Array(m);\r\n\t\tfor (i = -1; ++i < m; ) {\r\n\t\t\tfor (var j = -1, zip = zips[i] = new Array(n); ++j < n; ) {\r\n\t\t\t\tzip[j] = arguments[j][i];\r\n\t\t\t}\r\n\t\t\tzips[i] = combine.apply(this, zips[i]);\r\n\t\t}\r\n\t\treturn zips;\r\n\t};\r\n\tfunction d3_zipLength(d) {\r\n\t\treturn d.length;\r\n\t}\r\n\tzip.combine = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn combine;\r\n\t\t}\r\n\t\tcombine = x;\r\n\t\treturn zip;\r\n\t};\r\n\treturn zip;\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/zipper.js\n **/","\"use strict\";\r\n\r\nexport default d => d;\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/identity.js\n **/","/*\r\nhttps://github.com/ScottLogic/d3fc/blob/master/src/indicator/algorithm/merge.js\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014-2015 Scott Logic Ltd.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nimport identity from \"./identity\";\r\nimport zipper from \"./zipper\";\r\nimport noop from \"./noop\";\r\n\r\nimport { isNotDefined } from \"./index\";\r\n\r\n// applies an algorithm to an array, merging the result back into\r\n// the source array using the given merge function.\r\nexport default function() {\r\n\r\n\tvar algorithm = identity,\r\n\t\tskipUndefined = true,\r\n\t\tmerge = noop;\r\n\r\n\tfunction mergeCompute(data) {\r\n\t\tvar zip = zipper()\r\n\t\t\t.combine((datum, indicator) => {\r\n\t\t\t\tvar result = (skipUndefined && isNotDefined(indicator))\r\n\t\t\t\t\t? datum\r\n\t\t\t\t\t: merge(datum, indicator);\r\n\t\t\t\treturn isNotDefined(result) ? datum : result;\r\n\t\t\t});\r\n\r\n\t\treturn zip(data, algorithm(data));\r\n\t};\r\n\r\n\tmergeCompute.algorithm = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn algorithm;\r\n\t\t}\r\n\t\talgorithm = x;\r\n\t\treturn mergeCompute;\r\n\t};\r\n\r\n\tmergeCompute.merge = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn merge;\r\n\t\t}\r\n\t\tmerge = x;\r\n\t\treturn mergeCompute;\r\n\t};\r\n\tmergeCompute.skipUndefined = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn skipUndefined;\r\n\t\t}\r\n\t\tskipUndefined = x;\r\n\t\treturn mergeCompute;\r\n\t};\r\n\r\n\treturn mergeCompute;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/merge.js\n **/","export default () => {};\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/noop.js\n **/","\"use strict\";\r\n\r\n/*\r\n\r\nTaken from https://github.com/ScottLogic/d3fc/blob/master/src/indicator/algorithm/calculator/slidingWindow.js\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014-2015 Scott Logic Ltd.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n\r\n*/\r\n\r\nimport d3 from \"d3\";\r\nimport noop from \"./noop\";\r\nimport identity from \"./identity\";\r\n\r\nexport default function() {\r\n\r\n\tvar undefinedValue = undefined,\r\n\t\twindowSize = 10,\r\n\t\taccumulator = noop,\r\n\t\tsource = identity,\r\n\t\tskipInitial = 0;\r\n\r\n\tvar slidingWindow = function(data) {\r\n\t\tvar size = d3.functor(windowSize).apply(this, arguments);\r\n\t\tvar windowData = data.slice(skipInitial, size + skipInitial).map(source);\r\n\t\tvar accumulatorIdx = 0;\r\n\t\tvar undef = d3.functor(undefinedValue);\r\n\t\t// console.log(skipInitial, size, data.length, windowData.length);\r\n\t\treturn data.map(function(d, i) {\r\n\t\t\t// console.log(d, i);\r\n\t\t\tif (i < (skipInitial + size - 1)) {\r\n\t\t\t\treturn undef(d, i);\r\n\t\t\t}\r\n\t\t\tif (i >= (skipInitial + size)) {\r\n\t\t\t\t// Treat windowData as FIFO rolling buffer\r\n\t\t\t\twindowData.shift();\r\n\t\t\t\twindowData.push(source(d, i));\r\n\t\t\t}\r\n\t\t\treturn accumulator(windowData, i, accumulatorIdx++);\r\n\t\t});\r\n\t};\r\n\r\n\tslidingWindow.undefinedValue = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn undefinedValue;\r\n\t\t}\r\n\t\tundefinedValue = x;\r\n\t\treturn slidingWindow;\r\n\t};\r\n\tslidingWindow.windowSize = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn windowSize;\r\n\t\t}\r\n\t\twindowSize = x;\r\n\t\treturn slidingWindow;\r\n\t};\r\n\tslidingWindow.accumulator = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn accumulator;\r\n\t\t}\r\n\t\taccumulator = x;\r\n\t\treturn slidingWindow;\r\n\t};\r\n\tslidingWindow.skipInitial = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn skipInitial;\r\n\t\t}\r\n\t\tskipInitial = x;\r\n\t\treturn slidingWindow;\r\n\t};\r\n\tslidingWindow.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn slidingWindow;\r\n\t};\r\n\r\n\treturn slidingWindow;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/slidingWindow.js\n **/","// https://github.com/jonschlinkert/is-equal-shallow/\r\n\r\n/*\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2015, Jon Schlinkert.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nfunction isDate(date) {\r\n\treturn Object.prototype.toString.call(date) === \"[object Date]\";\r\n}\r\n\r\nfunction isEqual(val1, val2) {\r\n\treturn (isDate(val1) && isDate(val2))\r\n\t\t? val1.getTime() === val2.getTime()\r\n\t\t: val1 === val2;\r\n}\r\n\r\nexport default function shallowEqual(a, b) {\r\n\tif (!a && !b) { return true; }\r\n\tif (!a && b || a && !b) { return false; }\r\n\r\n\tvar numKeysA = 0, numKeysB = 0, key;\r\n\tfor (key in b) {\r\n\t\tnumKeysB++;\r\n\t\tif (/* !isPrimitive(b[key]) || */ !a.hasOwnProperty(key) || !isEqual(a[key], b[key])) {\r\n\t\t\t// console.log(key, a, b);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tfor (key in a) {\r\n\t\tnumKeysA++;\r\n\t}\r\n\treturn numKeysA === numKeysB;\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/shallowEqual.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport noop from \"./noop\";\r\nimport identity from \"./identity\";\r\n\r\nexport default function() {\r\n\r\n\tvar undefinedValue = undefined,\r\n\t\twindowSize = 10,\r\n\t\taccumulator = noop,\r\n\t\tsource = identity,\r\n\t\tskipInitial = 0;\r\n\r\n\tvar mappedSlidingWindow = function(data) {\r\n\t\tvar size = d3.functor(windowSize).apply(this, arguments);\r\n\t\tvar windowData = [];\r\n\t\tvar accumulatorIdx = 0;\r\n\t\tvar undef = d3.functor(undefinedValue);\r\n\t\t// console.log(skipInitial, size, data.length, windowData.length);\r\n\t\tvar result = [];\r\n\t\tdata.forEach(function(d, i) {\r\n\t\t\t// console.log(d, i, windowData.length);\r\n\t\t\tvar mapped;\r\n\t\t\tif (i < (skipInitial + size - 1)) {\r\n\t\t\t\tmapped = undef(d, i);\r\n\t\t\t\tresult.push(mapped);\r\n\t\t\t\twindowData.push(mapped);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (i >= (skipInitial + size)) {\r\n\t\t\t\t// Treat windowData as FIFO rolling buffer\r\n\t\t\t\twindowData.shift();\r\n\t\t\t}\r\n\t\t\twindowData.push(source(d, i));\r\n\t\t\tmapped = accumulator(windowData, i, accumulatorIdx++);\r\n\t\t\tresult.push(mapped);\r\n\t\t\twindowData.pop();\r\n\t\t\twindowData.push(mapped);\r\n\t\t\treturn;\r\n\t\t});\r\n\t\treturn result;\r\n\t};\r\n\r\n\tmappedSlidingWindow.undefinedValue = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn undefinedValue;\r\n\t\t}\r\n\t\tundefinedValue = x;\r\n\t\treturn mappedSlidingWindow;\r\n\t};\r\n\tmappedSlidingWindow.windowSize = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn windowSize;\r\n\t\t}\r\n\t\twindowSize = x;\r\n\t\treturn mappedSlidingWindow;\r\n\t};\r\n\tmappedSlidingWindow.accumulator = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn accumulator;\r\n\t\t}\r\n\t\taccumulator = x;\r\n\t\treturn mappedSlidingWindow;\r\n\t};\r\n\tmappedSlidingWindow.skipInitial = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn skipInitial;\r\n\t\t}\r\n\t\tskipInitial = x;\r\n\t\treturn mappedSlidingWindow;\r\n\t};\r\n\tmappedSlidingWindow.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn mappedSlidingWindow;\r\n\t};\r\n\r\n\treturn mappedSlidingWindow;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/mappedSlidingWindow.js\n **/","\"use strict\";\r\n\r\n/*\r\n\r\nTaken from https://github.com/ScottLogic/d3fc/blob/master/src/indicator/algorithm/calculator/slidingWindow.js\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014-2015 Scott Logic Ltd.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n\r\n*/\r\n\r\nimport d3 from \"d3\";\r\nimport noop from \"./noop\";\r\nimport identity from \"./identity\";\r\n\r\nexport default function() {\r\n\r\n\tvar accumulateTill = d3.functor(false),\r\n\t\taccumulator = noop,\r\n\t\tvalue = identity;\r\n\r\n\tvar accumulatingWindow = function(data) {\r\n\t\tvar accumulatedWindow = [];\r\n\t\tvar response = [];\r\n\t\tvar accumulatorIdx = 0;\r\n\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\tvar d = data[i];\r\n\t\t\t// console.log(d, accumulateTill(d));\r\n\t\t\tif (accumulateTill(d)) {\r\n\t\t\t\tif (accumulatedWindow.length > 0) response.push(accumulator(accumulatedWindow, i, accumulatorIdx++));\r\n\t\t\t\taccumulatedWindow = [value(d)];\r\n\t\t\t} else {\r\n\t\t\t\taccumulatedWindow.push(value(d));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn response;\r\n\t};\r\n\r\n\taccumulatingWindow.accumulateTill = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn accumulateTill;\r\n\t\t}\r\n\t\taccumulateTill = d3.functor(x);\r\n\t\treturn accumulatingWindow;\r\n\t};\r\n\taccumulatingWindow.accumulator = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn accumulator;\r\n\t\t}\r\n\t\taccumulator = x;\r\n\t\treturn accumulatingWindow;\r\n\t};\r\n\taccumulatingWindow.value = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\tvalue = x;\r\n\t\treturn accumulatingWindow;\r\n\t};\r\n\r\n\treturn accumulatingWindow;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/accumulatingWindow.js\n **/","\"use strict\";\r\n\r\nimport React from \"react\";\r\nimport d3 from \"d3\";\r\nimport flattenDeep from \"lodash.flattendeep\";\r\n\r\nimport EventCapture from \"../EventCapture\";\r\nimport Chart from \"../Chart\";\r\n\r\nimport {\r\n\tisObject,\r\n\tgetClosestItem,\r\n\tzipper,\r\n\tisDefined,\r\n} from \"./index\";\r\n\r\nexport function getChartOrigin(origin, contextWidth, contextHeight) {\r\n\tvar originCoordinates = typeof origin === \"function\"\r\n\t\t? origin(contextWidth, contextHeight)\r\n\t\t: origin;\r\n\treturn originCoordinates;\r\n};\r\n\r\nexport function getDimensions({ width, height }, chartProps) {\r\n\r\n\tvar chartWidth = (chartProps.width || width);\r\n\tvar chartHeight = (chartProps.height || height);\r\n\r\n\treturn {\r\n\t\tavailableWidth: width,\r\n\t\tavailableHeight: height,\r\n\t\twidth: chartWidth,\r\n\t\theight: chartHeight\r\n\t};\r\n};\r\n\r\nfunction values(func) {\r\n\treturn (d) => {\r\n\t\tvar obj = func(d);\r\n\t\treturn isObject(obj) ? Object.keys(obj).map(key => obj[key]) : obj;\r\n\t};\r\n};\r\n\r\nexport function shouldShowCrossHairStyle(children) {\r\n\treturn React.Children.map(children, (each) => {\r\n\t\tif (each.type === EventCapture) {\r\n\t\t\treturn each.props.useCrossHairStyle;\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}).filter(isDefined)[0];\r\n}\r\n\r\nexport function getNewChartConfig(innerDimension, children) {\r\n\r\n\treturn React.Children.map(children, (each) => {\r\n\t\tif (each.type === Chart) {\r\n\t\t\tvar { id, origin, padding, yExtents: yExtentsProp, yScale, flipYScale } = each.props;\r\n\t\t\tvar { width, height, availableWidth, availableHeight } = getDimensions(innerDimension, each.props);\r\n\t\t\tvar { yMousePointerDisplayLocation: at, yMousePointerDisplayFormat: yDisplayFormat } = each.props;\r\n\t\t\tvar { yMousePointerRectWidth: rectWidth, yMousePointerRectHeight: rectHeight } = each.props;\r\n\t\t\tvar mouseCoordinates = { at, yDisplayFormat, rectHeight, rectWidth };\r\n\t\t\tvar yExtents = (Array.isArray(yExtentsProp) ? yExtentsProp : [yExtentsProp]).map(d3.functor);\r\n\t\t\t// console.log(yExtentsProp, yExtents);\r\n\t\t\treturn {\r\n\t\t\t\tid,\r\n\t\t\t\torigin: d3.functor(origin)(availableWidth, availableHeight),\r\n\t\t\t\tpadding,\r\n\t\t\t\tyExtents,\r\n\t\t\t\tflipYScale,\r\n\t\t\t\tyScale,\r\n\t\t\t\tmouseCoordinates,\r\n\t\t\t\twidth,\r\n\t\t\t\theight\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}).filter(each => isDefined(each));\r\n};\r\nexport function getCurrentCharts(chartConfig, mouseXY) {\r\n\tvar currentCharts = chartConfig.filter(eachConfig => {\r\n\t\tvar top = eachConfig.origin[1];\r\n\t\tvar bottom = top + eachConfig.height;\r\n\t\treturn (mouseXY[1] > top && mouseXY[1] < bottom);\r\n\t}).map(config => config.id);\r\n\r\n\treturn currentCharts;\r\n}\r\n\r\nfunction setRange(scale, height, padding, flipYScale) {\r\n\tif (scale.rangeRoundPoints) {\r\n\t\tif (isNaN(padding)) throw new Error(\"padding has to be a number for ordinal scale\");\r\n\t\tscale.rangeRoundPoints(flipYScale ? [0, height] : [height, 0], padding);\r\n\t} else {\r\n\t\tvar { top, bottom } = isNaN(padding)\r\n\t\t\t? padding\r\n\t\t\t: { top: padding, bottom: padding };\r\n\r\n\t\tscale.range(flipYScale ? [top, height - bottom] : [height - bottom, top]);\r\n\t}\r\n\treturn scale;\r\n}\r\n\r\nexport function getChartConfigWithUpdatedYScales(chartConfig, plotData) {\r\n\r\n\tvar yDomains = chartConfig\r\n\t\t\t.map(({ yExtents, yScale }) => {\r\n\t\t\t\tvar yValues = yExtents.map(eachExtent =>\r\n\t\t\t\t\tplotData.map(values(eachExtent)));\r\n\t\t\t\tyValues = flattenDeep(yValues);\r\n\r\n\t\t\t\tvar yDomains = (yScale.invert)\r\n\t\t\t\t\t? d3.extent(yValues)\r\n\t\t\t\t\t: d3.set(yValues).values();\r\n\r\n\t\t\t\treturn yDomains;\r\n\t\t\t});\r\n\r\n\tvar combine = zipper()\r\n\t\t.combine((config, domain) => {\r\n\t\t\tvar { padding, height, yScale, flipYScale } = config;\r\n\r\n\t\t\treturn { ...config, yScale: setRange(yScale.copy().domain(domain), height, padding, flipYScale) };\r\n\t\t\t// return { ...config, yScale: yScale.copy().domain(domain).range([height - padding, padding]) };\r\n\t\t});\r\n\r\n\tvar updatedChartConfig = combine(chartConfig, yDomains);\r\n\treturn updatedChartConfig;\r\n};\r\n\r\nexport function getCurrentItem(xScale, xAccessor, mouseXY, plotData) {\r\n\tvar xValue, item;\r\n\tif (xScale.invert) {\r\n\t\txValue = xScale.invert(mouseXY[0]);\r\n\t\titem = getClosestItem(plotData, xValue, xAccessor);\r\n\t} else {\r\n\t\tvar d = xScale.range().map((d, idx) => ({ x: Math.abs(d - mouseXY[0]), idx })).reduce((a, b) => a.x < b.x ? a : b);\r\n\t\titem = isDefined(d) ? plotData[d.idx] : plotData[0];\r\n\t\t// console.log(d, item);\r\n\t}\r\n\treturn item;\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/ChartDataUtil.js\n **/","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Recursively flattens `array`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flattenDeep([1, [2, [3, [4]], 5]]);\n * // => [1, 2, 3, 4, 5]\n */\nfunction flattenDeep(array) {\n  var length = array ? array.length : 0;\n  return length ? baseFlatten(array, INFINITY) : [];\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = flattenDeep;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash.flattendeep/index.js\n ** module id = 15\n ** module chunks = 0\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport { mousePosition, touchPosition } from \"./utils\";\r\n\r\nvar mousemove = \"mousemove.pan\", mouseup = \"mouseup.pan\";\r\n\r\nfunction d3Window(node) {\r\n\tvar d3win = node && (node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView);\r\n\treturn d3win;\r\n}\r\n\r\nfunction getTouchProps(touch) {\r\n\tif (!touch) return {};\r\n\treturn {\r\n\t\tpageX: touch.pageX,\r\n\t\tpageY: touch.pageY,\r\n\t\tclientX: touch.clientX,\r\n\t\tclientY: touch.clientY\r\n\t};\r\n}\r\n\r\n\r\n\r\nclass EventCapture extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleEnter = this.handleEnter.bind(this);\r\n\t\tthis.handleLeave = this.handleLeave.bind(this);\r\n\t\tthis.handleWheel = this.handleWheel.bind(this);\r\n\t\tthis.handleMouseMove = this.handleMouseMove.bind(this);\r\n\t\tthis.handleMouseDown = this.handleMouseDown.bind(this);\r\n\t\tthis.handlePanEnd = this.handlePanEnd.bind(this);\r\n\t\tthis.handlePan = this.handlePan.bind(this);\r\n\t\tthis.handleTouchStart = this.handleTouchStart.bind(this);\r\n\t\tthis.handleTouchMove = this.handleTouchMove.bind(this);\r\n\t\tthis.handleTouchEnd = this.handleTouchEnd.bind(this);\r\n\t\tthis.lastTouch = {};\r\n\t\tthis.initialPinch = {};\r\n\t\tthis.mouseInteraction = true;\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tif (this.context.onFocus) this.context.onFocus(this.props.defaultFocus);\r\n\t}\r\n\thandleEnter() {\r\n\t\tif (this.context.onMouseEnter) {\r\n\t\t\tthis.context.onMouseEnter();\r\n\t\t}\r\n\t}\r\n\thandleLeave() {\r\n\t\tif (this.context.onMouseLeave) {\r\n\t\t\tthis.context.onMouseLeave();\r\n\t\t}\r\n\t}\r\n\thandleWheel(e) {\r\n\t\tif (this.props.zoom\r\n\t\t\t\t&& this.context.onZoom\r\n\t\t\t\t&& this.context.focus) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tvar zoomDir = e.deltaY > 0 ? this.props.zoomMultiplier : -this.props.zoomMultiplier;\r\n\t\t\tvar newPos = mousePosition(e);\r\n\t\t\tthis.context.onZoom(zoomDir, newPos);\r\n\t\t\tif (this.props.onZoom) {\r\n\t\t\t\tthis.props.onZoom(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\thandleMouseMove(e) {\r\n\t\tif (this.mouseInteraction && this.context.onMouseMove && this.props.mouseMove) {\r\n\t\t\tif (!this.context.panInProgress) {\r\n\t\t\t\tvar newPos = mousePosition(e);\r\n\t\t\t\tthis.context.onMouseMove(newPos, \"mouse\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\thandleMouseDown(e) {\r\n\t\tvar mouseEvent = e || d3.event;\r\n\t\tvar { pan } = this.props;\r\n\t\tvar { onPanStart, focus, onFocus, xScale } = this.context;\r\n\t\tif (this.mouseInteraction && pan && onPanStart) {\r\n\t\t\tvar mouseXY = mousePosition(mouseEvent);\r\n\r\n\t\t\tvar dx = mouseEvent.pageX - mouseXY[0],\r\n\t\t\t\tdy = mouseEvent.pageY - mouseXY[1];\r\n\r\n\t\t\tvar captureDOM = this.refs.capture;\r\n\r\n\t\t\tvar win = d3Window(captureDOM);\r\n\t\t\td3.select(win)\r\n\t\t\t\t.on(mousemove, this.handlePan)\r\n\t\t\t\t.on(mouseup, this.handlePanEnd);\r\n\r\n\t\t\tonPanStart(xScale.domain(), mouseXY, [dx, dy]);\r\n\t\t} else {\r\n\t\t\tif (!focus && onFocus) onFocus(true);\r\n\t\t}\r\n\t\tmouseEvent.preventDefault();\r\n\t}\r\n\thandleRightClick(e) {\r\n\t\te.preventDefault();\r\n\t\t// console.log(\"RIGHT CLICK\");\r\n\t}\r\n\thandlePan() {\r\n\t\t// console.log(\"handlePan\")\r\n\t\tvar { pan: panEnabled, onPan: panListener } = this.props;\r\n\t\tvar { deltaXY: dxdy, xScale, onPan } = this.context;\r\n\r\n\t\tvar e = d3.event;\r\n\t\tvar newPos = [e.pageX - dxdy[0], e.pageY - dxdy[1]];\r\n\t\t// console.log(\"moved from- \", startXY, \" to \", newPos);\r\n\t\tif (this.mouseInteraction && panEnabled && onPan) {\r\n\t\t\tonPan(newPos, xScale.domain());\r\n\t\t\tif (panListener) {\r\n\t\t\t\tpanListener(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\thandlePanEnd() {\r\n\t\tvar e = d3.event;\r\n\r\n\t\tvar { pan: panEnabled } = this.props;\r\n\t\tvar { deltaXY: dxdy, onPanEnd } = this.context;\r\n\r\n\t\tvar newPos = [e.pageX - dxdy[0], e.pageY - dxdy[1]];\r\n\r\n\t\tvar captureDOM = this.refs.capture;\r\n\r\n\t\tvar win = d3Window(captureDOM);\r\n\r\n\t\tif (this.mouseInteraction && panEnabled && onPanEnd) {\r\n\t\t\td3.select(win)\r\n\t\t\t\t.on(mousemove, null)\r\n\t\t\t\t.on(mouseup, null);\r\n\t\t\tonPanEnd(newPos, e);\r\n\t\t}\r\n\t\t// e.preventDefault();\r\n\t}\r\n\thandleTouchStart(e) {\r\n\t\tthis.mouseInteraction = false;\r\n\r\n\t\tvar { pan: panEnabled } = this.props;\r\n\t\tvar { deltaXY: dxdy } = this.context;\r\n\r\n\t\tvar { onPanStart, onMouseMove, xScale, onPanEnd, panInProgress } = this.context;\r\n\r\n\t\tif (e.touches.length === 1) {\r\n\t\t\tvar touch = getTouchProps(e.touches[0]);\r\n\t\t\tthis.lastTouch = touch;\r\n\t\t\tvar touchXY = touchPosition(touch, e);\r\n\t\t\tonMouseMove(touchXY, \"touch\", e);\r\n\t\t\tif (panEnabled && onPanStart) {\r\n\t\t\t\tvar dx = touch.pageX - touchXY[0],\r\n\t\t\t\t\tdy = touch.pageY - touchXY[1];\r\n\r\n\t\t\t\tonPanStart(xScale.domain(), touchXY, [dx, dy]);\r\n\t\t\t}\r\n\t\t} else if (e.touches.length === 2) {\r\n\t\t\t// pinch zoom begin\r\n\t\t\t// do nothing pinch zoom is handled in handleTouchMove\r\n\t\t\tvar touch1 = getTouchProps(e.touches[0]);\r\n\r\n\t\t\tif (panInProgress && panEnabled && onPanEnd) {\r\n\t\t\t\t// end pan first\r\n\t\t\t\tvar newPos = [touch1.pageX - dxdy[0], touch1.pageY - dxdy[1]];\r\n\t\t\t\tonPanEnd(newPos, e);\r\n\t\t\t\tthis.lastTouch = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (e.touches.length !== 2) this.initialPinch = null;\r\n\t\t// var newPos = mousePosition(e);\r\n\t\t// console.log(\"handleTouchStart\", e);\r\n\t\te.preventDefault();\r\n\t\t// e.stopPropagation();\r\n\t\t// this.context.onMouseMove(newPos, e);\r\n\t}\r\n\thandleTouchMove(e) {\r\n\t\tvar { pan: panEnabled, onPan: panListener, zoom: zoomEnabled } = this.props;\r\n\t\tvar { deltaXY: dxdy, xScale, onPan, onPinchZoom, focus, panInProgress } = this.context;\r\n\r\n\t\tif (e.touches.length === 1) {\r\n\t\t\t// pan\r\n\t\t\tvar touch = this.lastTouch = getTouchProps(e.touches[0]);\r\n\r\n\t\t\tvar newPos = [touch.pageX - dxdy[0], touch.pageY - dxdy[1]];\r\n\t\t\tif (panInProgress && panEnabled && onPan) {\r\n\t\t\t\tonPan(newPos, xScale.domain());\r\n\t\t\t\tif (panListener) {\r\n\t\t\t\t\tpanListener(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (e.touches.length === 2) {\r\n\t\t\t// pinch zoom\r\n\t\t\tif (zoomEnabled && onPinchZoom && focus) {\r\n\t\t\t\tvar touch1 = getTouchProps(e.touches[0]);\r\n\t\t\t\tvar touch2 = getTouchProps(e.touches[1]);\r\n\r\n\t\t\t\tvar touch1Pos = touchPosition(touch1, e);\r\n\t\t\t\tvar touch2Pos = touchPosition(touch2, e);\r\n\r\n\t\t\t\tif (this.initialPinch === null) {\r\n\t\t\t\t\tthis.initialPinch = {\r\n\t\t\t\t\t\ttouch1Pos,\r\n\t\t\t\t\t\ttouch2Pos,\r\n\t\t\t\t\t\txScale,\r\n\t\t\t\t\t\trange: xScale.range(),\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (this.initialPinch && !panInProgress) {\r\n\t\t\t\t\tonPinchZoom(this.initialPinch, {\r\n\t\t\t\t\t\ttouch1Pos,\r\n\t\t\t\t\t\ttouch2Pos,\r\n\t\t\t\t\t\txScale,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\te.preventDefault();\r\n\r\n\t\t// console.log(\"handleTouchMove\", e);\r\n\t}\r\n\thandleTouchEnd(e) {\r\n\t\t// TODO enableMouseInteraction\r\n\t\tvar { pan: panEnabled } = this.props;\r\n\t\tvar { deltaXY: dxdy, onPanEnd, panInProgress } = this.context;\r\n\r\n\t\tif (this.lastTouch) {\r\n\t\t\tvar newPos = [this.lastTouch.pageX - dxdy[0], this.lastTouch.pageY - dxdy[1]];\r\n\r\n\t\t\tthis.initialPinch = null;\r\n\t\t\tif (panInProgress && panEnabled && onPanEnd) {\r\n\t\t\t\tonPanEnd(newPos, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log(\"handleTouchEnd\", dxdy, newPos, e);\r\n\t\tthis.mouseInteraction = true;\r\n\t\te.preventDefault();\r\n\t}\r\n\trender() {\r\n\t\tvar className = this.context.panInProgress ? \"react-stockcharts-grabbing-cursor\" : \"react-stockcharts-crosshair-cursor\";\r\n\r\n\t\treturn (\r\n\t\t\t<rect ref=\"capture\"\r\n\t\t\t\tclassName={className}\r\n\t\t\t\twidth={this.context.width} height={this.context.height} style={{ opacity: 0 }}\r\n\t\t\t\tonMouseEnter={this.handleEnter}\r\n\t\t\t\tonMouseLeave={this.handleLeave}\r\n\t\t\t\tonMouseMove={this.handleMouseMove}\r\n\t\t\t\tonWheel={this.handleWheel}\r\n\t\t\t\tonMouseDown={this.handleMouseDown}\r\n\t\t\t\tonContextMenu={this.handleRightClick}\r\n\t\t\t\tonTouchStart={this.handleTouchStart}\r\n\t\t\t\tonTouchEnd={this.handleTouchEnd}\r\n\t\t\t\tonTouchMove={this.handleTouchMove}\r\n\t\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nEventCapture.propTypes = {\r\n\tmouseMove: PropTypes.bool.isRequired,\r\n\tzoom: PropTypes.bool.isRequired,\r\n\tzoomMultiplier: PropTypes.number.isRequired,\r\n\tpan: PropTypes.bool.isRequired,\r\n\tpanSpeedMultiplier: PropTypes.number.isRequired,\r\n\tdefaultFocus: PropTypes.bool.isRequired,\r\n\tuseCrossHairStyle: PropTypes.bool.isRequired,\r\n\tonZoom: PropTypes.func,\r\n\tonPan: PropTypes.func,\r\n};\r\n\r\nEventCapture.defaultProps = {\r\n\tmouseMove: false,\r\n\tzoom: false,\r\n\tzoomMultiplier: 1,\r\n\tpan: false,\r\n\tpanSpeedMultiplier: 1,\r\n\tdefaultFocus: false,\r\n\tuseCrossHairStyle: true,\r\n\r\n};\r\n\r\nEventCapture.contextTypes = {\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n\tpanInProgress: PropTypes.bool,\r\n\tfocus: PropTypes.bool.isRequired,\r\n\tchartConfig: PropTypes.array,\r\n\txScale: PropTypes.func.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\tdeltaXY: PropTypes.arrayOf(Number),\r\n\r\n\tonMouseMove: PropTypes.func,\r\n\tonMouseEnter: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n\tonZoom: PropTypes.func,\r\n\tonPinchZoom: PropTypes.func,\r\n\tonPanStart: PropTypes.func,\r\n\tonPan: PropTypes.func,\r\n\tonPanEnd: PropTypes.func,\r\n\tonFocus: PropTypes.func,\r\n};\r\n\r\nexport default EventCapture;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/EventCapture.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport PureComponent from \"./utils/PureComponent\";\r\n\r\nclass Chart extends PureComponent {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\t\tthis.yScale = this.yScale.bind(this);\r\n\t}\r\n\tyScale() {\r\n\t\tvar chartConfig = this.context.chartConfig.filter((each) => each.id === this.props.id)[0];\r\n\t\treturn chartConfig.yScale.copy();\r\n\t}\r\n\tgetChildContext() {\r\n\t\tvar { id: chartId } = this.props;\r\n\t\tvar chartConfig = this.context.chartConfig.filter((each) => each.id === chartId)[0];\r\n\r\n\t\tvar { width, height } = chartConfig;\r\n\t\tvar canvasOriginX = 0.5 + chartConfig.origin[0] + this.context.margin.left;\r\n\t\tvar canvasOriginY = 0.5 + chartConfig.origin[1] + this.context.margin.top;\r\n\r\n\t\treturn { chartId, chartConfig, canvasOriginX, canvasOriginY, width, height };\r\n\t}\r\n\trender() {\r\n\t\tvar { origin } = this.context.chartConfig.filter((each) => each.id === this.props.id)[0];\r\n\t\tvar [x, y] = origin;\r\n\r\n\t\treturn <g transform={`translate(${ x }, ${ y })`}>{this.props.children}</g>;\r\n\t}\r\n}\r\n\r\nChart.propTypes = {\r\n\theight: PropTypes.number,\r\n\twidth: PropTypes.number,\r\n\torigin: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]).isRequired,\r\n\tid: PropTypes.number.isRequired,\r\n\tyExtents: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]).isRequired,\r\n\tyScale: PropTypes.func.isRequired,\r\n\tyMousePointerDisplayLocation: PropTypes.oneOf([\"left\", \"right\"]),\r\n\tyMousePointerDisplayFormat: PropTypes.func,\r\n\tflipYScale: PropTypes.bool.isRequired,\r\n\tpadding: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.shape({\r\n\t\t\ttop: PropTypes.number,\r\n\t\t\tbottom: PropTypes.number,\r\n\t\t})\r\n\t]).isRequired,\r\n};\r\n\r\nChart.defaultProps = {\r\n\tid: 0,\r\n\torigin: [0, 0],\r\n\tpadding: 0,\r\n\tyScale: d3.scale.linear(),\r\n\tyMousePointerRectWidth: 60,\r\n\tyMousePointerRectHeight: 20,\r\n\tflipYScale: false,\r\n};\r\n\r\nChart.contextTypes = {\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n\tchartConfig: PropTypes.array,\r\n\tmargin: PropTypes.object.isRequired,\r\n\tinteractiveState: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\tmouseXY: PropTypes.array,\r\n\tshow: PropTypes.bool,\r\n\t// adding here even when this is not used by Chart, refer to https://github.com/facebook/react/issues/2517\r\n};\r\n\r\nChart.childContextTypes = {\r\n\theight: PropTypes.number,\r\n\twidth: PropTypes.number,\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\tcanvasOriginX: PropTypes.number,\r\n\tcanvasOriginY: PropTypes.number,\r\n\tchartId: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default Chart;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/Chart.jsx\n **/","\"use strict\";\r\n\r\nimport { Component } from \"react\";\r\nimport shallowEqual from \"./shallowEqual\";\r\n\r\nclass PureComponent extends Component {\r\n\tshouldComponentUpdate(nextProps, nextState, nextContext) {\r\n\t\treturn !shallowEqual(this.props, nextProps)\r\n\t\t\t|| !shallowEqual(this.state, nextState)\r\n\t\t\t|| !shallowEqual(this.context, nextContext);\r\n\t}\r\n}\r\n\r\nexport default PureComponent;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils/PureComponent.js\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport {\r\n\tlast,\r\n\tisDefined,\r\n\tisNotDefined,\r\n\tclearCanvas,\r\n\tgetClosestItemIndexes,\r\n\tshallowEqual,\r\n} from \"./utils\";\r\n\r\nimport { getNewChartConfig, getChartConfigWithUpdatedYScales, getCurrentCharts, getCurrentItem } from \"./utils/ChartDataUtil\";\r\n\r\nvar subscriptionCount = 0;\r\n\r\nfunction getDataBetween(fullData, showingInterval, xAccessor, left, right) {\r\n\tvar dataForInterval = Array.isArray(fullData) ? fullData : fullData[showingInterval];\r\n\r\n\tvar newLeftIndex = getClosestItemIndexes(dataForInterval, left, xAccessor).right;\r\n\tvar newRightIndex = getClosestItemIndexes(dataForInterval, right, xAccessor).left;\r\n\r\n\tvar filteredData = dataForInterval.slice(newLeftIndex, newRightIndex + 1);\r\n\r\n\treturn filteredData;\r\n}\r\n\r\nfunction isLastItemVisible(fullData, plotData) {\r\n\tif (Array.isArray(fullData)) {\r\n\t\treturn last(plotData) === last(fullData);\r\n\t}\r\n\tvar visible = false;\r\n\tfor (let key in fullData) {\r\n\t\tvisible = visible || last(fullData[key]) === last(plotData);\r\n\t}\r\n\treturn visible;\r\n}\r\n\r\nfunction setXRange(xScale, dimensions, padding, direction = 1) {\r\n\tif (xScale.rangeRoundPoints) {\r\n\t\tif (isNaN(padding)) throw new Error(\"padding has to be a number for ordinal scale\");\r\n\t\txScale.rangeRoundPoints([0, dimensions.width], padding);\r\n\t} else {\r\n\t\tvar { left, right } = isNaN(padding)\r\n\t\t\t? padding\r\n\t\t\t: { left: padding, right: padding };\r\n\t\tif (direction > 0) {\r\n\t\t\txScale.range([left, dimensions.width - right]);\r\n\t\t} else {\r\n\t\t\txScale.range([dimensions.width - right, left]);\r\n\t\t}\r\n\t}\r\n\treturn xScale;\r\n}\r\n\r\n\r\nclass EventHandler extends Component {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\t\tthis.handleMouseMove = this.handleMouseMove.bind(this);\r\n\t\tthis.handleMouseEnter = this.handleMouseEnter.bind(this);\r\n\t\tthis.handleMouseLeave = this.handleMouseLeave.bind(this);\r\n\t\tthis.handleZoom = this.handleZoom.bind(this);\r\n\t\tthis.handlePinchZoom = this.handlePinchZoom.bind(this);\r\n\t\tthis.handlePanStart = this.handlePanStart.bind(this);\r\n\t\tthis.handlePan = this.handlePan.bind(this);\r\n\t\tthis.handlePanEnd = this.handlePanEnd.bind(this);\r\n\t\tthis.handleFocus = this.handleFocus.bind(this);\r\n\t\tthis.getCanvasContexts = this.getCanvasContexts.bind(this);\r\n\t\tthis.pushCallbackForCanvasDraw = this.pushCallbackForCanvasDraw.bind(this);\r\n\t\tthis.getAllCanvasDrawCallback = this.getAllCanvasDrawCallback.bind(this);\r\n\t\tthis.subscribe = this.subscribe.bind(this);\r\n\t\tthis.unsubscribe = this.unsubscribe.bind(this);\r\n\t\tthis.pinchCoordinates = this.pinchCoordinates.bind(this);\r\n\t\tthis.setInteractiveState = this.setInteractiveState.bind(this);\r\n\r\n\t\tthis.subscriptions = [];\r\n\t\tthis.canvasDrawCallbackList = [];\r\n\t\tthis.panHappened = false;\r\n\t\tthis.state = {\r\n\t\t\tfocus: false,\r\n\t\t\tcurrentItem: {},\r\n\t\t\tshow: false,\r\n\t\t\tmouseXY: [0, 0],\r\n\t\t\tpanInProgress: false,\r\n\t\t\tinteractiveState: [],\r\n\t\t\tcurrentCharts: [],\r\n\t\t\treceivedProps: 0,\r\n\t\t};\r\n\t}\r\n\tcomponentWillMount() {\r\n\r\n\t\tvar { plotData, showingInterval, direction } = this.props;\r\n\t\tvar { xScale, dimensions, children, postCalculator, padding } = this.props;\r\n\r\n\t\t// console.log(Array.isArray(fullData) ? fullData[60] : fullData);\r\n\t\tplotData = postCalculator(plotData);\r\n\t\t// console.log(last(fullData), last(plotData));\r\n\r\n\t\tvar chartConfig = getChartConfigWithUpdatedYScales(getNewChartConfig(dimensions, children), plotData);\r\n\r\n\r\n\r\n\t\tthis.setState({\r\n\t\t\tshowingInterval,\r\n\t\t\txScale: setXRange(xScale, dimensions, padding, direction),\r\n\t\t\tplotData,\r\n\t\t\tchartConfig,\r\n\t\t});\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t\tvar { plotData, fullData, showingInterval, padding, direction } = nextProps;\r\n\t\tvar { xScale, xAccessor, dimensions, children, postCalculator, dataAltered } = nextProps;\r\n\r\n\t\tvar reset = !shallowEqual(this.props.plotData, nextProps.plotData);\r\n\r\n\t\t// console.log(dimensions);\r\n\t\t// if plotData changed - reset the whole chart\r\n\t\t// else update the fullData from props and xScale from state with range updated to state\r\n\r\n\t\t// console.log(\"reset: \", reset, dimensions.width);\r\n\t\t// console.log(last(this.props.fullData), last(nextProps.fullData));\r\n\t\tvar newState;\r\n\t\tif (reset) {\r\n\t\t\tif (process.env.NODE_ENV !== \"production\") {\r\n\t\t\t\tconsole.log(\"DATA VIEW PORT CHANGED - CHART RESET\");\r\n\t\t\t}\r\n\r\n\t\t\tplotData = postCalculator(plotData);\r\n\r\n\t\t\tlet chartConfig = getChartConfigWithUpdatedYScales(getNewChartConfig(dimensions, children), plotData);\r\n\r\n\t\t\tnewState = {\r\n\t\t\t\tshowingInterval,\r\n\t\t\t\txScale: setXRange(xScale, dimensions, padding, direction),\r\n\t\t\t\tplotData,\r\n\t\t\t\tchartConfig,\r\n\t\t\t};\r\n\t\t} else if (dataAltered\r\n\t\t\t\t&& isLastItemVisible(this.props.fullData, this.state.plotData)) {\r\n\r\n\t\t\tif (process.env.NODE_ENV !== \"production\") {\r\n\t\t\t\tconsole.log(\"DATA CHANGED AND LAST ITEM VISIBLE\");\r\n\t\t\t}\r\n\t\t\t// if last item was visible, then shift\r\n\t\t\tvar updatedXScale = setXRange(this.state.xScale.copy(), dimensions, padding, direction);\r\n\r\n\t\t\tvar [start, end] = this.state.xScale.domain();\r\n\t\t\tvar l = last(isDefined(showingInterval) ? fullData[showingInterval] : fullData);\r\n\t\t\tif (end >= xAccessor(l)) {\r\n\t\t\t\t// get plotData between [start, end] and do not change the domain\r\n\t\t\t\tplotData = getDataBetween(fullData, showingInterval, xAccessor, start, end);\r\n\t\t\t} else {\r\n\t\t\t\t// get plotData between [xAccessor(l) - (end - start), xAccessor(l)] and DO change the domain\r\n\t\t\t\tvar dx = updatedXScale(xAccessor(l)) - updatedXScale.range()[1];\r\n\t\t\t\tvar [newStart, newEnd] = updatedXScale.range().map(x => x + dx).map(updatedXScale.invert);\r\n\r\n\t\t\t\tplotData = getDataBetween(fullData, showingInterval, xAccessor, newStart, newEnd);\r\n\r\n\t\t\t\tif (updatedXScale.isPolyLinear && updatedXScale.isPolyLinear() && updatedXScale.data) {\r\n\t\t\t\t\tupdatedXScale.data(plotData);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tupdatedXScale.domain(newStart, newEnd);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// plotData = getDataOfLength(fullData, showingInterval, plotData.length)\r\n\t\t\tlet chartConfig = getChartConfigWithUpdatedYScales(getNewChartConfig(dimensions, children), plotData);\r\n\r\n\t\t\tnewState = {\r\n\t\t\t\txScale: updatedXScale,\r\n\t\t\t\tchartConfig,\r\n\t\t\t\tplotData,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tconsole.log(\"TRIVIAL CHANGE\");\r\n\t\t\t// this.state.plotData or plotData\r\n\t\t\tlet chartConfig = getChartConfigWithUpdatedYScales(\r\n\t\t\t\tgetNewChartConfig(dimensions, children), this.state.plotData);\r\n\r\n\t\t\tnewState = {\r\n\t\t\t\txScale: setXRange(this.state.xScale.copy(), dimensions, padding, direction),\r\n\t\t\t\tchartConfig,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (isDefined(newState)) {\r\n\t\t\tif (!this.state.panInProgress) {\r\n\t\t\t\tthis.clearBothCanvas(nextProps);\r\n\t\t\t\tthis.clearInteractiveCanvas(nextProps);\r\n\t\t\t\tthis.clearCanvasDrawCallbackList();\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\t...newState,\r\n\t\t\t\treceivedProps: this.state.receivedProps + 1,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\treturn !(this.state.receivedProps < nextState.receivedProps\r\n\t\t\t\t\t&& this.props.type === \"hybrid\"\r\n\t\t\t\t\t&& this.state.panInProgress)\r\n\t\t\t\t&& !(this.state.panInProgress\r\n\t\t\t\t\t&& this.props.type === \"hybrid\"\r\n\t\t\t\t\t&& this.state.show !== nextState.show\r\n\t\t\t\t\t&& this.state.receivedPropsOnPanStart < nextState.receivedProps\r\n\t\t\t\t\t&& this.state.receivedProps === nextState.receivedProps);\r\n\t}\r\n\tclearBothCanvas(props) {\r\n\t\tprops = props || this.props;\r\n\t\tvar canvases = props.canvasContexts();\r\n\t\tif (canvases && canvases.axes) {\r\n\t\t\t// console.log(\"CLEAR\");\r\n\t\t\tclearCanvas([canvases.axes, canvases.mouseCoord]);\r\n\t\t}\r\n\t}\r\n\tclearInteractiveCanvas(props) {\r\n\t\tprops = props || this.props;\r\n\t\tvar canvases = props.canvasContexts();\r\n\t\tif (canvases && canvases.interactive) {\r\n\t\t\t// console.error(\"CLEAR\");\r\n\t\t\tclearCanvas([canvases.interactive]);\r\n\t\t}\r\n\t}\r\n\r\n\tgetChildContext() {\r\n\t\tvar { showingInterval } = this.state;\r\n\t\tvar { fullData } = this.props;\r\n\t\treturn {\r\n\t\t\tplotData: this.state.plotData,\r\n\t\t\tdata: isDefined(showingInterval) ? fullData[showingInterval] : fullData,\r\n\t\t\tchartConfig: this.state.chartConfig,\r\n\t\t\tcurrentCharts: this.state.currentCharts,\r\n\t\t\tcurrentItem: this.state.currentItem,\r\n\t\t\tshow: this.state.show,\r\n\t\t\tmouseXY: this.state.mouseXY,\r\n\t\t\tinterval: this.state.showingInterval,\r\n\t\t\twidth: this.props.dimensions.width,\r\n\t\t\theight: this.props.dimensions.height,\r\n\t\t\tchartCanvasType: this.props.type,\r\n\t\t\txScale: this.state.xScale,\r\n\t\t\txAccessor: this.props.xAccessor,\r\n\r\n\t\t\tmargin: this.props.margin,\r\n\t\t\tinteractiveState: this.state.interactiveState,\r\n\r\n\t\t\tcallbackForCanvasDraw: this.pushCallbackForCanvasDraw,\r\n\t\t\tgetAllCanvasDrawCallback: this.getAllCanvasDrawCallback,\r\n\t\t\tsubscribe: this.subscribe,\r\n\t\t\tunsubscribe: this.unsubscribe,\r\n\t\t\tsetInteractiveState: this.setInteractiveState,\r\n\t\t\tgetCanvasContexts: this.getCanvasContexts,\r\n\t\t\tonMouseMove: this.handleMouseMove,\r\n\t\t\tonMouseEnter: this.handleMouseEnter,\r\n\t\t\tonMouseLeave: this.handleMouseLeave,\r\n\t\t\tonZoom: this.handleZoom,\r\n\t\t\tonPinchZoom: this.handlePinchZoom,\r\n\t\t\tonPanStart: this.handlePanStart,\r\n\t\t\tonPan: this.handlePan,\r\n\t\t\tonPanEnd: this.handlePanEnd,\r\n\t\t\tonFocus: this.handleFocus,\r\n\t\t\tdeltaXY: this.state.deltaXY,\r\n\t\t\tpanInProgress: this.state.panInProgress,\r\n\t\t\tfocus: this.state.focus\r\n\t\t};\r\n\t}\r\n\tpushCallbackForCanvasDraw(findThis, replaceWith) {\r\n\t\tvar { canvasDrawCallbackList } = this;\r\n\t\t// console.log(findThis, canvasDrawCallbackList.length);\r\n\t\tif (replaceWith) {\r\n\t\t\tcanvasDrawCallbackList.forEach((each, idx) => {\r\n\t\t\t\tif (each === findThis) {\r\n\t\t\t\t\tcanvasDrawCallbackList[idx] = replaceWith;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// console.log(findThis);\r\n\t\t\tcanvasDrawCallbackList.push(findThis);\r\n\t\t}\r\n\t}\r\n\tgetAllCanvasDrawCallback() {\r\n\t\treturn this.canvasDrawCallbackList;\r\n\t}\r\n\tsubscribe(forChart, eventType, callback) {\r\n\t\tsubscriptionCount++;\r\n\r\n\t\tthis.subscriptions.push({\r\n\t\t\tforChart,\r\n\t\t\tsubscriptionId: subscriptionCount,\r\n\t\t\teventType,\r\n\t\t\tcallback,\r\n\t\t});\r\n\t\treturn subscriptionCount;\r\n\t}\r\n\tunsubscribe(subscriptionId) {\r\n\t\t// console.log(subscriptionId);\r\n\t\tthis.subscriptions = this.subscriptions.filter(each => each.subscriptionId === subscriptionId);\r\n\t}\r\n\tgetCanvasContexts() {\r\n\t\t// console.log(this.state.canvases, this.props.canvasContexts())\r\n\t\treturn this.state.canvases || this.props.canvasContexts();\r\n\t}\r\n\thandleMouseEnter() {\r\n\t\t// if type === svg remove state.canvases\r\n\t\t// if type !== svg get canvases and set in state if state.canvases is not present already\r\n\t\t/* var { type, canvasContexts } = this.props;\r\n\t\tvar { canvases } = this.state;\r\n\t\tif (type === \"svg\") {\r\n\t\t\tcanvases = null;\r\n\t\t} else {\r\n\t\t\tcanvases = canvasContexts();\r\n\t\t}*/\r\n\t\tthis.setState({\r\n\t\t\tshow: true,\r\n\t\t});\r\n\t}\r\n\thandleMouseMove(mouseXY, inputType, e) {\r\n\t\tvar { chartConfig, plotData, xScale } = this.state;\r\n\t\tvar { xAccessor } = this.props;\r\n\r\n\t\tvar currentCharts = getCurrentCharts(chartConfig, mouseXY);\r\n\r\n\t\tvar currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\r\n\t\t// optimization oportunity do not change currentItem if it is not the same as prev\r\n\r\n\t\tvar { interactiveState/* , callbackList*/ } = inputType === \"mouse\"\r\n\t\t\t? this.triggerCallback(\r\n\t\t\t\t\"mousemove\",\r\n\t\t\t\t{ ...this.state, currentItem, currentCharts },\r\n\t\t\t\tthis.state.interactiveState,\r\n\t\t\t\te)\r\n\t\t\t: this.triggerCallback(\r\n\t\t\t\t\"touch\",\r\n\t\t\t\t{ ...this.state, currentItem, currentCharts },\r\n\t\t\t\tthis.state.interactiveState,\r\n\t\t\t\te);\r\n\r\n\t\tvar contexts = this.getCanvasContexts();\r\n\t\tif (contexts && contexts.mouseCoord) {\r\n\t\t\tclearCanvas([contexts.mouseCoord]);\r\n\t\t\tthis.clearInteractiveCanvas();\r\n\t\t}\r\n\t\t// console.log(interactiveState === this.state.interactiveState);\r\n\t\t// if (interactiveState !== this.state.interactiveState) this.clearInteractiveCanvas();\r\n\r\n\t\tthis.setState({\r\n\t\t\tmouseXY,\r\n\t\t\tcurrentItem,\r\n\t\t\tcurrentCharts,\r\n\t\t\tinteractiveState,\r\n\t\t});\r\n\t}\r\n\r\n\thandleMouseLeave() {\r\n\t\tvar contexts = this.getCanvasContexts();\r\n\r\n\t\tthis.clearInteractiveCanvas();\r\n\r\n\t\tif (contexts && contexts.mouseCoord) {\r\n\t\t\tclearCanvas([contexts.mouseCoord]);\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tshow: false\r\n\t\t});\r\n\t}\r\n\tpinchCoordinates(pinch) {\r\n\t\tvar { touch1Pos, touch2Pos } = pinch;\r\n\r\n\t\treturn {\r\n\t\t\ttopLeft: [Math.min(touch1Pos[0], touch2Pos[0]), Math.min(touch1Pos[1], touch2Pos[1])],\r\n\t\t\tbottomRight: [Math.max(touch1Pos[0], touch2Pos[0]), Math.max(touch1Pos[1], touch2Pos[1])]\r\n\t\t};\r\n\t}\r\n\thandlePinchZoom(initialPinch, finalPinch) {\r\n\t\tvar { xScale: initialPinchXScale } = initialPinch;\r\n\r\n\t\tvar { plotData, showingInterval, xScale: initialXScale, chartConfig: initialChartConfig } = this.state;\r\n\t\tvar { xAccessor, fullData, interval, dimensions: { width }, xExtentsCalculator, postCalculator } = this.props;\r\n\r\n\t\tvar { topLeft: iTL, bottomRight: iBR } = this.pinchCoordinates(initialPinch);\r\n\t\tvar { topLeft: fTL, bottomRight: fBR } = this.pinchCoordinates(finalPinch);\r\n\r\n\t\tvar e = initialPinchXScale.range()[1];\r\n\r\n\t\t// var fR1 = e - fTL[0];\r\n\t\t// var fR2 = e - fBR[0];\r\n\t\t// var iR1 = e - iTL[0];\r\n\t\t// var iR2 = e - iBR[0];\r\n\r\n\t\tvar xDash = Math.round(-(iBR[0] * fTL[0] - iTL[0] * fBR[0]) / (iTL[0] - iBR[0]));\r\n\t\tvar yDash = Math.round(e + ((e - iBR[0]) * (e - fTL[0]) - (e - iTL[0]) * (e - fBR[0])) / ((e - iTL[0]) - (e - iBR[0])));\r\n\r\n\r\n\t\tvar x = Math.round(-xDash * iTL[0] / (-xDash + fTL[0]));\r\n\t\tvar y = Math.round(e - (yDash - e) * (e - iTL[0]) / (yDash + (e - fTL[0])));\r\n\r\n\t\t// document.getElementById(\"debug_here\").innerHTML = `**${[s, e]} to ${[xDash, yDash]} to ${[x, y]}`;\r\n\t\t// var left = ((final.leftxy[0] - range[0]) / (final.rightxy[0] - final.leftxy[0])) * (initial.right - initial.left);\r\n\t\t// var right = ((range[1] - final.rightxy[0]) / (final.rightxy[0] - final.leftxy[0])) * (initial.right - initial.left);\r\n\r\n\t\tvar newDomain = [x, y].map(initialPinchXScale.invert);\r\n\t\t// var domainR = initial.right + right;\r\n\r\n\t\tvar { plotData, interval: updatedInterval, scale: updatedScale } = xExtentsCalculator\r\n\t\t\t.data(fullData)\r\n\t\t\t.width(width)\r\n\t\t\t.scale(initialXScale)\r\n\t\t\t.currentInterval(showingInterval)\r\n\t\t\t.currentDomain(initialXScale.domain())\r\n\t\t\t.currentPlotData(plotData)\r\n\t\t\t.interval(interval)(newDomain, xAccessor);\r\n\t\tplotData = postCalculator(plotData);\r\n\r\n\t\tvar chartConfig = getChartConfigWithUpdatedYScales(initialChartConfig, plotData);\r\n\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tthis.clearBothCanvas();\r\n\t\t\tthis.clearInteractiveCanvas();\r\n\r\n\t\t\tthis.clearCanvasDrawCallbackList();\r\n\t\t\tthis.setState({\r\n\t\t\t\tchartConfig,\r\n\t\t\t\txScale: updatedScale,\r\n\t\t\t\tplotData,\r\n\t\t\t\tshowingInterval: updatedInterval,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// document.getElementById(\"debug_here\").innerHTML = `${panInProgress}`;\r\n\r\n\t\t// document.getElementById(\"debug_here\").innerHTML = `${initial.left} - ${initial.right} to ${final.left} - ${final.right}`;\r\n\t\t// document.getElementById(\"debug_here\").innerHTML = `${id[1] - id[0]} = ${initial.left - id[0]} + ${initial.right - initial.left} + ${id[1] - initial.right}`;\r\n\t\t// document.getElementById(\"debug_here\").innerHTML = `${range[1] - range[0]}, ${i1[0]}, ${i2[0]}`;\r\n\t}\r\n\thandleZoom(zoomDirection, mouseXY) {\r\n\t\t// console.log(\"zoomDirection \", zoomDirection, \" mouseXY \", mouseXY);\r\n\t\tvar { plotData, showingInterval, xScale: initialXScale, chartConfig: initialChartConfig, currentItem } = this.state;\r\n\t\tvar { xAccessor, fullData, interval, dimensions: { width }, xExtentsCalculator, postCalculator } = this.props;\r\n\r\n\t\tvar item = getCurrentItem(initialXScale, xAccessor, mouseXY, plotData),\r\n\t\t\tcx = initialXScale(xAccessor(item)),\r\n\t\t\tc = zoomDirection > 0 ? 2 : 0.5,\r\n\t\t\tnewDomain = initialXScale.range().map(x => cx + (x - cx) * c).map(initialXScale.invert);\r\n\r\n\t\tvar { plotData, interval: updatedInterval, scale: updatedScale } = xExtentsCalculator\r\n\t\t\t.data(fullData)\r\n\t\t\t.width(width)\r\n\t\t\t.scale(initialXScale)\r\n\t\t\t.currentInterval(showingInterval)\r\n\t\t\t.currentDomain(initialXScale.domain())\r\n\t\t\t.currentPlotData(plotData)\r\n\t\t\t.interval(interval)(newDomain, xAccessor);\r\n\r\n\t\tplotData = postCalculator(plotData);\r\n\t\tvar currentItem = getCurrentItem(updatedScale, xAccessor, mouseXY, plotData);\r\n\t\tvar chartConfig = getChartConfigWithUpdatedYScales(initialChartConfig, plotData);\r\n\t\tvar currentCharts = getCurrentCharts(chartConfig, mouseXY);\r\n\t\tthis.clearBothCanvas();\r\n\t\tthis.clearInteractiveCanvas();\r\n\r\n\t\t// console.log(showingInterval, updatedInterval);\r\n\t\tthis.clearCanvasDrawCallbackList();\r\n\t\tthis.setState({\r\n\t\t\txScale: updatedScale,\r\n\t\t\tshowingInterval: updatedInterval,\r\n\t\t\tplotData,\r\n\t\t\tmouseXY,\r\n\t\t\tcurrentCharts,\r\n\t\t\tchartConfig,\r\n\t\t\tcurrentItem,\r\n\t\t});/**/\r\n\t}\r\n\r\n\thandlePanStart(panStartDomain, panOrigin, dxy) {\r\n\t\t// console.log(\"panStartDomain - \", panStartDomain, \", panOrigin - \", panOrigin);\r\n\t\tthis.setState({\r\n\t\t\tpanInProgress: true,\r\n\t\t\t// panStartDomain: panStartDomain,\r\n\t\t\tpanStartXScale: this.state.xScale,\r\n\t\t\tpanOrigin: panOrigin,\r\n\t\t\tfocus: true,\r\n\t\t\tdeltaXY: dxy, // used in EventCapture\r\n\t\t\treceivedPropsOnPanStart: this.state.receivedProps,\r\n\t\t});\r\n\t\tthis.panHappened = false;\r\n\t}\r\n\tpanHelper(mouseXY) {\r\n\t\tvar { panStartXScale: initialXScale, chartConfig: initialChartConfig } = this.state;\r\n\t\tvar { showingInterval, panOrigin } = this.state;\r\n\t\tvar { xAccessor, dimensions: { width }, fullData, xExtentsCalculator, postCalculator } = this.props;\r\n\r\n\t\tvar dx = mouseXY[0] - panOrigin[0];\r\n\r\n\t\tif (isNotDefined(initialXScale.invert))\r\n\t\t\tthrow new Error(\"xScale provided does not have an invert() method.\"\r\n\t\t\t\t+ \"You are likely using an ordinal scale. This scale does not support zoom, pan\");\r\n\t\tvar newDomain = initialXScale.range().map(x => x - dx).map(initialXScale.invert);\r\n\r\n\t\tvar { plotData, /* interval: updatedInterval,*/scale: updatedScale } = xExtentsCalculator\r\n\t\t\t.data(fullData)\r\n\t\t\t.width(width)\r\n\t\t\t.scale(initialXScale)\r\n\t\t\t.currentInterval(showingInterval)\r\n\t\t\t.currentDomain(this.hackyWayToStopPanBeyondBounds__domain)\r\n\t\t\t.currentPlotData(this.hackyWayToStopPanBeyondBounds__plotData)\r\n\t\t\t.interval(showingInterval)(newDomain, xAccessor);\r\n\r\n\t\tplotData = postCalculator(plotData);\r\n\t\t// console.log(last(plotData));\r\n\t\tvar currentItem = getCurrentItem(updatedScale, xAccessor, mouseXY, plotData);\r\n\t\tvar chartConfig = getChartConfigWithUpdatedYScales(initialChartConfig, plotData);\r\n\t\tvar currentCharts = getCurrentCharts(chartConfig, mouseXY);\r\n\r\n\t\treturn {\r\n\t\t\txScale: updatedScale,\r\n\t\t\tplotData,\r\n\t\t\tmouseXY,\r\n\t\t\tcurrentCharts,\r\n\t\t\tchartConfig,\r\n\t\t\tcurrentItem,\r\n\t\t};\r\n\t}\r\n\thandlePan(mousePosition/* , startDomain*/) {\r\n\t\tthis.panHappened = true;\r\n\t\tvar state = this.panHelper(mousePosition);\r\n\r\n\t\tthis.hackyWayToStopPanBeyondBounds__plotData = state.plotData;\r\n\t\tthis.hackyWayToStopPanBeyondBounds__domain = state.xScale.domain();\r\n\r\n\t\tif (this.props.type !== \"svg\") {\r\n\t\t\tvar { axes: axesCanvasContext, mouseCoord: mouseContext } = this.getCanvasContexts();\r\n\t\t\tvar { mouseXY, chartConfig, plotData, currentItem, xScale, currentCharts } = state;\r\n\t\t\tvar { show } = this.state;\r\n\t\t\tvar { canvasDrawCallbackList } = this;\r\n\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\t// this.clearCanvas([axesCanvasContext, mouseContext]);\r\n\t\t\t\t// this.clearCanvas([axesCanvasContext, mouseContext]);\r\n\t\t\t\tthis.clearBothCanvas();\r\n\t\t\t\tthis.clearInteractiveCanvas();\r\n\r\n\t\t\t\t// console.log(canvasDrawCallbackList.length)\r\n\r\n\t\t\t\tchartConfig.forEach(eachChart => {\r\n\t\t\t\t\tcanvasDrawCallbackList\r\n\t\t\t\t\t\t.filter(each => eachChart.id === each.chartId)\r\n\t\t\t\t\t\t.forEach(each => {\r\n\t\t\t\t\t\t\tvar { yScale } = eachChart;\r\n\r\n\t\t\t\t\t\t\tif (each.type === \"axis\") {\r\n\t\t\t\t\t\t\t\teach.draw(axesCanvasContext, xScale, yScale);\r\n\t\t\t\t\t\t\t} else if (each.type === \"currentcoordinate\") {\r\n\t\t\t\t\t\t\t\teach.draw(mouseContext, show, xScale, yScale, currentItem);\r\n\t\t\t\t\t\t\t} else if (each.type !== \"interactive\") {\r\n\t\t\t\t\t\t\t\teach.draw(axesCanvasContext, xScale, yScale, plotData);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\t\t\t\tthis.drawInteractive(state);\r\n\t\t\t\tcanvasDrawCallbackList\r\n\t\t\t\t\t.filter(each => isNotDefined(each.chartId))\r\n\t\t\t\t\t.filter(each => each.type === \"axis\")\r\n\t\t\t\t\t.forEach(each => each.draw(axesCanvasContext, chartConfig));\r\n\r\n\t\t\t\tcanvasDrawCallbackList\r\n\t\t\t\t\t.filter(each => each.type === \"mouse\")\r\n\t\t\t\t\t.forEach(each => each.draw(mouseContext, show,\r\n\t\t\t\t\t\txScale, mouseXY, currentCharts, chartConfig, currentItem));\r\n\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState(state);\r\n\t\t}\r\n\t}\r\n\tdrawInteractive({ plotData, chartConfig, xScale }) {\r\n\t\tvar { interactive } = this.getCanvasContexts();\r\n\r\n\t\tthis.canvasDrawCallbackList\r\n\t\t\t.filter(each => each.type === \"interactive\")\r\n\t\t\t.forEach(each => {\r\n\t\t\t\tchartConfig\r\n\t\t\t\t\t.filter(eachChart => eachChart.id === each.chartId)\r\n\t\t\t\t\t.forEach(eachChart => {\r\n\t\t\t\t\t\teach.draw(interactive, { xScale, plotData,  chartConfig: eachChart });\r\n\t\t\t\t\t\t// console.log(\"DRAW\");\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\tclearCanvasDrawCallbackList() {\r\n\t\tthis.canvasDrawCallbackList = [];\r\n\t}\r\n\thandlePanEnd(mousePosition, e) {\r\n\t\tvar state = this.panHelper(mousePosition);\r\n\t\t// console.log(this.canvasDrawCallbackList.map(d => d.type));\r\n\t\tthis.hackyWayToStopPanBeyondBounds__plotData = null;\r\n\t\tthis.hackyWayToStopPanBeyondBounds__domain = null;\r\n\r\n\t\tthis.clearCanvasDrawCallbackList();\r\n\r\n\t\tvar { interactiveState, callbackList } = this.panHappened\r\n\t\t\t? this.triggerCallback(\"panend\", state, this.state.interactiveState, e)\r\n\t\t\t: this.triggerCallback(\"click\", state, this.state.interactiveState, e);\r\n\r\n\t\tthis.clearBothCanvas();\r\n\t\tif (interactiveState !== this.state.interactive) this.clearInteractiveCanvas();\r\n\r\n\t\t// console.log(interactiveState[0].interactive);\r\n\t\tthis.setState({\r\n\t\t\t...state,\r\n\t\t\tshow: this.state.show,\r\n\t\t\tpanInProgress: false,\r\n\t\t\tpanStartXScale: null,\r\n\t\t\tinteractiveState,\r\n\t\t}, () => {\r\n\t\t\tif (isDefined(callbackList)) callbackList.forEach(callback => callback());\r\n\t\t});\r\n\t}\r\n\tsetInteractiveState(interactiveState) {\r\n\t\tthis.clearInteractiveCanvas();\r\n\r\n\t\tthis.setState({\r\n\t\t\tinteractiveState,\r\n\t\t});\r\n\t}\r\n\ttriggerCallback(eventType, state, interactiveState, event) {\r\n\t\tvar { currentCharts, chartConfig } = state;\r\n\t\tvar subscribers = this.subscriptions.filter(each => each.eventType === eventType);\r\n\t\tvar delta = subscribers.map(each => {\r\n\t\t\tvar singleChartConfig = chartConfig.filter(eachItem => eachItem.id === each.forChart)[0];\r\n\t\t\treturn {\r\n\t\t\t\tcallback: each.callback,\r\n\t\t\t\tforChart: each.forChart,\r\n\t\t\t\tchartConfig: singleChartConfig\r\n\t\t\t};\r\n\t\t})\r\n\t\t.filter(each => currentCharts.indexOf(each.forChart) >= -1)\r\n\t\t.map(({ callback, chartConfig }) => callback({ ...state, chartConfig }, event))\r\n\t\t.filter(each => each !== false);\r\n\r\n\t\t// console.log(delta);\r\n\t\tif (delta.length === 0) return { interactiveState };\r\n\r\n\t\tvar i = 0, j = 0, added = false;\r\n\t\tvar newInteractiveState = interactiveState.slice(0);\r\n\t\tvar callbackList = [];\r\n\t\tfor (i = 0; i < delta.length; i++) {\r\n\t\t\tvar each = delta[i];\r\n\t\t\tfor (j = 0; j < newInteractiveState.length; j++) {\r\n\t\t\t\tif (each.id === newInteractiveState[j].id) {\r\n\t\t\t\t\tnewInteractiveState[j] = { id: each.id, interactive: each.interactive };\r\n\t\t\t\t\tif (each.callback) callbackList.push(each.callback);\r\n\t\t\t\t\tadded = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!added) newInteractiveState.push(each);\r\n\t\t\tadded = false;\r\n\t\t}\r\n\t\treturn { interactiveState: newInteractiveState, callbackList };\r\n\t}\r\n\thandleFocus(focus) {\r\n\t\t// console.log(focus);interactive\r\n\t\tthis.setState({\r\n\t\t\tfocus: focus,\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<g>{this.props.children}</g>\r\n\t\t);\r\n\t}\r\n}\r\nEventHandler.propTypes = {\r\n\tchildren: PropTypes.node.isRequired,\r\n\ttype: PropTypes.oneOf([\"svg\", \"hybrid\"]).isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func.isRequired,\r\n\tfullData: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.object,\r\n\t]).isRequired,\r\n\tinterval: PropTypes.string,\r\n\tdimensions: PropTypes.object,\r\n\txExtentsCalculator: PropTypes.func.isRequired,\r\n\tpostCalculator: PropTypes.func.isRequired,\r\n\tcanvasContexts: PropTypes.func.isRequired,\r\n\tmargin: PropTypes.object.isRequired,\r\n\tplotData: PropTypes.array,\r\n\tpadding: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.shape({\r\n\t\t\tleft: PropTypes.number,\r\n\t\t\tright: PropTypes.number,\r\n\t\t})\r\n\t]).isRequired,\r\n\tdirection: PropTypes.oneOf([-1, 1]).isRequired,\r\n\tshowingInterval: PropTypes.string,\r\n};\r\n\r\nEventHandler.childContextTypes = {\r\n\tplotData: PropTypes.array,\r\n\tdata: PropTypes.array,\r\n\tchartConfig: PropTypes.arrayOf(\r\n\t\tPropTypes.shape({\r\n\t\t\tid: PropTypes.number.isRequired,\r\n\t\t\torigin: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n\t\t\tpadding: PropTypes.oneOfType([\r\n\t\t\t\tPropTypes.number,\r\n\t\t\t\tPropTypes.shape({\r\n\t\t\t\t\ttop: PropTypes.number,\r\n\t\t\t\t\tbottom: PropTypes.number,\r\n\t\t\t\t})\r\n\t\t\t]),\r\n\t\t\tyExtents: PropTypes.arrayOf(PropTypes.func).isRequired,\r\n\t\t\tyScale: PropTypes.func.isRequired,\r\n\t\t\tmouseCoordinates: PropTypes.shape({\r\n\t\t\t\tat: PropTypes.string,\r\n\t\t\t\tformat: PropTypes.func\r\n\t\t\t}),\r\n\t\t\twidth: PropTypes.number.isRequired,\r\n\t\t\theight: PropTypes.number.isRequired,\r\n\t\t})\r\n\t).isRequired,\r\n\txScale: PropTypes.func.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\tcurrentItem: PropTypes.object,\r\n\tshow: PropTypes.bool,\r\n\tmouseXY: PropTypes.array,\r\n\tinterval: PropTypes.string,\r\n\tcurrentCharts: PropTypes.array,\r\n\tmainChart: PropTypes.number,\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n\tchartCanvasType: PropTypes.oneOf([\"svg\", \"hybrid\"]).isRequired,\r\n\tdateAccessor: PropTypes.func,\r\n\r\n\tmargin: PropTypes.object.isRequired,\r\n\tdataTransform: PropTypes.array,\r\n\tinteractiveState: PropTypes.array.isRequired,\r\n\r\n\tsubscribe: PropTypes.func,\r\n\tunsubscribe: PropTypes.func,\r\n\tsetInteractiveState: PropTypes.func,\r\n\tcallbackForCanvasDraw: PropTypes.func,\r\n\tgetAllCanvasDrawCallback: PropTypes.func,\r\n\tgetCanvasContexts: PropTypes.func,\r\n\tonMouseMove: PropTypes.func,\r\n\tonMouseEnter: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n\tonZoom: PropTypes.func,\r\n\tonPinchZoom: PropTypes.func,\r\n\tonPanStart: PropTypes.func,\r\n\tonPan: PropTypes.func,\r\n\tonPanEnd: PropTypes.func,\r\n\tpanInProgress: PropTypes.bool.isRequired,\r\n\tfocus: PropTypes.bool.isRequired,\r\n\tonFocus: PropTypes.func,\r\n\tdeltaXY: PropTypes.arrayOf(Number),\r\n};\r\n\r\nexport default EventHandler;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/EventHandler.js\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nclass CanvasContainer extends Component {\r\n\tgetCanvasContexts() {\r\n\r\n\t\tvar {\r\n\t\t\tcanvas_axes: axesCanvasDOM,\r\n\t\t\tcanvas_mouse_coordinates: mouseCoordDOM,\r\n\t\t\tcanvas_interactive: interactiveDOM,\r\n\t\t\tbg: bgDOM\r\n\t\t} = this.refs;\r\n\r\n\t\tif (this.refs.canvas_axes) {\r\n\t\t\treturn {\r\n\t\t\t\taxes: axesCanvasDOM.getContext(\"2d\"),\r\n\t\t\t\tmouseCoord: mouseCoordDOM.getContext(\"2d\"),\r\n\t\t\t\tinteractive: interactiveDOM.getContext(\"2d\"),\r\n\t\t\t\tbg: bgDOM.getContext(\"2d\"),\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tvar { height, width, type, zIndex } = this.props;\r\n\t\tif (type === \"svg\") return null;\r\n\t\treturn (\r\n\t\t\t<div style={{ zIndex: zIndex }}>\r\n\t\t\t\t<canvas ref=\"bg\" width={width} height={height}\r\n\t\t\t\t\tstyle={{ position: \"absolute\", left: 0, top: 0 }} />\r\n\t\t\t\t<canvas ref=\"canvas_axes\" width={width} height={height}\r\n\t\t\t\t\tstyle={{ position: \"absolute\", left: 0, top: 0 }} />\r\n\t\t\t\t<canvas ref=\"canvas_mouse_coordinates\" width={width} height={height}\r\n\t\t\t\t\tstyle={{ position: \"absolute\", left: 0, top: 0 }} />\r\n\t\t\t\t<canvas ref=\"canvas_interactive\" width={width} height={height}\r\n\t\t\t\t\tstyle={{ position: \"absolute\", left: 0, top: 0 }} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nCanvasContainer.propTypes = {\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n\ttype: PropTypes.string.isRequired,\r\n\tzIndex: PropTypes.number,\r\n};\r\n\r\nexport default CanvasContainer;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/CanvasContainer.jsx\n **/","\"use strict\";\r\n\r\nimport financeEODCalculator from \"./financeEODCalculator\";\r\nimport { first, last, isArray, isNotDefined, accumulatingWindow } from \"../utils\";\r\n\r\nfunction accumulator(predicate) {\r\n\treturn accumulatingWindow()\r\n\t\t.accumulateTill(predicate)\r\n\t\t.accumulator(values => {\r\n\t\t\tvar open = first(values).open;\r\n\t\t\tvar close = last(values).close;\r\n\r\n\t\t\tvar rest = values.reduce((a, b) => {\r\n\t\t\t\tvar high = Math.max(a.high, b.high);\r\n\t\t\t\tvar low = Math.min(a.low, b.low);\r\n\r\n\t\t\t\tvar startOfWeek = a.startOfWeek || b.startOfWeek;\r\n\t\t\t\tvar startOfMonth = a.startOfMonth || b.startOfMonth;\r\n\t\t\t\tvar startOfQuarter = a.startOfQuarter || b.startOfQuarter;\r\n\t\t\t\tvar startOfYear = a.startOfYear || b.startOfYear;\r\n\r\n\t\t\t\tvar volume = a.volume + b.volume;\r\n\t\t\t\tvar row = { high, low, volume, startOfWeek, startOfMonth, startOfQuarter, startOfYear };\r\n\t\t\t\treturn row;\r\n\t\t\t});\r\n\r\n\t\t\treturn { ...last(values), open, close, ...rest };\r\n\t\t});\r\n}\r\n\r\nfunction weeklyData(data) {\r\n\treturn accumulator(d => d.startOfWeek)(data);\r\n}\r\n\r\nfunction monthlyData(data) {\r\n\treturn accumulator(d => d.startOfMonth)(data);\r\n}\r\n\r\nexport default function() {\r\n\r\n\tvar allowedIntervals = [\"D\", \"W\", \"M\"],\r\n\t\tdoIt = false;\r\n\r\n\tfunction calculator(data) {\r\n\t\tvar eodMarker = financeEODCalculator().dateAccessor(d => d.date);\r\n\r\n\t\tif (isNotDefined(allowedIntervals)) return doIt ? eodMarker(data) : data;\r\n\r\n\t\tvar D = eodMarker(data);\r\n\r\n\t\t// console.log(data.length, D.length, W.length, M.length);\r\n\t\tif (isArray(allowedIntervals)) {\r\n\t\t\tvar response = {};\r\n\t\t\tif (allowedIntervals.indexOf(\"D\") > -1) response.D = D;\r\n\t\t\tif (allowedIntervals.indexOf(\"W\") > -1) {\r\n\t\t\t\tvar W = weeklyData(D);\r\n\t\t\t\tresponse.W = W;\r\n\t\t\t}\r\n\t\t\tif (allowedIntervals.indexOf(\"M\") > -1) {\r\n\t\t\t\tvar M = monthlyData(D);\r\n\t\t\t\tresponse.M = M;\r\n\t\t\t}\r\n\t\t\treturn response;\r\n\t\t}\r\n\t\treturn D;\r\n\t}\r\n\tcalculator.allowedIntervals = function(x) {\r\n\t\tif (!arguments.length) return allowedIntervals;\r\n\t\tallowedIntervals = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.doIt = function(x) {\r\n\t\tif (!arguments.length) return doIt;\r\n\t\tdoIt = x;\r\n\t\treturn calculator;\r\n\t};\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/scale/eodIntervalCalculator.js\n **/","\"use strict\";\r\n\r\nimport { slidingWindow } from \"../utils\";\r\n\r\nexport default function() {\r\n\tvar dateAccessor = d => d.date;\r\n\r\n\tfunction calculator(data) {\r\n\t\tvar eodScaleCalculator = slidingWindow()\r\n\t\t.windowSize(2)\r\n\t\t.undefinedValue(d => {\r\n\t\t\tvar row = { ...d, startOfWeek: false, startOfMonth: false, startOfQuarter: false, startOfYear: false };\r\n\t\t\treturn row;\r\n\t\t})\r\n\t\t.accumulator(([prev, now]) => {\r\n\t\t\tvar prevDate = dateAccessor(prev);\r\n\t\t\tvar nowDate = dateAccessor(now);\r\n\r\n\t\t\t// According to ISO calendar\r\n\t\t\t// Sunday = 0, Monday = 1, ... Saturday = 6\r\n\t\t\t// day of week of today < day of week of yesterday then today is start of week\r\n\t\t\tvar startOfWeek = nowDate.getDay() < prevDate.getDay();\r\n\t\t\t// month of today != month of yesterday then today is start of month\r\n\t\t\tvar startOfMonth = nowDate.getMonth() !== prevDate.getMonth();\r\n\t\t\t// if start of month and month % 3 === 0 then it is start of quarter\r\n\t\t\tvar startOfQuarter = startOfMonth && nowDate.getMonth() % 3 === 0;\r\n\t\t\t// year of today != year of yesterday then today is start of year\r\n\t\t\tvar startOfYear = nowDate.getYear() !== prevDate.getYear();\r\n\r\n\t\t\tvar row = { ...now, startOfWeek, startOfMonth, startOfQuarter, startOfYear };\r\n\t\t\treturn row;\r\n\t\t});\r\n\t\tvar newData = eodScaleCalculator(data);\r\n\t\treturn newData;\r\n\t}\r\n\tcalculator.dateAccessor = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn dateAccessor;\r\n\t\t}\r\n\t\tdateAccessor = x;\r\n\t\treturn calculator;\r\n\t};\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/scale/financeEODCalculator.js\n **/","\"use strict\";\r\n\r\nimport {\r\n\tfirst,\r\n\tlast,\r\n\tgetClosestItemIndexes,\r\n\tisDefined,\r\n\tisNotDefined,\r\n\tisArray,\r\n} from \"../utils\";\r\n\r\nimport eodIntervalCalculator from \"./eodIntervalCalculator\";\r\n\r\nfunction getFilteredResponse(dataForInterval, left, right, xAccessor) {\r\n\tvar newLeftIndex = getClosestItemIndexes(dataForInterval, left, xAccessor).right;\r\n\tvar newRightIndex = getClosestItemIndexes(dataForInterval, right, xAccessor).left;\r\n\r\n\tvar filteredData = dataForInterval.slice(newLeftIndex, newRightIndex + 1);\r\n\t// console.log(right, newRightIndex, dataForInterval.length);\r\n\r\n\treturn filteredData;\r\n}\r\n\r\n/*\r\nfunction getFilteredResponseWhole(dataForInterval, left, right, xAccessor) {\r\n\treturn dataForInterval;\r\n}\r\n*/\r\n\r\nfunction getDomain(inputDomain, width, filteredData, predicate, currentDomain, canShowTheseMany, realXAccessor) {\r\n\tif (canShowTheseMany(width, filteredData.length)) {\r\n\t\tvar domain = predicate\r\n\t\t\t? inputDomain\r\n\t\t\t: [realXAccessor(first(filteredData)), realXAccessor(last(filteredData))]; // TODO fix me later\r\n\t\treturn domain;\r\n\t}\r\n\tif (process.env.NODE_ENV !== \"production\") {\r\n\t\tconsole.error(`Trying to show ${filteredData.length} items in a width of ${width}px. This is either too much or too few points`);\r\n\t}\r\n\treturn currentDomain;\r\n}\r\n\r\nfunction extentsWrapper(inputXAccessor, realXAccessor, allowedIntervals, canShowTheseMany, useWholeData = false) {\r\n\tvar data, inputXAccessor, interval, width, currentInterval, currentDomain, currentPlotData, scale;\r\n\r\n\tfunction domain(inputDomain, xAccessor) {\r\n\t\tvar left = first(inputDomain);\r\n\t\tvar right = last(inputDomain);\r\n\t\tvar plotData = currentPlotData, intervalToShow = currentInterval, domain;\r\n\r\n\t\tif (useWholeData) {\r\n\t\t\treturn { plotData: data, scale: scale.copy().domain(inputDomain) };\r\n\t\t}\r\n\r\n\t\tif (isNotDefined(interval) && isArray(allowedIntervals)) {\r\n\t\t\tlet dataForCurrentInterval = data[currentInterval || allowedIntervals[0]];\r\n\r\n\t\t\tvar leftIndex = getClosestItemIndexes(dataForCurrentInterval, left, xAccessor).right;\r\n\t\t\tvar rightIndex = getClosestItemIndexes(dataForCurrentInterval, right, xAccessor).left;\r\n\r\n\t\t\tvar newLeft = inputXAccessor(dataForCurrentInterval[leftIndex]);\r\n\t\t\tvar newRight = inputXAccessor(dataForCurrentInterval[rightIndex]);\r\n\r\n\t\t\tfor (let i = 0; i < allowedIntervals.length; i++) {\r\n\t\t\t\tlet eachInterval = allowedIntervals[i];\r\n\r\n\t\t\t\tvar tempLeft = currentInterval === eachInterval ? left : newLeft;\r\n\t\t\t\tvar tempRight = currentInterval === eachInterval ? right : newRight;\r\n\t\t\t\tvar tempAccessor = currentInterval === eachInterval ? xAccessor : inputXAccessor;\r\n\r\n\t\t\t\tlet filteredData =  getFilteredResponse(data[eachInterval], tempLeft, tempRight, tempAccessor);\r\n\r\n\t\t\t\tdomain = getDomain([tempLeft, tempRight], width, filteredData,\r\n\t\t\t\t\tcurrentInterval === eachInterval, currentDomain,\r\n\t\t\t\t\tcanShowTheseMany, realXAccessor);\r\n\r\n\t\t\t\tif (domain !== currentDomain) {\r\n\t\t\t\t\tplotData = filteredData;\r\n\t\t\t\t\tintervalToShow = eachInterval;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (isNotDefined(plotData) && showMax(width) < dataForCurrentInterval.length) {\r\n\t\t\t\tplotData = dataForCurrentInterval.slice(dataForCurrentInterval.length - showMax(width));\r\n\t\t\t\tdomain = [realXAccessor(first(plotData)), realXAccessor(last(plotData))];\r\n\t\t\t}\r\n\t\t} else if (isDefined(interval) && allowedIntervals.indexOf(interval) > -1) {\r\n\t\t\t// if interval is defined and allowedInterval is not defined, it is an error\r\n\t\t\tlet filteredData = getFilteredResponse(data[interval], left, right, xAccessor);\r\n\r\n\t\t\tdomain = getDomain(inputDomain, width, filteredData,\r\n\t\t\t\trealXAccessor === xAccessor, currentDomain,\r\n\t\t\t\tcanShowTheseMany, realXAccessor);\r\n\r\n\t\t\tif (domain !== currentDomain) {\r\n\t\t\t\tplotData = filteredData;\r\n\t\t\t\tintervalToShow = interval;\r\n\t\t\t}\r\n\t\t\tif (isNotDefined(plotData) && showMax(width) < data[interval].length) {\r\n\t\t\t\tplotData = data[interval].slice(data[interval].length - showMax(width));\r\n\t\t\t\tdomain = [realXAccessor(first(plotData)), realXAccessor(last(plotData))];\r\n\t\t\t}\r\n\t\t} else if (isNotDefined(interval) && isNotDefined(allowedIntervals)) {\r\n\t\t\t// interval is not defined and allowedInterval is not defined also.\r\n\t\t\tlet filteredData = getFilteredResponse(data, left, right, xAccessor);\r\n\t\t\tdomain = getDomain(inputDomain, width, filteredData,\r\n\t\t\t\trealXAccessor === xAccessor, currentDomain,\r\n\t\t\t\tcanShowTheseMany, realXAccessor);\r\n\r\n\t\t\t// console.log(filteredData, inputDomain);\r\n\t\t\t// console.log(\"HERE\", left, right, last(data), last(filteredData));\r\n\t\t\tif (domain !== currentDomain) {\r\n\t\t\t\tplotData = filteredData;\r\n\t\t\t\tintervalToShow = null;\r\n\t\t\t}\r\n\t\t\tif (isNotDefined(plotData) && showMax(width) < data.length) {\r\n\t\t\t\tplotData = data.slice(data.length - showMax(width));\r\n\t\t\t\tdomain = [realXAccessor(first(plotData)), realXAccessor(last(plotData))];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isNotDefined(plotData)) {\r\n\t\t\t// console.log(currentInterval, currentDomain, currentPlotData)\r\n\t\t\tthrow new Error(\"Initial render and cannot display any data\");\r\n\t\t}\r\n\t\tvar updatedScale = (scale.isPolyLinear && scale.isPolyLinear() && scale.data)\r\n\t\t\t? scale.copy().data(plotData)\r\n\t\t\t: scale.copy();\r\n\r\n\t\tupdatedScale.domain(domain);\r\n\t\treturn { plotData, interval: intervalToShow, scale: updatedScale };\r\n\t}\r\n\tdomain.data = function(x) {\r\n\t\tif (!arguments.length) return data;\r\n\t\tdata = x;\r\n\t\treturn domain;\r\n\t};\r\n\tdomain.interval = function(x) {\r\n\t\tif (!arguments.length) return interval;\r\n\t\tinterval = x;\r\n\t\treturn domain;\r\n\t};\r\n\tdomain.width = function(x) {\r\n\t\tif (!arguments.length) return width;\r\n\t\twidth = x;\r\n\t\treturn domain;\r\n\t};\r\n\tdomain.currentInterval = function(x) {\r\n\t\tif (!arguments.length) return currentInterval;\r\n\t\tcurrentInterval = x;\r\n\t\treturn domain;\r\n\t};\r\n\tdomain.currentDomain = function(x) {\r\n\t\tif (!arguments.length) return currentDomain;\r\n\t\tcurrentDomain = x;\r\n\t\treturn domain;\r\n\t};\r\n\tdomain.currentPlotData = function(x) {\r\n\t\tif (!arguments.length) return currentPlotData;\r\n\t\tcurrentPlotData = x;\r\n\t\treturn domain;\r\n\t};\r\n\tdomain.scale = function(x) {\r\n\t\tif (!arguments.length) return scale;\r\n\t\tscale = x;\r\n\t\treturn domain;\r\n\t};\r\n\treturn domain;\r\n}\r\n\r\nfunction canShowTheseManyPeriods(width, arrayLength) {\r\n\tvar threshold = 0.75; // number of datapoints per 1 px\r\n\treturn arrayLength < width * threshold && arrayLength > 1;\r\n}\r\n\r\nfunction showMax(width) {\r\n\tvar threshold = 0.75; // number of datapoints per 1 px\r\n\treturn Math.floor(width * threshold);\r\n}\r\n\r\n\r\nexport default function() {\r\n\r\n\tvar allowedIntervals, xAccessor, discontinous = false, useWholeData,\r\n\t\tindexAccessor, indexMutator, map, scale, calculator = [], intervalCalculator = eodIntervalCalculator,\r\n\t\tcanShowTheseMany = canShowTheseManyPeriods;\r\n\r\n\tfunction evaluate(data) {\r\n\t\tif (discontinous\r\n\t\t\t\t&& (isNotDefined(scale.isPolyLinear)\r\n\t\t\t\t\t\t|| (isDefined(scale.isPolyLinear) && !scale.isPolyLinear()))) {\r\n\t\t\tthrow new Error(\"you need a scale that is capable of handling discontinous data. change the scale prop or set discontinous to false\");\r\n\t\t}\r\n\t\tvar realXAccessor = discontinous ? indexAccessor : xAccessor;\r\n\r\n\t\tvar xScale = (discontinous && isDefined(scale.isPolyLinear) && scale.isPolyLinear())\r\n\t\t\t? scale.copy().indexAccessor(realXAccessor).dateAccessor(xAccessor)\r\n\t\t\t: scale;\r\n\t\t// if any calculator gives a discontinious output and discontinous = false throw error\r\n\r\n\t\tvar calculate = intervalCalculator()\r\n\t\t\t.doIt(isDefined(xScale.isPolyLinear))\r\n\t\t\t.allowedIntervals(allowedIntervals);\r\n\r\n\t\tvar mappedData = calculate(data.map(map));\r\n\r\n\t\tif (discontinous) {\r\n\t\t\tcalculator.unshift(values => values.map((d, i) => {\r\n\t\t\t\tindexMutator(d, i);\r\n\t\t\t\treturn d;\r\n\t\t\t}));\r\n\t\t}\r\n\t\t// console.log(mappedData);\r\n\r\n\t\tcalculator.forEach(each => {\r\n\t\t\tvar newData;\r\n\t\t\tif (isArray(mappedData)) {\r\n\t\t\t\tnewData = each(mappedData);\r\n\t\t\t} else {\r\n\t\t\t\tnewData = {};\r\n\t\t\t\tObject.keys(mappedData)\r\n\t\t\t\t\t.forEach(key => {\r\n\t\t\t\t\t\tnewData[key] = each(mappedData[key]);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tmappedData = newData;\r\n\t\t});\r\n\r\n\r\n\t\treturn {\r\n\t\t\tfullData: mappedData,\r\n\t\t\txAccessor: realXAccessor,\r\n\t\t\t// inputXAccesor: xAccessor,\r\n\t\t\tdomainCalculator: extentsWrapper(xAccessor, realXAccessor, allowedIntervals, canShowTheseMany, useWholeData),\r\n\t\t};\r\n\t}\r\n\tevaluate.allowedIntervals = function(x) {\r\n\t\tif (!arguments.length) return allowedIntervals;\r\n\t\tallowedIntervals = x;\r\n\t\treturn evaluate;\r\n\t};\r\n\tevaluate.intervalCalculator = function(x) {\r\n\t\tif (!arguments.length) return intervalCalculator;\r\n\t\tintervalCalculator = x;\r\n\t\treturn evaluate;\r\n\t};\r\n\tevaluate.xAccessor = function(x) {\r\n\t\tif (!arguments.length) return xAccessor;\r\n\t\txAccessor = x;\r\n\t\treturn evaluate;\r\n\t};\r\n\tevaluate.discontinous = function(x) {\r\n\t\tif (!arguments.length) return discontinous;\r\n\t\tdiscontinous = x;\r\n\t\treturn evaluate;\r\n\t};\r\n\tevaluate.indexAccessor = function(x) {\r\n\t\tif (!arguments.length) return indexAccessor;\r\n\t\tindexAccessor = x;\r\n\t\treturn evaluate;\r\n\t};\r\n\tevaluate.indexMutator = function(x) {\r\n\t\tif (!arguments.length) return indexMutator;\r\n\t\tindexMutator = x;\r\n\t\treturn evaluate;\r\n\t};\r\n\tevaluate.map = function(x) {\r\n\t\tif (!arguments.length) return map;\r\n\t\tmap = x;\r\n\t\treturn evaluate;\r\n\t};\r\n\tevaluate.scale = function(x) {\r\n\t\tif (!arguments.length) return scale;\r\n\t\tscale = x;\r\n\t\treturn evaluate;\r\n\t};\r\n\tevaluate.useWholeData = function(x) {\r\n\t\tif (!arguments.length) return useWholeData;\r\n\t\tuseWholeData = x;\r\n\t\treturn evaluate;\r\n\t};\r\n\tevaluate.calculator = function(x) {\r\n\t\tif (!arguments.length) return calculator;\r\n\t\tcalculator = x;\r\n\t\treturn evaluate;\r\n\t};\r\n\r\n\treturn evaluate;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/scale/evaluator.js\n **/","import React, { PropTypes } from \"react\";\r\nimport PureComponent from \"./utils/PureComponent\";\r\n\r\nimport { hexToRGBA, isDefined } from \"./utils\";\r\n\r\nclass BackgroundText extends PureComponent {\r\n\tcomponentDidMount() {\r\n\t\tif (this.context.chartCanvasType !== \"svg\" && isDefined(this.context.getCanvasContexts)) {\r\n\t\t\tvar contexts = this.context.getCanvasContexts();\r\n\t\t\tif (contexts) BackgroundText.drawOnCanvas(contexts.bg, this.props, this.context, this.props.children);\r\n\t\t}\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tthis.componentDidMount();\r\n\t}\r\n\trender() {\r\n\t\tvar { chartCanvasType } = this.context;\r\n\r\n\t\tif (chartCanvasType !== \"svg\") return null;\r\n\r\n\t\tvar { x, y, fill, opacity, stroke, strokeOpacity, fontFamily, fontSize, textAnchor } = this.props;\r\n\t\tvar props = { x, y, fill, opacity, stroke, strokeOpacity, fontFamily, fontSize, textAnchor };\r\n\t\treturn (\r\n\t\t\t<text {...props}>this.props.children(interval)</text>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nBackgroundText.drawOnCanvas = (ctx, props, { interval }, getText) => {\r\n\tctx.clearRect(-1, -1, ctx.canvas.width + 2, ctx.canvas.height + 2);\r\n\tctx.save();\r\n\r\n\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\tctx.translate(0.5, 0.5);\r\n\r\n\tvar { x, y, fill, opacity, stroke, strokeOpacity, fontFamily, fontSize, textAnchor } = props;\r\n\r\n\tvar text = getText(interval);\r\n\r\n\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\r\n\r\n\tctx.font = `${ fontSize }px ${ fontFamily }`;\r\n\tctx.fillStyle = hexToRGBA(fill, opacity);\r\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\r\n\r\n\tif (stroke !== \"none\") ctx.strokeText(text, x, y);\r\n\tctx.fillText(text, x, y);\r\n\r\n\tctx.restore();\r\n};\r\n\r\nBackgroundText.propTypes = {\r\n\tx: PropTypes.number.isRequired,\r\n\ty: PropTypes.number.isRequired,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number.isRequired,\r\n};\r\n\r\nBackgroundText.defaultProps = {\r\n\topacity: 0.3,\r\n\tfill: \"#9E7523\",\r\n\tstroke: \"#9E7523\",\r\n\tstrokeOpacity: 1,\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 12,\r\n\ttextAnchor: \"middle\",\r\n};\r\n\r\nBackgroundText.contextTypes = {\r\n\tinterval: PropTypes.string.isRequired,\r\n\tgetCanvasContexts: PropTypes.func,\r\n\tchartCanvasType: PropTypes.string,\r\n};\r\n\r\nexport default BackgroundText;\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/BackgroundText.jsx\n **/","import AreaSeries from \"./AreaSeries\";\r\nimport ScatterSeries from \"./ScatterSeries\";\r\nimport CircleMarker from \"./CircleMarker\";\r\nimport LineSeries from \"./LineSeries\";\r\nimport CandlestickSeries from \"./CandlestickSeries\";\r\nimport OHLCSeries from \"./OHLCSeries\";\r\nimport BarSeries from \"./BarSeries\";\r\nimport StackedBarSeries from \"./StackedBarSeries\";\r\nimport GroupedBarSeries from \"./GroupedBarSeries\";\r\nimport KagiSeries from \"./KagiSeries\";\r\nimport PointAndFigureSeries from \"./PointAndFigureSeries\";\r\nimport RenkoSeries from \"./RenkoSeries\";\r\nimport MACDSeries from \"./MACDSeries\";\r\nimport BollingerSeries from \"./BollingerSeries\";\r\nimport RSISeries from \"./RSISeries\";\r\nimport StochasticSeries from \"./StochasticSeries\";\r\nimport ElderRaySeries from \"./ElderRaySeries\";\r\n\r\n// import ElderImpulseBackground from \"./ElderImpulseBackground\";\r\n\r\nimport Area from \"./Area\";\r\nimport Line from \"./Line\";\r\nimport StraightLine from \"./StraightLine\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nexport {\r\n\tScatterSeries,\r\n\tCircleMarker,\r\n\tAreaSeries,\r\n\tLineSeries,\r\n\tCandlestickSeries,\r\n\tOHLCSeries,\r\n\tBarSeries,\r\n\tStackedBarSeries,\r\n\tGroupedBarSeries,\r\n\tKagiSeries,\r\n\tPointAndFigureSeries,\r\n\tRenkoSeries,\r\n\tMACDSeries,\r\n\tBollingerSeries,\r\n\tRSISeries,\r\n\tStochasticSeries,\r\n\tElderRaySeries,\r\n\tArea,\r\n\tLine,\r\n\tStraightLine,\r\n\twrap\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/index.js\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport Line from \"./Line\";\r\nimport Area from \"./Area\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nclass AreaSeries extends Component {\r\n\trender() {\r\n\t\tvar { props } = this;\r\n\t\tvar { className, xScale, yScale, xAccessor, yAccessor, plotData, type, stroke, fill, baseAt } = props;\r\n\r\n\t\tvar { opacity } = props;\r\n\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t<Line\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={yAccessor}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tstroke={stroke} fill=\"none\"\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t\t<Area\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={yAccessor}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tbase={baseAt}\r\n\t\t\t\t\tstroke=\"none\" fill={fill} opacity={opacity}\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAreaSeries.propTypes = {\r\n\tstroke: PropTypes.string,\r\n\tfill: PropTypes.string.isRequired,\r\n\topacity: PropTypes.number.isRequired,\r\n\tclassName: PropTypes.string,\r\n};\r\n\r\nAreaSeries.defaultProps = {\r\n\tstroke: \"#4682B4\",\r\n\topacity: 0.5,\r\n\tfill: \"#4682B4\",\r\n\tclassName: \"react-stockcharts-area\"\r\n};\r\n\r\nAreaSeries.yAccessor = (d) => d.close;\r\n\r\nexport default wrap(AreaSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/AreaSeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nimport { first } from \"../utils\";\r\n\r\nclass Line extends Component {\r\n\trender() {\r\n\t\tvar { stroke, fill, className } = this.props;\r\n\r\n\t\tclassName = className.concat((stroke) ? \"\" : \" line-stroke\");\r\n\t\treturn <path d={Line.getPath(this.props)} stroke={stroke} fill={fill} className={className}/>;\r\n\t}\r\n}\r\n\r\nLine.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\txScale: PropTypes.func.isRequired,\r\n\tyScale: PropTypes.func.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\tyAccessor: PropTypes.func.isRequired,\r\n\tplotData: PropTypes.array.isRequired,\r\n\tstroke: PropTypes.string,\r\n\tfill: PropTypes.string,\r\n};\r\n\r\nLine.defaultProps = {\r\n\tclassName: \"line \",\r\n\tfill: \"none\",\r\n\tstroke: \"black\",\r\n\tdefined: d => !isNaN(d),\r\n};\r\n\r\nLine.getPath = (props) => {\r\n\tvar { plotData, xScale, yScale, xAccessor, yAccessor, defined } = props;\r\n\r\n\tvar dataSeries = d3.svg.line()\r\n\t\t.defined(d => defined(yAccessor(d)))\r\n\t\t.x(d => xScale(xAccessor(d)))\r\n\t\t.y(d => yScale(yAccessor(d)));\r\n\treturn dataSeries(plotData);\r\n};\r\n\r\nfunction segment(points, ctx) {\r\n\tctx.beginPath();\r\n\r\n\tlet [x, y] = first(points);\r\n\tctx.moveTo(x, y);\r\n\tfor (let i = 1; i < points.length; i++) {\r\n\t\tlet [x1, y1] = points[i];\r\n\t\tctx.lineTo(x1, y1);\r\n\t};\r\n\r\n\tctx.stroke();\r\n};\r\n\r\nLine.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { xAccessor, yAccessor, stroke, defined } = props;\r\n\r\n\tctx.strokeStyle = stroke;\r\n\r\n\tvar points = [];\r\n\tfor (let i = 0; i < plotData.length; i++) {\r\n\t\tlet d = plotData[i];\r\n\t\tif (defined(yAccessor(d), i)) {\r\n\t\t\tlet [x, y] = [xScale(xAccessor(d)), yScale(yAccessor(d))];\r\n\r\n\t\t\tpoints.push([x, y]);\r\n\t\t} else if (points.length) {\r\n\t\t\tsegment(points, ctx);\r\n\t\t\tpoints = [];\r\n\t\t}\r\n\t}\r\n\r\n\tif (points.length) segment(points, ctx);\r\n\r\n};\r\n\r\nexport default wrap(Line);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/Line.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport pure from \"../pure\";\r\nimport { isDefined } from \"../utils\";\r\n\r\nfunction getDisplayName(Series) {\r\n\tvar name = Series.displayName || Series.name || \"Series\";\r\n\treturn name;\r\n}\r\n\r\nfunction wrap(WrappedSeries) {\r\n\tclass BaseCanvasSeries extends Component {\r\n\t\tcomponentDidMount() {\r\n\t\t\tvar callback = WrappedSeries.drawOnCanvas;\r\n\t\t\tif (callback) {\r\n\t\t\t\tvar { chartCanvasType, getCanvasContexts } = this.props;\r\n\r\n\t\t\t\tif (chartCanvasType !== \"svg\" && isDefined(getCanvasContexts)) {\r\n\t\t\t\t\tvar contexts = getCanvasContexts();\r\n\t\t\t\t\tvar props = { ...WrappedSeries.defaultProps, ...this.props };\r\n\r\n\t\t\t\t\tif (contexts) BaseCanvasSeries.baseReStockDrawOnCanvasHelper(contexts.axes, props, callback);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcomponentDidUpdate() {\r\n\t\t\tthis.componentDidMount();\r\n\t\t}\r\n\t\tcomponentWillMount() {\r\n\t\t\tthis.componentWillReceiveProps(this.props);\r\n\t\t}\r\n\t\tcomponentWillReceiveProps(nextProps) {\r\n\t\t\t// console.log(\"HERE1\");\r\n\t\t\tvar { chartCanvasType } = nextProps;\r\n\t\t\tvar callback = WrappedSeries.drawOnCanvas;\r\n\r\n\t\t\tif (callback && chartCanvasType !== \"svg\") {\r\n\r\n\t\t\t\tvar {\r\n\t\t\t\t\tcanvasOriginX,\r\n\t\t\t\t\tcanvasOriginY,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\txAccessor,\r\n\t\t\t\t\tyAccessor,\r\n\t\t\t\t\tchartId\r\n\t\t\t\t} = nextProps;\r\n\r\n\t\t\t\tvar canvasOrigin = [canvasOriginX, canvasOriginY];\r\n\r\n\t\t\t\tvar props = { ...WrappedSeries.defaultProps, ...nextProps };\r\n\r\n\r\n\t\t\t\tvar draw = BaseCanvasSeries.baseReStockDrawOnCanvas.bind(null, props,\r\n\t\t\t\t\tcallback, canvasOrigin, height, width, xAccessor, yAccessor);\r\n\r\n\t\t\t\tnextProps.callbackForCanvasDraw({\r\n\t\t\t\t\tchartId: chartId,\r\n\t\t\t\t\ttype: \"series\",\r\n\t\t\t\t\t// seriesId: seriesId,\r\n\t\t\t\t\tdraw: draw,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\trender() {\r\n\t\t\tvar callback = WrappedSeries.drawOnCanvas;\r\n\t\t\tvar { clip, chartCanvasType, chartConfig } = this.props;\r\n\r\n\t\t\tif (chartCanvasType !== \"svg\" && isDefined(callback)) return null;\r\n\t\t\tvar style = clip ? { \"clipPath\": \"url(#chart-area-clip)\" } : null;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<g style={style}>\r\n\t\t\t\t\t<WrappedSeries ref=\"wrappedSeries\"\r\n\t\t\t\t\t\tyScale={chartConfig.yScale}\r\n\t\t\t\t\t\t{...this.props} />\r\n\t\t\t\t</g>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tBaseCanvasSeries.displayName = `wrap(${ getDisplayName(WrappedSeries) })`;\r\n\r\n\tBaseCanvasSeries.baseReStockDrawOnCanvasHelper = (canvasContext, props, callback) => {\r\n\t\tvar { height, width, xAccessor, yAccessor,\r\n\t\t\txScale, chartConfig, yScale, plotData, canvasOriginX, canvasOriginY } = props;\r\n\t\tvar canvasOrigin = [canvasOriginX, canvasOriginY];\r\n\r\n\t\tBaseCanvasSeries.baseReStockDrawOnCanvas(props, callback, canvasOrigin, height, width,\r\n\t\t\txAccessor, yAccessor, canvasContext, xScale, yScale || chartConfig.yScale, plotData);\r\n\t};\r\n\r\n\tBaseCanvasSeries.baseReStockDrawOnCanvas = (props, callback,\r\n\t\t\tcanvasOrigin, height, width,\r\n\t\t\txAccessor, yAccessor, ctx, xScale, yScale, plotData) => {\r\n\r\n\t\tctx.save();\r\n\r\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\tctx.translate(canvasOrigin[0], canvasOrigin[1]);\r\n\r\n\t\tif (props.clip) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(-1, -1, width + 1, height + 1);\r\n\t\t\tctx.clip();\r\n\t\t}\r\n\r\n\t\t// console.log(canvasOrigin, width, height);\r\n\r\n\t\t// console.log(\"HERE\");\r\n\t\tif (callback) {\r\n\t\t\tvar newProps = { height, width, xAccessor, yAccessor, ...props };\r\n\r\n\t\t\tcallback(newProps, ctx, xScale, yScale, plotData);\r\n\t\t}\r\n\r\n\t\tctx.restore();\r\n\t};\r\n\r\n\tBaseCanvasSeries.defaultProps = {\r\n\t\t...WrappedSeries.defaultProps,\r\n\t\tclip: true,\r\n\t};\r\n\r\n\tBaseCanvasSeries.propTypes = {\r\n\t\tgetCanvasContexts: PropTypes.func,\r\n\t\tchartConfig: PropTypes.object,\r\n\t\tchartCanvasType: PropTypes.string,\r\n\t\tclip: PropTypes.bool.isRequired,\r\n\t};\r\n\r\n\t// console.log(Object.keys(BaseCanvasSeries))\r\n\treturn pure(BaseCanvasSeries, {\r\n\t\tgetCanvasContexts: PropTypes.func,\r\n\t\tcanvasOriginX: PropTypes.number,\r\n\t\tcanvasOriginY: PropTypes.number,\r\n\t\theight: PropTypes.number.isRequired,\r\n\t\twidth: PropTypes.number.isRequired,\r\n\t\tcallbackForCanvasDraw: PropTypes.func.isRequired,\r\n\t\tchartId: PropTypes.number.isRequired,\r\n\t\t// seriesId: PropTypes.number.isRequired,\r\n\t\tstroke: PropTypes.string,\r\n\t\tfill: PropTypes.string,\r\n\t\tchartConfig: PropTypes.object.isRequired,\r\n\t\tchartCanvasType: PropTypes.string,\r\n\t\txScale: PropTypes.func.isRequired,\r\n\t\t// yScale: PropTypes.func.isRequired,\r\n\t\txAccessor: PropTypes.func.isRequired,\r\n\t\tplotData: PropTypes.array.isRequired,\r\n\t});\r\n}\r\n\r\nexport default wrap;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/wrap.jsx\n **/","\"use strict\";\r\n\r\nimport React, { Component } from \"react\";\r\nimport { shallowEqual } from \"./utils\";\r\n\r\nfunction getDisplayName(Series) {\r\n\tvar name = Series.displayName || Series.name || \"Series\";\r\n\treturn name;\r\n}\r\n\r\nfunction pure(PureSeries, contextShape, ignorePropKeys = []) {\r\n\tclass PureCanvasSeries extends Component {\r\n\t\tshouldComponentUpdate(nextProps, nextState, nextContext) {\r\n\t\t\treturn !shallowEqual(this.props, nextProps)\r\n\t\t\t\t|| !shallowEqual(this.state, nextState)\r\n\t\t\t\t|| !shallowEqual(this.context, nextContext);\r\n\t\t}\r\n\t\tgetWrappedComponent() {\r\n\t\t\treturn this.refs.pureSeries;\r\n\t\t}\r\n\t\trender() {\r\n\t\t\tvar ctx = {};\r\n\t\t\tObject.keys(this.context)\r\n\t\t\t\t.filter(key => ignorePropKeys.indexOf(key) === -1)\r\n\t\t\t\t.forEach(key => {\r\n\t\t\t\t\tctx[key] = this.context[key];\r\n\t\t\t\t});\r\n\r\n\t\t\treturn <PureSeries ref=\"pureSeries\"\r\n\t\t\t\t{...ctx}\r\n\t\t\t\t{...this.props} />;\r\n\t\t}\r\n\t};\r\n\r\n\tPureCanvasSeries.displayName = `pure(${ getDisplayName(PureSeries) })`;\r\n\r\n\tPureCanvasSeries.contextTypes = contextShape;\r\n\r\n\tvar defaultProps = {};\r\n\r\n\tif (PureSeries.defaultProps) {\r\n\t\tObject.keys(PureSeries.defaultProps)\r\n\t\t\t.forEach(key => {\r\n\t\t\t\tdefaultProps[key] = PureSeries.defaultProps[key];\r\n\t\t\t});\r\n\t\tPureCanvasSeries.defaultProps = defaultProps;\r\n\t}\r\n\r\n\t/* Object.keys(PureSeries)\r\n\t\t.filter((key) => key !== \"propTypes\")\r\n\t\t.filter(key => key !== \"defaultProps\")\r\n\t\t.filter(key => key !== \"displayName\")\r\n\t\t.filter(key => key !== \"contextTypes\")\r\n\t\t.filter(key => key !== \"childContextTypes\")\r\n\t\t.forEach(key => PureCanvasSeries[key] = PureSeries[key]);*/\r\n\r\n\t// console.log(Object.keys(PureCanvasSeries))\r\n\treturn PureCanvasSeries;\r\n}\r\n\r\nexport default pure;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/pure.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport wrap from \"./wrap\";\r\nimport { hexToRGBA, isDefined, first } from \"../utils\";\r\n\r\nclass Area extends Component {\r\n\trender() {\r\n\t\tvar { props } = this;\r\n\t\tvar { stroke, fill, className, opacity } = props;\r\n\r\n\t\tclassName = className.concat(isDefined(stroke) ? \"\" : \" line-stroke\");\r\n\t\treturn (\r\n\t\t\t<path d={Area.getArea(props)} stroke={stroke} fill={fill} className={className} opacity={opacity} />\r\n\t\t);\r\n\t}\r\n};\r\n\r\nArea.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\txScale: PropTypes.func.isRequired,\r\n\tyScale: PropTypes.func.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\tyAccessor: PropTypes.func.isRequired,\r\n\tplotData: PropTypes.array.isRequired,\r\n\tstroke: PropTypes.string,\r\n\tfill: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\tbase: PropTypes.oneOfType([\r\n\t\tPropTypes.func, PropTypes.number\r\n\t]),\r\n};\r\n\r\nArea.defaultProps = {\r\n\tclassName: \"line \",\r\n\tfill: \"none\",\r\n\topacity: 1,\r\n\tdefined: d => !isNaN(d),\r\n\tbase: (yScale/* , d*/) => first(yScale.range()),\r\n};\r\nArea.getArea = (props) => {\r\n\tvar { plotData, xScale, yScale, xAccessor, yAccessor, base, defined } = props;\r\n\tvar newBase = d3.functor(base);\r\n\r\n\tvar areaSeries = d3.svg.area()\r\n\t\t.defined(d => defined(yAccessor(d)))\r\n\t\t.x((d) => xScale(xAccessor(d)))\r\n\t\t.y0(newBase.bind(null, yScale))\r\n\t\t.y1((d) => yScale(yAccessor(d)));\r\n\r\n\t// console.log(\"HERE\", yAccessor(plotData[0]));\r\n\treturn areaSeries(plotData);\r\n};\r\n\r\nfunction segment(points0, points1, ctx) {\r\n\tctx.beginPath();\r\n\tvar [x0, y0] = first(points0);\r\n\tctx.moveTo(x0, y0);\r\n\r\n\tvar i;\r\n\tfor (i = 0; i < points1.length; i++) {\r\n\t\tlet [x1, y1] = points1[i];\r\n\t\tctx.lineTo(x1, y1);\r\n\t};\r\n\r\n\tfor (i = points0.length - 1; i >= 0; i--) {\r\n\t\tlet [x0, y0] = points0[i];\r\n\t\tctx.lineTo(x0, y0);\r\n\t};\r\n\tctx.closePath();\r\n\tctx.fill();\r\n};\r\n\r\nArea.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { xAccessor, yAccessor, fill, stroke, opacity, base, defined } = props;\r\n\t// var height = yScale.range()[0];\r\n\tvar newBase = d3.functor(base);\r\n\r\n\tctx.fillStyle = hexToRGBA(fill, opacity);\r\n\tctx.strokeStyle = stroke;\r\n\r\n\tvar points0 = [], points1 = [];\r\n\r\n\tfor (let i = 0; i < plotData.length; i++) {\r\n\t\tlet d = plotData[i];\r\n\t\tif (defined(yAccessor(d), i)) {\r\n\t\t\tlet [x, y1, y0] = [xScale(xAccessor(d)), yScale(yAccessor(d)), newBase(yScale, d)];\r\n\r\n\t\t\tpoints0.push([x, y0]);\r\n\t\t\tpoints1.push([x, y1]);\r\n\t\t} else if (points0.length) {\r\n\t\t\tsegment(points0, points1, ctx);\r\n\t\t\tpoints0 = [];\r\n\t\t\tpoints1 = [];\r\n\t\t}\r\n\t}\r\n\tif (points0.length) segment(points0, points1, ctx);\r\n};\r\n\r\nexport default wrap(Area);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/Area.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport wrap from \"./wrap\";\r\nimport { hexToRGBA } from \"../utils\";\r\n\r\nclass ScatterSeries extends Component {\r\n\trender() {\r\n\t\tvar { className, markerProps, xScale, yScale, plotData } = this.props;\r\n\t\tvar points = ScatterSeries.helper(this.props, xScale, yScale, plotData);\r\n\r\n\t\treturn <g className={className}>\r\n\t\t\t{points.map((point, idx) => {\r\n\t\t\t\tvar { marker: Marker } = point;\r\n\t\t\t\treturn <Marker key={idx} {...markerProps} point={point} />;\r\n\t\t\t})}\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nScatterSeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\txAccessor: PropTypes.func,\r\n\tyAccessor: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n\tmarker: PropTypes.func,\r\n\tmarkerProvider: PropTypes.func,\r\n\tmarkerProps: PropTypes.object,\r\n};\r\n\r\nScatterSeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-scatter\",\r\n};\r\n\r\nScatterSeries.yAccessor = d => d.close;\r\n\r\nScatterSeries.helper = (props, xScale, yScale, plotData) => {\r\n\tvar { xAccessor, yAccessor, marker: Marker, markerProvider, markerProps } = props;\r\n\r\n\tif (!(markerProvider || Marker)) throw new Error(\"required prop, either marker or markerProvider missing\");\r\n\r\n\treturn plotData.map(d => {\r\n\r\n\t\tif (markerProvider) Marker = markerProvider(d);\r\n\r\n\t\tvar mProps = { ...Marker.defaultProps, ...markerProps };\r\n\r\n\t\tvar fill = d3.functor(mProps.fill);\r\n\t\tvar stroke = d3.functor(mProps.stroke);\r\n\r\n\t\treturn {\r\n\t\t\tx: xScale(xAccessor(d)),\r\n\t\t\ty: yScale(yAccessor(d)),\r\n\t\t\tfill: hexToRGBA(fill(d), mProps.opacity),\r\n\t\t\tstroke: stroke(d),\r\n\t\t\tdatum: d,\r\n\t\t\tmarker: Marker,\r\n\t\t};\r\n\t});\r\n};\r\n\r\nScatterSeries.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\r\n\tvar { markerProps } = props;\r\n\r\n\tvar points = ScatterSeries.helper(props, xScale, yScale, plotData);\r\n\r\n\tvar nest = d3.nest()\r\n\t\t.key(d => d.fill)\r\n\t\t.key(d => d.stroke)\r\n\t\t.entries(points);\r\n\r\n\tnest.forEach(fillGroup => {\r\n\t\tvar { key: fillKey, values: fillValues } = fillGroup;\r\n\r\n\t\tif (fillKey !== \"none\") {\r\n\t\t\tctx.fillStyle = fillKey;\r\n\t\t}\r\n\r\n\t\tfillValues.forEach(strokeGroup => {\r\n\t\t\tvar { key: strokeKey, values: strokeValues } = strokeGroup;\r\n\r\n\t\t\tctx.strokeStyle = strokeKey;\r\n\r\n\t\t\tstrokeValues.forEach(point => {\r\n\t\t\t\tvar { marker } = point;\r\n\t\t\t\tmarker.drawOnCanvasWithNoStateChange({ ...marker.defaultProps, ...markerProps }, point, ctx);\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n};\r\n\r\nexport default wrap(ScatterSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/ScatterSeries.jsx\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport React, { PropTypes } from \"react\";\r\n\r\nimport { hexToRGBA } from \"../utils\";\r\n\r\nfunction Circle(props) {\r\n\tvar { className, stroke, opacity, fill, point, r } = props;\r\n\tvar radius = d3.functor(r)(point.datum);\r\n\treturn (\r\n\t\t<circle className={className} cx={point.x} cy={point.y} stroke={stroke} fillOpacity={opacity} fill={fill} r={radius} />\r\n\t);\r\n}\r\n\r\nCircle.propTypes = {\r\n\tstroke: PropTypes.string,\r\n\tfill: PropTypes.string.isRequired,\r\n\topacity: PropTypes.number.isRequired,\r\n\tpoint: PropTypes.shape({\r\n\t\tx: PropTypes.number.isRequired,\r\n\t\ty: PropTypes.number.isRequired,\r\n\t\tdatum: PropTypes.object.isRequired,\r\n\t}).isRequired,\r\n\tclassName: PropTypes.string,\r\n\tr: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.func\r\n\t]).isRequired\r\n};\r\n\r\nCircle.defaultProps = {\r\n\tstroke: \"#4682B4\",\r\n\topacity: 0.5,\r\n\tfill: \"#4682B4\",\r\n\tclassName: \"react-stockcharts-marker-circle\",\r\n};\r\n\r\nCircle.drawOnCanvas = (props, point, ctx) => {\r\n\r\n\tvar { stroke, fill, opacity } = props;\r\n\r\n\tctx.strokeStyle = stroke;\r\n\r\n\tif (fill !== \"none\") {\r\n\t\tctx.fillStyle = hexToRGBA(fill, opacity);\r\n\t}\r\n\r\n\tCircle.drawOnCanvasWithNoStateChange(props, point, ctx);\r\n};\r\n\r\n\r\nCircle.drawOnCanvasWithNoStateChange = (props, point, ctx) => {\r\n\r\n\tvar { r } = props;\r\n\tvar radius = d3.functor(r)(point.datum);\r\n\r\n\tctx.moveTo(point.x, point.y);\r\n\tctx.beginPath();\r\n\tctx.arc(point.x, point.y, radius, 0, 2 * Math.PI, false);\r\n\tctx.stroke();\r\n\tctx.fill();\r\n};\r\n\r\nexport default Circle;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/CircleMarker.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport Line from \"./Line\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nclass LineSeries extends Component {\r\n\trender() {\r\n\t\tvar { props } = this;\r\n\t\tlet { className, xScale, yScale, xAccessor, yAccessor, plotData, stroke, type } = props;\r\n\t\treturn (\r\n\t\t\t<Line\r\n\t\t\t\tclassName={className}\r\n\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\txAccessor={xAccessor} yAccessor={yAccessor}\r\n\t\t\t\tplotData={plotData}\r\n\t\t\t\tstroke={stroke} fill=\"none\"\r\n\t\t\t\ttype={type} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nLineSeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n};\r\n\r\nLineSeries.defaultProps = {\r\n\tstroke: \"#4682B4\",\r\n\tclassName: \"line \"\r\n};\r\n\r\nLineSeries.yAccessor = (d) => d.close;\r\n\r\nexport default wrap(LineSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/LineSeries.jsx\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport wrap from \"./wrap\";\r\nimport { first, last, hexToRGBA, isDefined } from \"../utils\";\r\n\r\nclass CandlestickSeries extends Component {\r\n\trender() {\r\n\t\tvar { className, wickClassName, candleClassName } = this.props;\r\n\t\treturn <g className={className}>\r\n\t\t\t<g className={wickClassName} key=\"wicks\">\r\n\t\t\t\t{CandlestickSeries.getWicksSVG(this.props)}\r\n\t\t\t</g>\r\n\t\t\t<g className={candleClassName} key=\"candles\">\r\n\t\t\t\t{CandlestickSeries.getCandlesSVG(this.props)}\r\n\t\t\t</g>\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nCandlestickSeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\twickClassName: PropTypes.string,\r\n\tcandleClassName: PropTypes.string,\r\n\twidthRatio: PropTypes.number.isRequired,\r\n\tclassNames: PropTypes.oneOfType([\r\n\t\tPropTypes.func,\r\n\t\tPropTypes.string\r\n\t]).isRequired,\r\n\tfill: PropTypes.oneOfType([\r\n\t\tPropTypes.func,\r\n\t\tPropTypes.string\r\n\t]).isRequired,\r\n\tstroke: PropTypes.oneOfType([\r\n\t\tPropTypes.func,\r\n\t\tPropTypes.string\r\n\t]).isRequired,\r\n\twickStroke: PropTypes.oneOfType([\r\n\t\tPropTypes.func,\r\n\t\tPropTypes.string\r\n\t]).isRequired,\r\n\txAccessor: PropTypes.func,\r\n\tyAccessor: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n};\r\n\r\nCandlestickSeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-candlestick\",\r\n\twickClassName: \"react-stockcharts-candlestick-wick\",\r\n\tcandleClassName: \"react-stockcharts-candlestick-candle\",\r\n\tyAccessor: d => ({ open: d.open, high: d.high, low: d.low, close: d.close }),\r\n\tclassNames: d => d.close > d.open ? \"up\" : \"down\",\r\n\twidthRatio: 0.5,\r\n\twickStroke: \"#000000\",\r\n\t// wickStroke: d => d.close > d.open ? \"#6BA583\" : \"#FF0000\",\r\n\tfill: d => d.close > d.open ? \"#6BA583\" : \"#FF0000\",\r\n\t// stroke: d => d.close > d.open ? \"#6BA583\" : \"#FF0000\",\r\n\t// stroke: \"#000000\",\r\n\tstroke: \"none\",\r\n\topacity: 1,\r\n};\r\n\r\nCandlestickSeries.getWicksSVG = (props) => {\r\n\r\n\t/* eslint-disable react/prop-types */\r\n\tvar { xAccessor, yAccessor, xScale, yScale, plotData } = props;\r\n\t/* eslint-disable react/prop-types */\r\n\r\n\r\n\tvar wickData = CandlestickSeries.getWickData(props, xAccessor, yAccessor, xScale, yScale, plotData);\r\n\tvar wicks = wickData\r\n\t\t.map((d, idx) => <line key={idx}\r\n\t\t\tclassName={d.className} stroke={d.stroke} style={{ shapeRendering: \"crispEdges\" }}\r\n\t\t\tx1={d.x1} y1={d.y1}\r\n\t\t\tx2={d.x2} y2={d.y2} />\r\n\t\t);\r\n\treturn wicks;\r\n};\r\nCandlestickSeries.getCandlesSVG = (props) => {\r\n\r\n\tvar { xAccessor, yAccessor, xScale, yScale, plotData, opacity } = props;\r\n\r\n\tvar candleData = CandlestickSeries.getCandleData(props, xAccessor, yAccessor, xScale, yScale, plotData);\r\n\tvar candles = candleData.map((d, idx) => {\r\n\t\tif (d.width < 0)\r\n\t\t\treturn (\r\n\t\t\t\t<line className={d.className} key={idx}\r\n\t\t\t\t\tx1={d.x} y1={d.y} x2={d.x} y2={d.y + d.height}\r\n\t\t\t\t\tstroke={d.fill} />\r\n\t\t\t);\r\n\t\telse if (d.height === 0)\r\n\t\t\treturn (\r\n\t\t\t\t<line key={idx}\r\n\t\t\t\t\tx1={d.x} y1={d.y} x2={d.x + d.width} y2={d.y + d.height}\r\n\t\t\t\t\tstroke={d.fill} />\r\n\t\t\t);\r\n\t\treturn (\r\n\t\t\t<rect key={idx} className={d.className}\r\n\t\t\t\tfillOpacity={opacity}\r\n\t\t\t\tx={d.x} y={d.y} width={d.width} height={d.height}\r\n\t\t\t\tfill={d.fill} stroke={d.stroke} />\r\n\t\t);\r\n\t});\r\n\treturn candles;\r\n};\r\n\r\nCandlestickSeries.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { xAccessor, yAccessor, opacity } = props;\r\n\tvar wickData = CandlestickSeries.getWickData(props, xAccessor, yAccessor, xScale, yScale, plotData);\r\n\r\n\tvar wickNest = d3.nest()\r\n\t\t.key(d => d.stroke)\r\n\t\t.entries(wickData);\r\n\r\n\twickNest.forEach(outer => {\r\n\t\tvar { key, values } = outer;\r\n\t\tctx.strokeStyle = key;\r\n\t\tvalues.forEach(d => {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(d.x1, d.y1);\r\n\t\t\tctx.lineTo(d.x2, d.y2);\r\n\t\t\tctx.stroke();\r\n\t\t});\r\n\t});\r\n\r\n\tvar candleData = CandlestickSeries.getCandleData(props, xAccessor, yAccessor, xScale, yScale, plotData);\r\n\r\n\tvar candleNest = d3.nest()\r\n\t\t.key(d => d.stroke)\r\n\t\t.key(d => d.fill)\r\n\t\t.entries(candleData);\r\n\r\n\tcandleNest.forEach(outer => {\r\n\t\tvar { key: strokeKey, values: strokeValues } = outer;\r\n\t\tif (strokeKey !== \"none\") ctx.strokeStyle = strokeKey;\r\n\t\tstrokeValues.forEach(inner => {\r\n\t\t\tvar { key, values } = inner;\r\n\t\t\tctx.fillStyle = hexToRGBA(key, opacity);\r\n\r\n\t\t\tvalues.forEach(d => {\r\n\t\t\t\tif (d.width < 0) {\r\n\t\t\t\t\t// <line className={d.className} key={idx} x1={d.x} y1={d.y} x2={d.x} y2={d.y + d.height}/>\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(d.x, d.y);\r\n\t\t\t\t\tctx.lineTo(d.x, d.y + d.height);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t} else if (d.height === 0) {\r\n\t\t\t\t\t// <line key={idx} x1={d.x} y1={d.y} x2={d.x + d.width} y2={d.y + d.height} />\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(d.x, d.y);\r\n\t\t\t\t\tctx.lineTo(d.x + d.width, d.y + d.height);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.rect(d.x, d.y, d.width, d.height);\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tif (strokeKey !== \"none\") ctx.stroke();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n};\r\n\r\nCandlestickSeries.getWickData = (props, xAccessor, yAccessor, xScale, yScale, plotData) => {\r\n\r\n\tvar { classNames: classNameProp, wickStroke: wickStrokeProp } = props;\r\n\tvar wickStroke = d3.functor(wickStrokeProp);\r\n\tvar className = d3.functor(classNameProp);\r\n\tvar wickData = plotData\r\n\t\t\t.filter(d => isDefined(d.close))\r\n\t\t\t.map(d => {\r\n\t\t\t\t// console.log(yAccessor);\r\n\t\t\t\tvar ohlc = yAccessor(d);\r\n\r\n\t\t\t\tvar x1 = Math.round(xScale(xAccessor(d))),\r\n\t\t\t\t\ty1 = yScale(ohlc.high),\r\n\t\t\t\t\tx2 = x1,\r\n\t\t\t\t\ty2 = yScale(ohlc.low);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx1: x1,\r\n\t\t\t\t\ty1: y1,\r\n\t\t\t\t\tx2: x2,\r\n\t\t\t\t\ty2: y2,\r\n\t\t\t\t\tclassName: className(ohlc),\r\n\t\t\t\t\tdirection: (ohlc.close - ohlc.open),\r\n\t\t\t\t\tstroke: wickStroke(ohlc),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\treturn wickData;\r\n};\r\n\r\nCandlestickSeries.getCandleData = (props, xAccessor, yAccessor, xScale, yScale, plotData) => {\r\n\tvar { classNames, fill: fillProp, stroke: strokeProp, widthRatio } = props;\r\n\tvar fill = d3.functor(fillProp);\r\n\tvar stroke = d3.functor(strokeProp);\r\n\t// console.log(plotData);\r\n\tvar width = xScale(xAccessor(last(plotData)))\r\n\t\t- xScale(xAccessor(first(plotData)));\r\n\tvar cw = (width / (plotData.length - 1)) * widthRatio;\r\n\tvar candleWidth = Math.round(cw); // Math.floor(cw) % 2 === 0 ? Math.floor(cw) : Math.round(cw);\r\n\tvar offset = (candleWidth === 1 ? 0 : 0.5 * candleWidth);\r\n\tvar candles = plotData\r\n\t\t\t.filter(d => isDefined(d.close))\r\n\t\t\t.map(d => {\r\n\t\t\t\tvar ohlc = yAccessor(d);\r\n\t\t\t\tvar x = Math.round(xScale(xAccessor(d))) - offset,\r\n\t\t\t\t\ty = yScale(Math.max(ohlc.open, ohlc.close)),\r\n\t\t\t\t\theight = Math.abs(yScale(ohlc.open) - yScale(ohlc.close)),\r\n\t\t\t\t\tclassName = (ohlc.open <= ohlc.close) ? classNames.up : classNames.down;\r\n\t\t\t\treturn {\r\n\t\t\t\t\t// type: \"line\"\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: candleWidth,\r\n\t\t\t\t\tclassName: className,\r\n\t\t\t\t\tfill: fill(ohlc),\r\n\t\t\t\t\tstroke: stroke(ohlc),\r\n\t\t\t\t\tdirection: (ohlc.close - ohlc.open),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\treturn candles;\r\n};\r\n\r\nexport default wrap(CandlestickSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/CandlestickSeries.jsx\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport wrap from \"./wrap\";\r\nimport { isDefined } from \"../utils\";\r\n\r\nclass OHLCSeries extends Component {\r\n\trender() {\r\n\t\tvar { className } = this.props;\r\n\t\tvar { xAccessor, yAccessor, xScale, yScale, plotData } = this.props;\r\n\r\n\t\tvar barData = OHLCSeries.getOHLCBars(this.props, xAccessor, yAccessor, xScale, yScale, plotData);\r\n\r\n\t\tvar { strokeWidth, bars } = barData;\r\n\r\n\t\treturn <g className={className}>\r\n\t\t\t{bars.map((d, idx) => <path key={idx}\r\n\t\t\t\tclassName={d.className} stroke={d.stroke} strokeWidth={strokeWidth}\r\n\t\t\t\td={`M${d.openX1} ${d.openY} L${d.openX2} ${d.openY} M${d.x} ${d.y1} L${d.x} ${d.y2} M${d.closeX1} ${d.closeY} L${d.closeX2} ${d.closeY}`}/>)}\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nOHLCSeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tclassNames: PropTypes.oneOfType([\r\n\t\tPropTypes.func,\r\n\t\tPropTypes.string\r\n\t]).isRequired,\r\n\tstroke: PropTypes.oneOfType([\r\n\t\tPropTypes.func,\r\n\t\tPropTypes.string\r\n\t]).isRequired,\r\n\txAccessor: PropTypes.func,\r\n\tyAccessor: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n};\r\n\r\nOHLCSeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-ohlc\",\r\n\tyAccessor: (d) => ({ open: d.open, high: d.high, low: d.low, close: d.close }),\r\n\tclassNames: d => isDefined(d.absoluteChange) ? (d.absoluteChange > 0 ? \"up\" : \"down\") : \"firstbar\",\r\n\tstroke: d => isDefined(d.absoluteChange) ? (d.absoluteChange > 0 ? \"#6BA583\" : \"#FF0000\") : \"#000000\",\r\n\topacity: 1,\r\n};\r\n\r\nOHLCSeries.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { xAccessor, yAccessor } = props;\r\n\r\n\tvar barData = OHLCSeries.getOHLCBars(props, xAccessor, yAccessor, xScale, yScale, plotData);\r\n\r\n\tvar { strokeWidth, bars } = barData;\r\n\r\n\tvar wickNest = d3.nest()\r\n\t\t.key(d => d.stroke)\r\n\t\t.entries(bars);\r\n\r\n\tctx.lineWidth = strokeWidth;\r\n\r\n\twickNest.forEach(outer => {\r\n\t\tvar { key, values } = outer;\r\n\t\tctx.strokeStyle = key;\r\n\t\tvalues.forEach(d => {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(d.x, d.y1);\r\n\t\t\tctx.lineTo(d.x, d.y2);\r\n\r\n\t\t\tctx.moveTo(d.openX1, d.openY);\r\n\t\t\tctx.lineTo(d.openX2, d.openY);\r\n\r\n\t\t\tctx.moveTo(d.closeX1, d.closeY);\r\n\t\t\tctx.lineTo(d.closeX2, d.closeY);\r\n\r\n\t\t\tctx.stroke();\r\n\t\t});\r\n\t});\r\n};\r\n\r\nOHLCSeries.getOHLCBars = (props, xAccessor, yAccessor, xScale, yScale, plotData) => {\r\n\tvar { classNames: classNamesProp, stroke: strokeProp } = props;\r\n\r\n\tvar strokeFunc = d3.functor(strokeProp);\r\n\tvar classNameFunc = d3.functor(classNamesProp);\r\n\r\n\tvar width = xScale(xAccessor(plotData[plotData.length - 1]))\r\n\t\t- xScale(xAccessor(plotData[0]));\r\n\r\n\tvar barWidth = Math.max(1, Math.round(width / (plotData.length - 1) / 2) - 1.5);\r\n\tvar strokeWidth = Math.min(barWidth, 6);\r\n\r\n\tvar bars = plotData\r\n\t\t\t.filter(d => isDefined(d.close))\r\n\t\t\t.map(d => {\r\n\t\t\t\tvar ohlc = yAccessor(d),\r\n\t\t\t\t\tx = Math.round(xScale(xAccessor(d))),\r\n\t\t\t\t\ty1 = yScale(ohlc.high),\r\n\t\t\t\t\ty2 = yScale(ohlc.low),\r\n\t\t\t\t\topenX1 = x - barWidth,\r\n\t\t\t\t\topenX2 = x + strokeWidth / 2,\r\n\t\t\t\t\topenY = yScale(ohlc.open),\r\n\t\t\t\t\tcloseX1 = x - strokeWidth / 2,\r\n\t\t\t\t\tcloseX2 = x + barWidth,\r\n\t\t\t\t\tcloseY = yScale(ohlc.close),\r\n\t\t\t\t\tclassName = classNameFunc(d),\r\n\t\t\t\t\tstroke = strokeFunc(d);\r\n\t\t\t\t// console.log(d);\r\n\t\t\t\treturn { x, y1, y2, openX1, openX2, openY, closeX1, closeX2, closeY, stroke, className };\r\n\t\t\t});\r\n\treturn { barWidth, strokeWidth, bars };\r\n};\r\n\r\nexport default wrap(OHLCSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/OHLCSeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nimport StackedBarSeries, { drawOnCanvasHelper, svgHelper } from \"./StackedBarSeries\";\r\nimport { identity } from \"../utils\";\r\n\r\n\r\nclass BarSeries extends Component {\r\n\trender() {\r\n\t\treturn <g className=\"react-stockcharts-bar-series\">\r\n\t\t\t{BarSeries.getBarsSVG(this.props)}\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nBarSeries.propTypes = {\r\n\tbaseAt: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.func,\r\n\t]).isRequired,\r\n\tstroke: PropTypes.bool.isRequired,\r\n\twidthRatio: PropTypes.number.isRequired,\r\n\topacity: PropTypes.number.isRequired,\r\n\tfill: PropTypes.oneOfType([\r\n\t\tPropTypes.func, PropTypes.string\r\n\t]).isRequired,\r\n\tclassName: PropTypes.oneOfType([\r\n\t\tPropTypes.func, PropTypes.string\r\n\t]).isRequired,\r\n\txAccessor: PropTypes.func,\r\n\tyAccessor: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n};\r\n\r\nBarSeries.defaultProps = StackedBarSeries.defaultProps;\r\n\r\nBarSeries.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { yAccessor, xAccessor } = props;\r\n\tdrawOnCanvasHelper(props, ctx, xScale, yScale, plotData, xAccessor, yAccessor, identity);\r\n};\r\n\r\nBarSeries.getBarsSVG = (props) => {\r\n\treturn svgHelper(props, identity);\r\n};\r\n\r\nexport default wrap(BarSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/BarSeries.jsx\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nimport { identity, hexToRGBA, first, last } from \"../utils\";\r\n\r\n\r\nclass StackedBarSeries extends Component {\r\n\trender() {\r\n\t\treturn <g className=\"react-stockcharts-bar-series\">\r\n\t\t\t{svgHelper(this.props, d3.layout.stack())}\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nStackedBarSeries.propTypes = {\r\n\tbaseAt: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.func,\r\n\t]).isRequired,\r\n\tdirection: PropTypes.oneOf([\"up\", \"down\"]).isRequired,\r\n\tstroke: PropTypes.bool.isRequired,\r\n\twidthRatio: PropTypes.number.isRequired,\r\n\topacity: PropTypes.number.isRequired,\r\n\tfill: PropTypes.oneOfType([\r\n\t\tPropTypes.func, PropTypes.string\r\n\t]).isRequired,\r\n\tclassName: PropTypes.oneOfType([\r\n\t\tPropTypes.func, PropTypes.string\r\n\t]).isRequired,\r\n\txAccessor: PropTypes.oneOfType([\r\n\t\tPropTypes.arrayOf(PropTypes.func), PropTypes.func\r\n\t]).isRequired,\r\n\tyAccessor: PropTypes.oneOfType([\r\n\t\tPropTypes.arrayOf(PropTypes.func), PropTypes.func\r\n\t]).isRequired,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n};\r\n\r\nStackedBarSeries.defaultProps = {\r\n\tbaseAt: (xScale, yScale/* , d*/) => first(yScale.range()),\r\n\tdirection: \"up\",\r\n\tclassName: \"bar\",\r\n\tstroke: false,\r\n\tfill: \"#4682B4\",\r\n\topacity: 1,\r\n\twidthRatio: 0.5,\r\n};\r\n\r\nStackedBarSeries.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\r\n\tvar { yAccessor, xAccessor } = props;\r\n\tdrawOnCanvasHelper(props, ctx, xScale, yScale, plotData, xAccessor, yAccessor, d3.layout.stack());\r\n};\r\n\r\nexport function drawOnCanvasHelper(props, ctx, xScale, yScale, plotData, xAccessor, yAccessor,\r\n\t\tstackFn, defaultPostAction = identity, postRotateAction = rotateXY) {\r\n\tvar { yAccessor, xAccessor } = props;\r\n\r\n\tvar bars = doStuff(props, plotData, xScale, yScale, stackFn, postRotateAction, defaultPostAction);\r\n\tdrawOnCanvas2(props, ctx, bars);\r\n}\r\n\r\nfunction convertToArray(item) {\r\n\treturn Array.isArray(item) ? item : [item];\r\n}\r\n\r\nexport function svgHelper(props, stackFn, defaultPostAction = identity, postRotateAction = rotateXY) {\r\n\tvar { xScale, yScale, plotData } = props;\r\n\tvar bars = doStuff(props, plotData, xScale, yScale, stackFn, postRotateAction, defaultPostAction);\r\n\r\n\treturn getBarsSVG2(props, bars);\r\n}\r\n\r\nfunction doStuff(props, plotData, xScale, yScale, stackFn, postRotateAction, defaultPostAction) {\r\n\tvar { yAccessor, xAccessor, swapScales } = props;\r\n\r\n\tvar modifiedYAccessor = swapScales ? convertToArray(xAccessor) : convertToArray(yAccessor);\r\n\tvar modifiedXAccessor = swapScales ? yAccessor : xAccessor;\r\n\r\n\tvar modifiedXScale = swapScales ? yScale : xScale;\r\n\tvar modifiedYScale = swapScales ? xScale : yScale;\r\n\r\n\tvar postProcessor =  swapScales ? postRotateAction : defaultPostAction;\r\n\r\n\tvar bars = getBars(props, modifiedXAccessor, modifiedYAccessor, modifiedXScale, modifiedYScale, plotData, stackFn, postProcessor);\r\n\treturn bars;\r\n}\r\n\r\nexport const rotateXY = (array) => array.map(each => {\r\n\treturn {\r\n\t\t...each,\r\n\t\tx: each.y,\r\n\t\ty: each.x,\r\n\t\theight: each.width,\r\n\t\twidth: each.height\r\n\t};\r\n});\r\n\r\nexport function getBarsSVG2(props, bars) {\r\n\t/* eslint-disable react/prop-types */\r\n\tvar { opacity } = props;\r\n\t/* eslint-disable react/prop-types */\r\n\r\n\treturn bars.map((d, idx) => {\r\n\t\tif (d.width <= 1) {\r\n\t\t\treturn <line key={idx} className={d.className}\r\n\t\t\t\t\t\tstroke={d.fill}\r\n\t\t\t\t\t\tx1={d.x} y1={d.y}\r\n\t\t\t\t\t\tx2={d.x} y2={d.y + d.height} />;\r\n\t\t}\r\n\t\treturn <rect key={idx} className={d.className}\r\n\t\t\t\t\tstroke={d.stroke}\r\n\t\t\t\t\tfill={d.fill}\r\n\t\t\t\t\tx={d.x}\r\n\t\t\t\t\ty={d.y}\r\n\t\t\t\t\twidth={d.width}\r\n\t\t\t\t\tfillOpacity={opacity}\r\n\t\t\t\t\theight={d.height} />;\r\n\t});\r\n}\r\n\r\nexport function drawOnCanvas2(props, ctx, bars) {\r\n\tvar { stroke } = props;\r\n\r\n\tvar nest = d3.nest()\r\n\t\t.key(d => d.fill)\r\n\t\t.entries(bars);\r\n\r\n\tnest.forEach(outer => {\r\n\t\tvar { key, values } = outer;\r\n\t\tif (values[0].width < 1) {\r\n\t\t\tctx.strokeStyle = key;\r\n\t\t} else {\r\n\t\t\tctx.strokeStyle = key;\r\n\t\t\tctx.fillStyle = hexToRGBA(key, props.opacity);\r\n\t\t}\r\n\t\tvalues.forEach(d => {\r\n\t\t\tif (d.width < 1) {\r\n\t\t\t\t/* <line key={idx} className={d.className}\r\n\t\t\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\t\t\tfill={fill}\r\n\t\t\t\t\t\t\tx1={d.x} y1={d.y}\r\n\t\t\t\t\t\t\tx2={d.x} y2={d.y + d.height} />*/\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(d.x, d.y);\r\n\t\t\t\tctx.lineTo(d.x, d.y + d.height);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t} else {\r\n\t\t\t\t/* <rect key={idx} className={d.className}\r\n\t\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\t\tfill={fill}\r\n\t\t\t\t\t\tx={d.x}\r\n\t\t\t\t\t\ty={d.y}\r\n\t\t\t\t\t\twidth={d.width}\r\n\t\t\t\t\t\theight={d.height} /> */\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(d.x, d.y, d.width, d.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tif (stroke) ctx.stroke();\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t});\r\n};\r\n\r\nexport function getBars(props, xAccessor, yAccessor, xScale, yScale, plotData, stack = identity, after = identity) {\r\n\tvar { baseAt, className, fill, stroke, widthRatio, spaceBetweenBar = 0 } = props;\r\n\r\n\tvar getClassName = d3.functor(className);\r\n\tvar getFill = d3.functor(fill);\r\n\tvar getBase = d3.functor(baseAt);\r\n\r\n\tvar width = Math.abs(xScale(xAccessor(last(plotData))) - xScale(xAccessor(first(plotData))));\r\n\tvar bw = (width / (plotData.length - 1) * widthRatio);\r\n\tvar barWidth = Math.round(bw);\r\n\r\n\tvar eachBarWidth = (barWidth - spaceBetweenBar * (yAccessor.length - 1)) / yAccessor.length;\r\n\r\n\tvar offset = (barWidth === 1 ? 0 : 0.5 * barWidth);\r\n\r\n\tvar layers = yAccessor\r\n\t\t.map((eachYAccessor, i) => plotData\r\n\t\t\t.map(d => ({\r\n\t\t\t\tseries: xAccessor(d),\r\n\t\t\t\tdatum: d,\r\n\t\t\t\tx: i,\r\n\t\t\t\ty: eachYAccessor(d),\r\n\t\t\t\tclassName: getClassName(d, i),\r\n\t\t\t\tstroke: stroke ? getFill(d, i) : \"none\",\r\n\t\t\t\tfill: getFill(d, i),\r\n\t\t\t}))\r\n\t\t);\r\n\r\n\tvar data = stack(layers);\r\n\r\n\tvar bars = d3.merge(data)\r\n\t\t\t.map(d => {\r\n\t\t\t\t// let baseValue = yScale.invert(getBase(xScale, yScale, d.datum));\r\n\t\t\t\tlet y = yScale(d.y + (d.y0 || 0));\r\n\t\t\t\t/* let h = isDefined(d.y0) && d.y0 !== 0 && !isNaN(d.y0)\r\n\t\t\t\t\t? yScale(d.y0) - y\r\n\t\t\t\t\t: getBase(xScale, yScale, d.datum) - yScale(d.y)*/\r\n\t\t\t\tvar h = getBase(xScale, yScale, d.datum) - yScale(d.y);\r\n\r\n\t\t\t\t// let h = ;\r\n\t\t\t\t// if (d.y < 0) h = -h;\r\n\t\t\t\tif (h < 0) {\r\n\t\t\t\t\ty = y + h;\r\n\t\t\t\t\th = -h;\r\n\t\t\t\t}\r\n\t\t\t\t/* console.log(d.series, d.datum.date, d.x,\r\n\t\t\t\t\tgetBase(xScale, yScale, d.datum), `d.y=${d.y}, d.y0=${d.y0}, y=${y}, h=${h}`)*/\r\n\t\t\t\treturn {\r\n\t\t\t\t\tclassName: d.className,\r\n\t\t\t\t\tstroke: d.stroke,\r\n\t\t\t\t\tfill: d.fill,\r\n\t\t\t\t\t// series: d.series,\r\n\t\t\t\t\t// i: d.x,\r\n\t\t\t\t\tx: xScale(d.series) - barWidth / 2,\r\n\t\t\t\t\ty: y,\r\n\t\t\t\t\tgroupOffset: offset - (d.x > 0 ? (eachBarWidth + spaceBetweenBar) * d.x : 0),\r\n\t\t\t\t\tgroupWidth: eachBarWidth,\r\n\t\t\t\t\toffset: barWidth / 2,\r\n\t\t\t\t\theight: h,\r\n\t\t\t\t\twidth: barWidth,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\treturn after(bars);\r\n};\r\n\r\nexport default wrap(StackedBarSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/StackedBarSeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nimport StackedBarSeries, { drawOnCanvasHelper, svgHelper } from \"./StackedBarSeries\";\r\nimport { identity } from \"../utils\";\r\n\r\nclass GroupedBarSeries extends Component {\r\n\trender() {\r\n\t\treturn <g className=\"react-stockcharts-grouped-bar-series\">\r\n\t\t\t{GroupedBarSeries.getBarsSVG(this.props)}\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nGroupedBarSeries.propTypes = {\r\n\tbaseAt: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.func,\r\n\t]).isRequired,\r\n\tdirection: PropTypes.oneOf([\"up\", \"down\"]).isRequired,\r\n\tstroke: PropTypes.bool.isRequired,\r\n\twidthRatio: PropTypes.number.isRequired,\r\n\topacity: PropTypes.number.isRequired,\r\n\tfill: PropTypes.oneOfType([\r\n\t\tPropTypes.func, PropTypes.string\r\n\t]).isRequired,\r\n\tclassName: PropTypes.oneOfType([\r\n\t\tPropTypes.func, PropTypes.string\r\n\t]).isRequired,\r\n\txAccessor: PropTypes.func,\r\n\tyAccessor: PropTypes.arrayOf(PropTypes.func),\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n};\r\n\r\nGroupedBarSeries.defaultProps = {\r\n\t...StackedBarSeries.defaultProps,\r\n\twidthRatio: 0.8,\r\n\tspaceBetweenBar: 5,\r\n};\r\n\r\nGroupedBarSeries.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { xAccessor, yAccessor } = props;\r\n\tdrawOnCanvasHelper(props, ctx, xScale, yScale, plotData, xAccessor, yAccessor,\r\n\t\tidentity, postProcessor);\r\n};\r\n\r\nGroupedBarSeries.getBarsSVG = (props) => {\r\n\treturn svgHelper(props, identity, postProcessor);\r\n};\r\n\r\nfunction postProcessor(array) {\r\n\treturn array.map(each => {\r\n\t\treturn {\r\n\t\t\t...each,\r\n\t\t\tx: each.x + each.offset - each.groupOffset,\r\n\t\t\twidth: each.groupWidth,\r\n\t\t};\r\n\t});\r\n}\r\n\r\nexport default wrap(GroupedBarSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/GroupedBarSeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nimport { isDefined, isNotDefined } from \"../utils\";\r\n\r\nclass KagiSeries extends Component {\r\n\trender() {\r\n\t\tvar { className, stroke, fill, strokeWidth } = this.props;\r\n\t\tvar { xAccessor, xScale, yScale, plotData } = this.props;\r\n\r\n\t\tvar paths = KagiSeries.helper(plotData, xAccessor).map((each, i) => {\r\n\t\t\tvar dataSeries = d3.svg.line()\r\n\t\t\t\t.x((item) => xScale(item[0]))\r\n\t\t\t\t.y((item) => yScale(item[1]))\r\n\t\t\t\t.interpolate(\"step-before\");\r\n\t\t\treturn (<path key={i} d={dataSeries(each.plot)} className={each.type}\r\n\t\t\t\tstroke={stroke[each.type]} fill={fill[each.type]} strokeWidth={strokeWidth} />);\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t{paths}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\nKagiSeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tstroke: PropTypes.string,\r\n\tfill: PropTypes.string,\r\n\tstrokeWidth: PropTypes.number.isRequired,\r\n\txAccessor: PropTypes.func,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n};\r\n\r\nKagiSeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-kagi\",\r\n\tstrokeWidth: 2,\r\n\tstroke: {\r\n\t\tyang: \"#6BA583\",\r\n\t\tyin: \"#E60000\"\r\n\t},\r\n\tfill: {\r\n\t\tyang: \"none\",\r\n\t\tyin: \"none\"\r\n\t},\r\n\tcurrentValueStroke: \"#000000\",\r\n};\r\n\r\nKagiSeries.yAccessor = (d) => ({ open: d.open, high: d.high, low: d.low, close: d.close });\r\n\r\nKagiSeries.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { xAccessor, stroke, strokeWidth, currentValueStroke } = props;\r\n\tvar begin = true;\r\n\r\n\tvar paths = KagiSeries.helper(plotData, xAccessor);\r\n\r\n\tpaths.forEach((each) => {\r\n\t\tctx.strokeStyle = stroke[each.type];\r\n\t\tctx.lineWidth = strokeWidth;\r\n\r\n\t\tctx.beginPath();\r\n\t\tvar prevX;\r\n\t\teach.plot.forEach(d => {\r\n\t\t\tvar [x, y] = [xScale(d[0]), yScale(d[1])];\r\n\t\t\tif (begin) {\r\n\t\t\t\tctx.moveTo(x, y);\r\n\t\t\t\tbegin = false;\r\n\t\t\t} else {\r\n\t\t\t\tif (isDefined(prevX)) {\r\n\t\t\t\t\tctx.lineTo(prevX, y);\r\n\t\t\t\t}\r\n\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t}\r\n\t\t\tprevX = x;\r\n\t\t\t// console.log(d);\r\n\r\n\t\t});\r\n\t\tctx.stroke();\r\n\t});\r\n\tvar lastPlot = paths[paths.length - 1].plot;\r\n\tvar last = lastPlot[lastPlot.length - 1];\r\n\tctx.beginPath();\r\n\t// ctx.strokeStyle = \"black\";\r\n\tctx.lineWidth = 1;\r\n\r\n\tvar [x, y1, y2] = [xScale(last[0]), yScale(last[2]), yScale(last[3])];\r\n\t// console.log(last, x, y);\r\n\tctx.moveTo(x, y1);\r\n\tctx.lineTo(x + 10, y1);\r\n\tctx.stroke();\r\n\r\n\tctx.beginPath();\r\n\tctx.strokeStyle = currentValueStroke;\r\n\tctx.moveTo(x - 10, y2);\r\n\tctx.lineTo(x, y2);\r\n\tctx.stroke();\r\n};\r\n\r\nKagiSeries.helper = (plotData, xAccessor) => {\r\n\tvar kagiLine = [];\r\n\tvar kagi = {};\r\n\tvar d = plotData[0];\r\n\tvar idx = xAccessor(d);\r\n\r\n\tfor (let i = 0; i < plotData.length; i++) {\r\n\t\td = plotData[i];\r\n\r\n\t\tif (isNotDefined(d.close)) continue;\r\n\t\tif (isNotDefined(kagi.type)) kagi.type = d.startAs;\r\n\t\tif (isNotDefined(kagi.plot)) kagi.plot = [];\r\n\r\n\t\tidx = xAccessor(d);\r\n\t\tkagi.plot.push([idx, d.open]);\r\n\r\n\t\tif (isDefined(d.changeTo)) {\r\n\t\t\tkagi.plot.push([idx, d.changePoint]);\r\n\t\t\tkagi.added = true;\r\n\t\t\tkagiLine.push(kagi);\r\n\r\n\t\t\tkagi = {\r\n\t\t\t\ttype: d.changeTo,\r\n\t\t\t\tplot: [],\r\n\t\t\t\tadded: false,\r\n\t\t\t};\r\n\t\t\tkagi.plot.push([idx, d.changePoint]);\r\n\t\t}\r\n\t}\r\n\r\n\tif (!kagi.added) {\r\n\t\tkagi.plot.push([idx, d.close, d.current, d.reverseAt]);\r\n\t\tkagiLine.push(kagi);\r\n\t}\r\n\r\n\t// console.log(d.reverseAt);\r\n\r\n\treturn kagiLine;\r\n};\r\n\r\nexport default wrap(KagiSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/KagiSeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { Component } from \"react\";\r\nimport wrap from \"./wrap\";\r\n\r\nimport { isDefined, isNotDefined } from \"../utils\";\r\n\r\nclass PointAndFigureSeries extends Component {\r\n\trender() {\r\n\t\tvar { props } = this;\r\n\t\tvar { xScale, xAccessor, yScale, yAccessor, plotData } = props;\r\n\r\n\t\tvar columns = PointAndFigureSeries.getColumns(xScale, xAccessor, yScale, yAccessor, plotData);\r\n\t\tvar { stroke, fill, strokeWidth, className } = props;\r\n\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t{columns.map((col, idx) => (\r\n\t\t\t\t\t<g key={idx} className={col.className} transform={`translate(${ col.offset[0] }, ${ col.offset[1] })`}>\r\n\t\t\t\t\t\t{col.boxes.map((box, i) => {\r\n\t\t\t\t\t\t\tif (col.direction > 0) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<g key={`${ idx }-${ i }`}>\r\n\t\t\t\t\t\t\t\t\t\t<line className=\"up\" strokeWidth={strokeWidth} stroke={stroke.up} fill={fill.up}\r\n\t\t\t\t\t\t\t\t\t\t\tx1={0} y1={box.open} x2={box.columnWidth} y2={box.close} />\r\n\t\t\t\t\t\t\t\t\t\t<line className=\"up\" strokeWidth={strokeWidth} stroke={stroke.up} fill={fill.up}\r\n\t\t\t\t\t\t\t\t\t\t\tx1={0} y1={box.close} x2={box.columnWidth} y2={box.open} />\r\n\t\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<ellipse key={`${ idx }-${ i }`}\r\n\t\t\t\t\t\t\t\t\tclassName=\"down\" strokeWidth={strokeWidth} stroke={stroke.down} fill={fill.down}\r\n\t\t\t\t\t\t\t\t\tcx={box.columnWidth / 2} cy={(box.open + box.close) / 2}\r\n\t\t\t\t\t\t\t\t\trx={box.columnWidth / 2} ry={box.boxHeight / 2} />\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</g>\r\n\t\t\t\t))}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nPointAndFigureSeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-point-and-figure\",\r\n\tstrokeWidth: 1,\r\n\tstroke: {\r\n\t\tup: \"#6BA583\",\r\n\t\tdown: \"#FF0000\"\r\n\t},\r\n\tfill: {\r\n\t\tup: \"none\",\r\n\t\tdown: \"none\"\r\n\t},\r\n};\r\n\r\nPointAndFigureSeries.yAccessor = (d) => ({ open: d.open, high: d.high, low: d.low, close: d.close });\r\n\r\nPointAndFigureSeries.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { xAccessor, yAccessor } = props;\r\n\r\n\tvar columns = PointAndFigureSeries.getColumns(xScale, xAccessor, yScale, yAccessor, plotData);\r\n\tvar { stroke, fill, strokeWidth } = props;\r\n\r\n\tctx.lineWidth = strokeWidth;\r\n\r\n\tcolumns.forEach(col => {\r\n\t\tlet [offsetX, offsetY] = col.offset;\r\n\t\tcol.boxes.forEach(box => {\r\n\t\t\tif (col.direction > 0) {\r\n\t\t\t\tctx.fillStyle = fill.up;\r\n\t\t\t\tctx.strokeStyle = stroke.up;\r\n\r\n\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\tctx.moveTo(offsetX, offsetY + box.open);\r\n\t\t\t\tctx.lineTo(offsetX + box.columnWidth, offsetY + box.close);\r\n\t\t\t\tctx.moveTo(offsetX, offsetY + box.close);\r\n\t\t\t\tctx.lineTo(offsetX + box.columnWidth, offsetY + box.open);\r\n\r\n\t\t\t\tctx.stroke();\r\n\t\t\t} else {\r\n\t\t\t\tctx.fillStyle = fill.down;\r\n\t\t\t\tctx.strokeStyle = stroke.down;\r\n\r\n\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\tlet [x, y] = [offsetX + box.columnWidth / 2, offsetY + box.open + box.boxHeight / 2];\r\n\t\t\t\tlet [rx, ry] = [box.columnWidth / 2, box.boxHeight / 2];\r\n\r\n\t\t\t\tctx.ellipse(x, y, rx, ry, 0, 0, 2 * Math.PI);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tctx.stroke();\r\n};\r\n\r\nPointAndFigureSeries.getColumns = (xScale, xAccessor, yScale, yAccessor, plotData) => {\r\n\r\n\tvar width = xScale(xAccessor(plotData[plotData.length - 1]))\r\n\t\t- xScale(xAccessor(plotData[0]));\r\n\r\n\tvar columnWidth = (width / (plotData.length - 1));\r\n\r\n\tvar anyBox, j = 0;\r\n\twhile (isNotDefined(anyBox)) {\r\n\t\tif (isDefined(plotData[j].close)) {\r\n\t\t\tanyBox = plotData[j].boxes[0];\r\n\t\t}\r\n\t\tj++;\r\n\t}\r\n\r\n\tvar boxHeight = Math.abs(yScale(anyBox.open) - yScale(anyBox.close));\r\n\r\n\tvar columns = plotData\r\n\t\t\t.filter(d => isDefined(d.close))\r\n\t\t\t.map(d => {\r\n\t\t\t\tvar boxes = d.boxes.map((box) => ({\r\n\t\t\t\t\tcolumnWidth: columnWidth,\r\n\t\t\t\t\tboxHeight: boxHeight,\r\n\t\t\t\t\topen: yScale(box.open),\r\n\t\t\t\t\tclose: yScale(box.close),\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tvar xOffset = (xScale(xAccessor(d)) - (columnWidth / 2));\r\n\t\t\t\treturn {\r\n\t\t\t\t\tboxes: boxes,\r\n\t\t\t\t\tdirection: d.direction,\r\n\t\t\t\t\toffset: [xOffset, 0],\r\n\t\t\t\t};\r\n\t\t\t});\r\n\treturn columns;\r\n};\r\n\r\nexport default wrap(PointAndFigureSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/PointAndFigureSeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport wrap from \"./wrap\";\r\n\r\nimport { isDefined } from \"../utils\";\r\n\r\nclass RenkoSeries extends Component {\r\n\trender() {\r\n\t\tvar { props } = this;\r\n\t\tvar { plotData, xScale, xAccessor, yScale, yAccessor } = props;\r\n\r\n\t\tvar candles = RenkoSeries.getRenko(props, plotData, xScale, xAccessor, yScale, yAccessor)\r\n\t\t\t.map((each, idx) => (<rect key={idx} className={each.className}\r\n\t\t\t\t\t\t\t\tfill={each.fill}\r\n\t\t\t\t\t\t\t\tx={each.x}\r\n\t\t\t\t\t\t\t\ty={each.y}\r\n\t\t\t\t\t\t\t\twidth={each.width}\r\n\t\t\t\t\t\t\t\theight={each.height} />));\r\n\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t<g className=\"candle\">\r\n\t\t\t\t\t{candles}\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nRenkoSeries.propTypes = {\r\n\tclassNames: PropTypes.shape({\r\n\t\tup: PropTypes.string,\r\n\t\tdown: PropTypes.string\r\n\t}),\r\n\tstroke: PropTypes.shape({\r\n\t\tup: PropTypes.string,\r\n\t\tdown: PropTypes.string\r\n\t}),\r\n\tfill: PropTypes.shape({\r\n\t\tup: PropTypes.string,\r\n\t\tdown: PropTypes.string\r\n\t}),\r\n};\r\n\r\nRenkoSeries.defaultProps = {\r\n\tclassNames: {\r\n\t\tup: \"up\",\r\n\t\tdown: \"down\"\r\n\t},\r\n\tstroke: {\r\n\t\tup: \"none\",\r\n\t\tdown: \"none\"\r\n\t},\r\n\tfill: {\r\n\t\tup: \"#6BA583\",\r\n\t\tdown: \"#E60000\",\r\n\t\tpartial: \"#4682B4\",\r\n\t},\r\n\tyAccessor: d => ({ open: d.open, high: d.high, low: d.low, close: d.close }),\r\n};\r\n\r\nRenkoSeries.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { xAccessor, yAccessor } = props;\r\n\r\n\tvar renko = RenkoSeries.getRenko(props, plotData, xScale, xAccessor, yScale, yAccessor);\r\n\trenko.forEach(d => {\r\n\t\tctx.beginPath();\r\n\r\n\t\tctx.strokeStyle = d.stroke;\r\n\t\tctx.fillStyle = d.fill;\r\n\r\n\t\tctx.rect(d.x, d.y, d.width, d.height);\r\n\t\tctx.closePath();\r\n\t\tctx.fill();\r\n\t});\r\n};\r\n\r\nRenkoSeries.getRenko = (props, plotData, xScale, xAccessor, yScale, yAccessor) => {\r\n\tvar { classNames, fill } = props;\r\n\tvar width = xScale(xAccessor(plotData[plotData.length - 1]))\r\n\t\t- xScale(xAccessor(plotData[0]));\r\n\r\n\tvar candleWidth = (width / (plotData.length - 1));\r\n\tvar candles = plotData\r\n\t\t\t.filter(d => isDefined(d.close))\r\n\t\t\t.map(d => {\r\n\t\t\t\tvar ohlc = yAccessor(d);\r\n\t\t\t\tvar x = xScale(xAccessor(d)) - 0.5 * candleWidth,\r\n\t\t\t\t\ty = yScale(Math.max(ohlc.open, ohlc.close)),\r\n\t\t\t\t\theight = Math.abs(yScale(ohlc.open) - yScale(ohlc.close)),\r\n\t\t\t\t\tclassName = (ohlc.open <= ohlc.close) ? classNames.up : classNames.down,\r\n\t\t\t\t\tsvgfill = (ohlc.open <= ohlc.close) ? fill.up : fill.down;\r\n\r\n\t\t\t\tif (!d.fullyFormed) {\r\n\t\t\t\t\tsvgfill = fill.partial;\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tclassName: className,\r\n\t\t\t\t\tfill: svgfill,\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: candleWidth,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\treturn candles;\r\n};\r\n\r\nexport default wrap(RenkoSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/RenkoSeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport BarSeries from \"./BarSeries\";\r\nimport Line from \"./Line\";\r\nimport StraightLine from \"./StraightLine\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nclass MACDSeries extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.yAccessorForMACD = this.yAccessorForMACD.bind(this);\r\n\t\tthis.yAccessorForSignal = this.yAccessorForSignal.bind(this);\r\n\t\tthis.yAccessorForDivergence = this.yAccessorForDivergence.bind(this);\r\n\t\tthis.yAccessorForDivergenceBase = this.yAccessorForDivergenceBase.bind(this);\r\n\t}\r\n\tyAccessorForMACD(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && yAccessor(d).macd;\r\n\t}\r\n\tyAccessorForSignal(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && yAccessor(d).signal;\r\n\t}\r\n\tyAccessorForDivergence(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && yAccessor(d).divergence;\r\n\t}\r\n\tyAccessorForDivergenceBase(xScale, yScale/* , d */) {\r\n\t\treturn yScale(0);\r\n\t}\r\n\trender() {\r\n\t\tvar { className, xScale, yScale, xAccessor, plotData, type, opacity, divergenceStroke, calculator } = this.props;\r\n\t\tvar stroke = calculator.stroke();\r\n\t\tvar fill = calculator.fill();\r\n\t\t// console.log(this.props.yAccessor)\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t<Line\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={this.yAccessorForMACD}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tstroke={stroke.macd} fill=\"none\"\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t\t<Line\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={this.yAccessorForSignal}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tstroke={stroke.signal} fill=\"none\"\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t\t<BarSeries\r\n\t\t\t\t\tbaseAt={this.yAccessorForDivergenceBase}\r\n\t\t\t\t\tclassName=\"macd-divergence\"\r\n\t\t\t\t\tstroke={divergenceStroke} fill={fill.divergence} opacity={opacity}\r\n\t\t\t\t\tyAccessor={this.yAccessorForDivergence} />\r\n\t\t\t\t{MACDSeries.getHorizontalLine(this.props)}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMACDSeries.getHorizontalLine = (props) => {\r\n\r\n\t/* eslint-disable react/prop-types */\r\n\tvar { xScale, yScale, xAccessor, yAccessor, plotData, type, zeroLineStroke, zeroLineOpacity } = props;\r\n\t/* eslint-enable react/prop-types */\r\n\r\n\treturn <StraightLine\r\n\t\tstroke={zeroLineStroke} opacity={zeroLineOpacity} type={type}\r\n\t\txScale={xScale} yScale={yScale}\r\n\t\txAccessor={xAccessor} yAccessor={yAccessor}\r\n\t\tplotData={plotData}\r\n\t\tyValue={0} />;\r\n};\r\n\r\nMACDSeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\txAccessor: PropTypes.func,\r\n\tcalculator: PropTypes.func.isRequired,\r\n\tplotData: PropTypes.array,\r\n\ttype: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\tdivergenceStroke: PropTypes.bool,\r\n};\r\n\r\nMACDSeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-macd-series\",\r\n\tzeroLineStroke: \"#000000\",\r\n\tzeroLineOpacity: 0.3,\r\n\topacity: 0.6,\r\n\tdivergenceStroke: false,\r\n};\r\n\r\nexport default wrap(MACDSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/MACDSeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport wrap from \"./wrap\";\r\nimport { hexToRGBA } from \"../utils\";\r\n\r\nclass StraightLine extends Component {\r\n\trender() {\r\n\t\tvar { props } = this;\r\n\t\tvar { stroke, className, opacity } = props;\r\n\t\tvar { xScale, yScale, xAccessor, plotData, yValue } = props;\r\n\r\n\t\tvar first = xAccessor(plotData[0]);\r\n\t\tvar last = xAccessor(plotData[plotData.length - 1]);\r\n\r\n\t\treturn (\r\n\t\t\t<line className={className}\r\n\t\t\t\tstroke={stroke} opacity={opacity}\r\n\t\t\t\tx1={xScale(first)} y1={yScale(yValue)}\r\n\t\t\t\tx2={xScale(last)} y2={yScale(yValue)} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nStraightLine.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\txScale: PropTypes.func.isRequired,\r\n\tyScale: PropTypes.func.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\tstroke: PropTypes.string,\r\n\topacity: PropTypes.number.isRequired,\r\n\tyValue: PropTypes.number.isRequired,\r\n};\r\n\r\nStraightLine.defaultProps = {\r\n\tclassName: \"line \",\r\n\tstroke: \"#000000\",\r\n\topacity: 0.5,\r\n};\r\n\r\nStraightLine.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\r\n\tvar { stroke, opacity } = props;\r\n\tvar { xAccessor, yValue } = props;\r\n\r\n\tvar first = xAccessor(plotData[0]);\r\n\tvar last = xAccessor(plotData[plotData.length - 1]);\r\n\r\n\tctx.beginPath();\r\n\r\n\tctx.strokeStyle = hexToRGBA(stroke, opacity);\r\n\r\n\tctx.moveTo(xScale(first), yScale(yValue));\r\n\tctx.lineTo(xScale(last), yScale(yValue));\r\n\tctx.stroke();\r\n};\r\n\r\nexport default wrap(StraightLine);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/StraightLine.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport Line from \"./Line\";\r\nimport Area from \"./Area\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nclass BollingerSeries extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.yAccessorForTop = this.yAccessorForTop.bind(this);\r\n\t\tthis.yAccessorForMiddle = this.yAccessorForMiddle.bind(this);\r\n\t\tthis.yAccessorForBottom = this.yAccessorForBottom.bind(this);\r\n\t\tthis.yAccessorForScalledBottom = this.yAccessorForScalledBottom.bind(this);\r\n\t}\r\n\tyAccessorForTop(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && yAccessor(d).top;\r\n\t}\r\n\tyAccessorForMiddle(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && yAccessor(d).middle;\r\n\t}\r\n\tyAccessorForBottom(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && yAccessor(d).bottom;\r\n\t}\r\n\tyAccessorForScalledBottom(scale, d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn scale(yAccessor(d) && yAccessor(d).bottom);\r\n\t}\r\n\trender() {\r\n\t\tvar { xScale, yScale, xAccessor, plotData, type } = this.props;\r\n\t\tvar { calculator, areaClassName, className, opacity } = this.props;\r\n\r\n\t\tvar stroke = calculator.stroke();\r\n\t\tvar fill = calculator.fill();\r\n\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t<Line\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={this.yAccessorForTop}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tstroke={stroke.top} fill=\"none\"\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t\t<Line\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={this.yAccessorForMiddle}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tstroke={stroke.middle} fill=\"none\"\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t\t<Line\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={this.yAccessorForBottom}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tstroke={stroke.bottom} fill=\"none\"\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t\t<Area\r\n\t\t\t\t\tclassName={areaClassName}\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={this.yAccessorForTop}\r\n\t\t\t\t\tbase={this.yAccessorForScalledBottom}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tstroke=\"none\" fill={fill} opacity={opacity}\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nBollingerSeries.propTypes = {\r\n\txAccessor: PropTypes.func,\r\n\tcalculator: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n\tclassName: PropTypes.string,\r\n\tareaClassName: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\ttype: PropTypes.string,\r\n};\r\n\r\nBollingerSeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-bollinger-band-series\",\r\n\tareaClassName: \"react-stockcharts-bollinger-band-series-area\",\r\n\topacity: 0.2\r\n};\r\n\r\nexport default wrap(BollingerSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/BollingerSeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport Line from \"./Line\";\r\nimport StraightLine from \"./StraightLine\";\r\nimport wrap from \"./wrap\";\r\n\r\nclass RSISeries extends Component {\r\n\trender() {\r\n\t\tvar { className, xScale, yScale, xAccessor, calculator, plotData, stroke, type } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\tvar overSold = calculator.overSold();\r\n\t\tvar middle = calculator.middle();\r\n\t\tvar overBought = calculator.overBought();\r\n\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t<Line\r\n\t\t\t\t\tclassName={className}\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={yAccessor}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tstroke={stroke.line} fill=\"none\"\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t\t{RSISeries.getHorizontalLine(this.props, overSold, stroke.top)}\r\n\t\t\t\t{RSISeries.getHorizontalLine(this.props, middle, stroke.middle)}\r\n\t\t\t\t{RSISeries.getHorizontalLine(this.props, overBought, stroke.bottom)}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nRSISeries.getHorizontalLine = (props, yValue, stroke) => {\r\n\t/* eslint-disable react/prop-types */\r\n\tlet { xScale, yScale, xAccessor, yAccessor, plotData, type } = props;\r\n\t/* eslint-enable react/prop-types */\r\n\r\n\treturn <StraightLine\r\n\t\tstroke={stroke} opacity={0.3} type={type}\r\n\t\txScale={xScale} yScale={yScale}\r\n\t\txAccessor={xAccessor} yAccessor={yAccessor}\r\n\t\tplotData={plotData}\r\n\t\tyValue={yValue} />;\r\n};\r\n\r\nRSISeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\r\n\tcalculator: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\txAccessor: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n\tstroke: PropTypes.object,\r\n\ttype: PropTypes.string,\r\n};\r\n\r\nRSISeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-rsi-series\",\r\n\tstroke: {\r\n\t\tline: \"#000000\",\r\n\t\ttop: \"#964B00\",\r\n\t\tmiddle: \"#000000\",\r\n\t\tbottom: \"#964B00\"\r\n\t}\r\n};\r\n\r\nexport default wrap(RSISeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/RSISeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nimport Line from \"./Line\";\r\nimport StraightLine from \"./StraightLine\";\r\n\r\nclass StochasticSeries extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.yAccessorForD = this.yAccessorForD.bind(this);\r\n\t\tthis.yAccessorForK = this.yAccessorForK.bind(this);\r\n\t}\r\n\tyAccessorForD(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && yAccessor(d).D;\r\n\t}\r\n\tyAccessorForK(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && yAccessor(d).K;\r\n\t}\r\n\trender() {\r\n\t\tvar { className, calculator, xScale, yScale, xAccessor, plotData, stroke, type } = this.props;\r\n\t\tvar seriesStroke = calculator.stroke();\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t<Line\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={this.yAccessorForD}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tstroke={seriesStroke.D} fill=\"none\"\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t\t<Line\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\txAccessor={xAccessor} yAccessor={this.yAccessorForK}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tstroke={seriesStroke.K} fill=\"none\"\r\n\t\t\t\t\ttype={type} />\r\n\t\t\t\t{StochasticSeries.getHorizontalLine(this.props, calculator.overSold(), stroke.top)}\r\n\t\t\t\t{StochasticSeries.getHorizontalLine(this.props, calculator.middle(), stroke.middle)}\r\n\t\t\t\t{StochasticSeries.getHorizontalLine(this.props, calculator.overBought(), stroke.bottom)}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nStochasticSeries.getHorizontalLine = (props, yValue, stroke) => {\r\n\r\n\t/* eslint-disable react/prop-types */\r\n\tvar { xScale, yScale, xAccessor, yAccessor, plotData, type } = props;\r\n\t/* eslint-enable react/prop-types */\r\n\r\n\treturn <StraightLine\r\n\t\tstroke={stroke} opacity={0.3} type={type}\r\n\t\txScale={xScale} yScale={yScale}\r\n\t\txAccessor={xAccessor} yAccessor={yAccessor}\r\n\t\tplotData={plotData}\r\n\t\tyValue={yValue} />;\r\n};\r\n\r\nStochasticSeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tcalculator: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\txAccessor: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n\tstroke: PropTypes.object,\r\n\ttype: PropTypes.string,\r\n};\r\n\r\nStochasticSeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-stochastic-series\",\r\n\tstroke: {\r\n\t\ttop: \"#964B00\",\r\n\t\tmiddle: \"#000000\",\r\n\t\tbottom: \"#964B00\"\r\n\t}\r\n};\r\n\r\nexport default wrap(StochasticSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/StochasticSeries.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport OverlayBarSeries from \"./OverlayBarSeries\";\r\nimport StraightLine from \"./StraightLine\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nclass ElderRaySeries extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.yAccessorTop = this.yAccessorTop.bind(this);\r\n\t\tthis.yAccessorBullTop = this.yAccessorBullTop.bind(this);\r\n\t\tthis.yAccessorBearTop = this.yAccessorBearTop.bind(this);\r\n\t\tthis.yAccessorBullBottom = this.yAccessorBullBottom.bind(this);\r\n\t\tthis.yAccessorBearBottom = this.yAccessorBearBottom.bind(this);\r\n\t\tthis.yAccessorForBarBase = this.yAccessorForBarBase.bind(this);\r\n\t}\r\n\tyAccessorTop(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && Math.max(yAccessor(d).bullPower, 0);\r\n\t}\r\n\tyAccessorBullTop(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && (yAccessor(d).bullPower > 0 ? yAccessor(d).bullPower : undefined);\r\n\t}\r\n\tyAccessorBearTop(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && (yAccessor(d).bearPower > 0 ? yAccessor(d).bearPower : undefined);\r\n\t}\r\n\tyAccessorBullBottom(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && (yAccessor(d).bullPower < 0 ? 0 : undefined);\r\n\t}\r\n\tyAccessorBearBottom(d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\treturn yAccessor(d) && (yAccessor(d).bullPower < 0\r\n\t\t\t\t|| yAccessor(d).bullPower * yAccessor(d).bearPower < 0 // bullPower is +ve and bearPower is -ve\r\n\t\t\t? Math.min(0, yAccessor(d).bullPower) : undefined);\r\n\t}\r\n\tyAccessorForBarBase(xScale, yScale, d) {\r\n\t\tvar { calculator } = this.props;\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\tvar y = yAccessor(d) && Math.min(yAccessor(d).bearPower, 0);\r\n\t\treturn yScale(y);\r\n\t}\r\n\tfillForEachBar(d, yAccessorNumber) {\r\n\t\treturn yAccessorNumber % 2 === 0 ? \"#6BA583\" : \"#FF0000\";\r\n\t}\r\n\trender() {\r\n\t\tvar { className, xScale, yScale, plotData, opacity } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t<OverlayBarSeries\r\n\t\t\t\t\txScale={xScale} yScale={yScale}\r\n\t\t\t\t\tbaseAt={this.yAccessorForBarBase}\r\n\t\t\t\t\tclassName=\"elderray-bar\"\r\n\t\t\t\t\tstroke={false} fill={this.fillForEachBar}\r\n\t\t\t\t\topacity={opacity}\r\n\t\t\t\t\tplotData={plotData}\r\n\t\t\t\t\tyAccessor={[this.yAccessorBullTop, this.yAccessorBearTop, this.yAccessorBullBottom, this.yAccessorBearBottom]} />\r\n\t\t\t\t<StraightLine yValue={0} />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nElderRaySeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\txAccessor: PropTypes.func,\r\n\tcalculator: PropTypes.func.isRequired,\r\n\tplotData: PropTypes.array,\r\n\ttype: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\tdivergenceStroke: PropTypes.bool,\r\n};\r\n\r\nElderRaySeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-elderray-series\",\r\n\tzeroLineStroke: \"#000000\",\r\n\tzeroLineOpacity: 0.3,\r\n\topacity: 1,\r\n\tdivergenceStroke: false,\r\n};\r\n\r\nexport default wrap(ElderRaySeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/ElderRaySeries.jsx\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport wrap from \"./wrap\";\r\n\r\nimport { drawOnCanvas2, getBarsSVG2 } from \"./StackedBarSeries\";\r\nimport { isDefined, isNotDefined, first, last } from \"../utils\";\r\n\r\nclass OverlayBarSeries extends Component {\r\n\trender() {\r\n\t\tvar { props } = this;\r\n\t\treturn <g className=\"react-stockcharts-bar-series\">\r\n\t\t\t{OverlayBarSeries.getBarsSVG(props)}\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nOverlayBarSeries.propTypes = {\r\n\tbaseAt: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.func,\r\n\t]).isRequired,\r\n\tdirection: PropTypes.oneOf([\"up\", \"down\"]).isRequired,\r\n\tstroke: PropTypes.bool.isRequired,\r\n\twidthRatio: PropTypes.number.isRequired,\r\n\topacity: PropTypes.number.isRequired,\r\n\tfill: PropTypes.oneOfType([\r\n\t\tPropTypes.func, PropTypes.string\r\n\t]).isRequired,\r\n\tclassName: PropTypes.oneOfType([\r\n\t\tPropTypes.func, PropTypes.string\r\n\t]).isRequired,\r\n\txAccessor: PropTypes.func,\r\n\tyAccessor: PropTypes.arrayOf(PropTypes.func),\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tplotData: PropTypes.array,\r\n};\r\n\r\nOverlayBarSeries.defaultProps = {\r\n\tbaseAt: (xScale, yScale/* , d*/) => first(yScale.range()),\r\n\tdirection: \"up\",\r\n\tclassName: \"bar\",\r\n\tstroke: false,\r\n\tfill: \"#4682B4\",\r\n\topacity: 1,\r\n\twidthRatio: 0.5,\r\n};\r\n\r\nOverlayBarSeries.drawOnCanvas = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { xAccessor, yAccessor } = props;\r\n\r\n\tvar bars = OverlayBarSeries.getBars(props, xAccessor, yAccessor, xScale, yScale, plotData);\r\n\r\n\t// console.log(bars);\r\n\tdrawOnCanvas2(props, ctx, bars);\r\n};\r\n\r\nOverlayBarSeries.getBarsSVG = (props) => {\r\n\r\n\t/* eslint-disable react/prop-types */\r\n\tvar { xAccessor, yAccessor, xScale, yScale, plotData } = props;\r\n\t/* eslint-disable react/prop-types */\r\n\r\n\tvar bars = OverlayBarSeries.getBars(props, xAccessor, yAccessor, xScale, yScale, plotData);\r\n\treturn getBarsSVG2(props, bars);\r\n};\r\n\r\nOverlayBarSeries.getBars = (props, xAccessor, yAccessor, xScale, yScale, plotData) => {\r\n\tvar { baseAt, className, fill, stroke, widthRatio } = props;\r\n\r\n\tvar getClassName = d3.functor(className);\r\n\tvar getFill = d3.functor(fill);\r\n\tvar getBase = d3.functor(baseAt);\r\n\r\n\tvar width = Math.abs(xScale(xAccessor(last(plotData))) - xScale(xAccessor(first(plotData))));\r\n\r\n\r\n\tvar bw = (width / (plotData.length - 1) * widthRatio);\r\n\tvar barWidth = Math.round(bw);\r\n\tvar offset = (barWidth === 1 ? 0 : 0.5 * barWidth);\r\n\r\n\t// console.log(xScale.domain(), yScale.domain());\r\n\r\n\tvar bars = plotData\r\n\t\t\t.map(d => {\r\n\t\t\t\tvar innerBars = yAccessor.map((eachYAccessor, i) => {\r\n\t\t\t\t\tvar yValue = eachYAccessor(d);\r\n\t\t\t\t\tif (isNotDefined(yValue)) return undefined;\r\n\r\n\t\t\t\t\tvar xValue = xAccessor(d);\r\n\t\t\t\t\tvar x = Math.round(xScale(xValue)) - offset;\r\n\t\t\t\t\tvar y = yScale(yValue);\r\n\t\t\t\t\t// console.log(yValue, y, xValue, x)\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\twidth: barWidth,\r\n\t\t\t\t\t\tx: x,\r\n\t\t\t\t\t\ty: y,\r\n\t\t\t\t\t\tclassName: getClassName(d, i),\r\n\t\t\t\t\t\tstroke: stroke ? getFill(d, i) : \"none\",\r\n\t\t\t\t\t\tfill: getFill(d, i),\r\n\t\t\t\t\t\ti,\r\n\t\t\t\t\t};\r\n\t\t\t\t}).filter(yValue => isDefined(yValue));\r\n\r\n\t\t\t\tvar b = getBase(xScale, yScale, d);\r\n\t\t\t\tvar h;\r\n\t\t\t\tfor (var i = innerBars.length - 1; i >= 0; i--) {\r\n\t\t\t\t\th = b - innerBars[i].y;\r\n\t\t\t\t\tif (h < 0) {\r\n\t\t\t\t\t\tinnerBars[i].y = b;\r\n\t\t\t\t\t\th = -1 * h;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinnerBars[i].height = h;\r\n\t\t\t\t\tb = innerBars[i].y;\r\n\t\t\t\t};\r\n\t\t\t\treturn innerBars;\r\n\t\t\t});\r\n\r\n\treturn d3.merge(bars);\r\n};\r\n\r\n// export { OverlayBarSeries };\r\nexport default wrap(OverlayBarSeries);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/series/OverlayBarSeries.jsx\n **/","import financeEODCalculator from \"./financeEODCalculator\";\r\nimport financeEODDiscontiniousScale from \"./financeEODDiscontiniousScale\";\r\nimport eodIntervalCalculator from \"./eodIntervalCalculator\";\r\nimport identityIntervalCalculator from \"./identityIntervalCalculator\";\r\n\r\nexport {\r\n\tfinanceEODCalculator,\r\n\tfinanceEODDiscontiniousScale,\r\n\tidentityIntervalCalculator,\r\n\teodIntervalCalculator,\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/scale/index.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { isDefined, isNotDefined } from \"../utils\";\r\n\r\nexport default function financeEODScale(indexAccessor = d => d.idx, dateAccessor = d => d.date, data = [0, 1], backingLinearScale = d3.scale.linear()) {\r\n\r\n\tvar timeScaleSteps = [\r\n\t\t{ step: 864e5, f: function(d) { return isDefined(dateAccessor(d)) && true; } },  // 1-day\r\n\t\t{ step: 1728e5, f: function(d, i) { return isDefined(dateAccessor(d)) && (i % 2 === 0); } }, // 2-day\r\n\t\t{ step: 8380e5, f: function(d, i, arr) {\r\n\t\t\tif (d.startOfMonth) return true;\r\n\t\t\tvar list = [];\r\n\t\t\tif ((i - 2) >= 0) list.push(arr[i - 2]);\r\n\t\t\tif ((i - 1) >= 0) list.push(arr[i - 1]);\r\n\t\t\tlist.push(arr[i]);\r\n\t\t\tif ((i + 1) <= arr.length - 1) list.push(arr[i + 1]);\r\n\t\t\tif ((i + 2) <= arr.length - 1) list.push(arr[i + 2]);\r\n\t\t\tvar sm = list\r\n\t\t\t\t\t\t.map(function(each) { return each.startOfMonth; })\r\n\t\t\t\t\t\t.reduce(function(prev, curr) {\r\n\t\t\t\t\t\t\treturn prev || curr;\r\n\t\t\t\t\t\t});\r\n\t\t\treturn sm ? false : d.startOfWeek;\r\n\t\t} },  // 1-week\r\n\t\t{ step: 3525e6, f: function(d) {return d.startOfMonth; } },  // 1-month\r\n\t\t{ step: 7776e6, f: function(d) {return d.startOfQuarter; } },  // 3-month\r\n\t\t{ step: 31536e6, f: function(d) {return d.startOfYear; } },  // 1-year\r\n\t\t{ step: 91536e15, f: function(d) {return isDefined(dateAccessor(d)) && (d.startOfYear && dateAccessor(d).getFullYear() % 2 === 0); } }  // 2-year\r\n\t];\r\n\tvar timeScaleStepsBisector = d3.bisector(function(d) { return d.step; }).left;\r\n\tvar bisectByIndex = d3.bisector(function(d) { return indexAccessor(d); }).left;\r\n\tvar tickFormat = [\r\n\t\t[d3.time.format(\"%Y\"), function(d) { return d.startOfYear; }],\r\n\t\t[d3.time.format(\"%b %Y\"), function(d) { return d.startOfQuarter; }],\r\n\t\t[d3.time.format(\"%b\"), function(d) { return d.startOfMonth; }],\r\n\t\t[d3.time.format(\"%d %b\"), function(d) { return d.startOfWeek; }],\r\n\t\t[d3.time.format(\"%a %d \"), function(/* d */) { return true; }]\r\n\t];\r\n\tfunction formater(d) {\r\n\t\tvar i = 0, format = tickFormat[i];\r\n\t\twhile (!format[1](d)) format = tickFormat[++i];\r\n\t\tvar tickDisplay = format[0](dateAccessor(d));\r\n\t\t// console.log(t;ickDisplay);\r\n\t\treturn tickDisplay;\r\n\t}\r\n\r\n\tfunction scale(x) {\r\n\t\treturn backingLinearScale(x);\r\n\t}\r\n\tscale.isPolyLinear = function() {\r\n\t\treturn true;\r\n\t};\r\n\tscale.invert = function(x) {\r\n\t\treturn backingLinearScale.invert(x);\r\n\t};\r\n\tscale.data = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn data;\r\n\t\t} else {\r\n\t\t\tdata = x;\r\n\t\t\t// this.domain([data.first().index, data.last().index]);\r\n\t\t\tthis.domain([indexAccessor(data[0]), indexAccessor(data[data.length - 1])]);\r\n\t\t\treturn scale;\r\n\t\t}\r\n\t};\r\n\tscale.indexAccessor = function(x) {\r\n\t\tif (!arguments.length) return indexAccessor;\r\n\t\tindexAccessor = x;\r\n\t\treturn scale;\r\n\t};\r\n\tscale.dateAccessor = function(x) {\r\n\t\tif (!arguments.length) return dateAccessor;\r\n\t\tdateAccessor = x;\r\n\t\treturn scale;\r\n\t};\r\n\tscale.domain = function(x) {\r\n\t\tif (!arguments.length) return backingLinearScale.domain();\r\n\t\t// console.log(\"before = %s, after = %s\", JSON.stringify(backingLinearScale.domain()), JSON.stringify(x))\r\n\r\n\t\tvar d = [x[0], x[1]];\r\n\t\t// console.log(d);\r\n\t\tbackingLinearScale.domain(d);\r\n\t\treturn scale;\r\n\t};\r\n\tscale.range = function(x) {\r\n\t\tif (!arguments.length) return backingLinearScale.range();\r\n\t\tbackingLinearScale.range(x);\r\n\t\treturn scale;\r\n\t};\r\n\tscale.rangeRound = function(x) {\r\n\t\treturn backingLinearScale.range(x);\r\n\t};\r\n\tscale.clamp = function(x) {\r\n\t\tif (!arguments.length) return backingLinearScale.clamp();\r\n\t\tbackingLinearScale.clamp(x);\r\n\t\treturn scale;\r\n\t};\r\n\tscale.interpolate = function(x) {\r\n\t\tif (!arguments.length) return backingLinearScale.interpolate();\r\n\t\tbackingLinearScale.interpolate(x);\r\n\t\treturn scale;\r\n\t};\r\n\tscale.ticks = function(m) {\r\n\t\tvar start, end, count = 0;\r\n\t\tdata.forEach(function(d) {\r\n\t\t\tif (isDefined(dateAccessor(d))) {\r\n\t\t\t\tif (isNotDefined(start)) start = d;\r\n\t\t\t\tend = d;\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t});\r\n\t\t// var start = head(data);\r\n\t\t// var end = last(data);\r\n\t\t// console.log(data);\r\n\t\tm = (count / data.length) * m;\r\n\t\tvar span = (dateAccessor(end).getTime() - dateAccessor(start).getTime());\r\n\t\tvar target = span / m;\r\n\t\t/*\r\n\t\tconsole.log(dateAccessor(data[data.length - 1])\r\n\t\t\t, data[0]\r\n\t\t\t, span\r\n\t\t\t, m\r\n\t\t\t, target\r\n\t\t\t, timeScaleStepsBisector(d3_time_scaleSteps, target)\r\n\t\t\t);\r\n\t\t*/\r\n\t\tvar ticks = data\r\n\t\t\t\t\t\t.filter(timeScaleSteps[timeScaleStepsBisector(timeScaleSteps, target)].f)\r\n\t\t\t\t\t\t.map(indexAccessor)\r\n\t\t\t\t\t\t;\r\n\t\t// return the index of all the ticks to be displayed,\r\n\t\t// console.log(target, span, m, ticks);\r\n\t\treturn ticks;\r\n\t};\r\n\tscale.tickFormat = function(/* ticks */) {\r\n\t\treturn function(d) {\r\n\t\t\t// for each index received from ticks() function derive the formatted output\r\n\t\t\tvar tickIndex = bisectByIndex(data, d);\r\n\t\t\treturn formater(data[tickIndex]);\r\n\t\t};\r\n\t};\r\n\tscale.nice = function(m) {\r\n\t\tbackingLinearScale.nice(m);\r\n\t\treturn scale;\r\n\t};\r\n\tscale.copy = function() {\r\n\t\treturn financeEODScale(indexAccessor, dateAccessor, data, backingLinearScale.copy());\r\n\t};\r\n\treturn scale;\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/scale/financeEODDiscontiniousScale.js\n **/","\"use strict\";\r\n\r\nexport default function() {\r\n\r\n\tvar dataPreProcessor, forIntervals, startingWith;\r\n\tfunction calculator(data) {\r\n\t\treturn {\r\n\t\t\tdata() {\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tcalculator.dataPreProcessor = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn dataPreProcessor;\r\n\t\t}\r\n\t\tdataPreProcessor = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.forIntervals = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn forIntervals;\r\n\t\t}\r\n\t\tforIntervals = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.startingWith = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn startingWith;\r\n\t\t}\r\n\t\tstartingWith = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/scale/identityIntervalCalculator.js\n **/","import EdgeIndicator from \"./EdgeIndicator\";\r\n\r\nimport MouseCoordinates from \"./MouseCoordinates\";\r\nimport CurrentCoordinate from \"./CurrentCoordinate\";\r\n\r\nexport {\r\n\tEdgeIndicator,\r\n\tMouseCoordinates,\r\n\tCurrentCoordinate\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/coordinates/index.js\n **/","\"use strict\";\r\n\r\nimport React, { Component, PropTypes } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport EdgeCoordinate from \"./EdgeCoordinate\";\r\n\r\nimport pure from \"../pure\";\r\nimport { first, last, isDefined, isNotDefined } from \"../utils\";\r\n\r\nclass EdgeIndicator extends Component {\r\n\tcomponentDidMount() {\r\n\t\tvar { chartCanvasType, getCanvasContexts } = this.props;\r\n\r\n\t\tif (chartCanvasType !== \"svg\" && isDefined(getCanvasContexts)) {\r\n\t\t\tvar contexts = getCanvasContexts();\r\n\t\t\tif (contexts)\r\n\t\t\t\tEdgeIndicator.drawOnCanvas(this.props, contexts.axes);\r\n\t\t}\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tthis.componentDidMount();\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tthis.componentWillReceiveProps(this.props);\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tvar draw = EdgeIndicator.drawOnCanvasStatic.bind(null, nextProps);\r\n\r\n\t\tvar { chartId } = nextProps;\r\n\r\n\t\tnextProps.callbackForCanvasDraw({\r\n\t\t\ttype: \"edge\",\r\n\t\t\tchartId, draw,\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\tvar { xScale, chartConfig, plotData, chartCanvasType } = this.props;\r\n\r\n\t\tif (chartCanvasType !== \"svg\") return null;\r\n\r\n\t\tvar edge = EdgeIndicator.helper(this.props, xScale, chartConfig.yScale, plotData);\r\n\r\n\r\n\t\tif (isNotDefined(edge)) return null;\r\n\t\treturn <EdgeCoordinate\r\n\t\t\tclassName=\"react-stockcharts-edge-coordinate\"\r\n\t\t\t\t{...edge} />;\r\n\t}\r\n}\r\n\r\nEdgeIndicator.propTypes = {\r\n\tyAccessor: PropTypes.func,\r\n\r\n\ttype: PropTypes.oneOf([\"horizontal\"]).isRequired,\r\n\tclassName: PropTypes.string,\r\n\tfill: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.func,\r\n\t]).isRequired,\r\n\ttextFill: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.func,\r\n\t]).isRequired,\r\n\titemType: PropTypes.oneOf([\"first\", \"last\"]).isRequired,\r\n\torient: PropTypes.oneOf([\"left\", \"right\"]),\r\n\tedgeAt: PropTypes.oneOf([\"left\", \"right\"]),\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n};\r\n\r\nEdgeIndicator.defaultProps = {\r\n\ttype: \"horizontal\",\r\n\torient: \"left\",\r\n\tedgeAt: \"left\",\r\n\ttextFill: \"#FFFFFF\",\r\n\tdisplayFormat: d3.format(\".2f\"),\r\n\tyAxisPad: 5,\r\n};\r\n\r\nEdgeIndicator.drawOnCanvas = (props, canvasContext) => {\r\n\tvar { chartConfig, xScale, plotData } = props;\r\n\tEdgeIndicator.drawOnCanvasStatic(props, canvasContext, xScale, chartConfig.yScale, plotData);\r\n};\r\n\r\nEdgeIndicator.drawOnCanvasStatic = (props, ctx, xScale, yScale, plotData) => {\r\n\tvar { canvasOriginX, canvasOriginY } = props;\r\n\tvar edge = EdgeIndicator.helper(props, xScale, yScale, plotData);\r\n\r\n\tif (isNotDefined(edge)) return null;\r\n\r\n\tctx.save();\r\n\r\n\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\tctx.translate(canvasOriginX, canvasOriginY);\r\n\r\n\tEdgeCoordinate.drawOnCanvasStatic(ctx, edge);\r\n\tctx.restore();\r\n};\r\n\r\nEdgeIndicator.helper = (props, xScale, yScale, plotData) => {\r\n\tvar { type: edgeType, displayFormat, itemType, edgeAt, yAxisPad, orient } = props;\r\n\tvar { yAccessor, xAccessor, fill, textFill } = props;\r\n\r\n\t// var currentItem = ChartDataUtil.getCurrentItemForChartNew(currentItems, forChart);\r\n\tvar edge = null, item, yAccessor;\r\n\t// console.log(chartData.config.compareSeries.length);\r\n\r\n\tvar item = itemType === \"first\" ? first(plotData, yAccessor) : last(plotData, yAccessor);\r\n\r\n\tif (isDefined(item)) {\r\n\t\tvar yValue = yAccessor(item),\r\n\t\t\txValue = xAccessor(item);\r\n\r\n\t\tvar x1 = Math.round(xScale(xValue)),\r\n\t\t\ty1 = Math.round(yScale(yValue));\r\n\r\n\t\tvar [left, right] = xScale.range();\r\n\t\tvar edgeX = edgeAt === \"left\"\r\n\t\t\t\t? left - yAxisPad\r\n\t\t\t\t: right + yAxisPad;\r\n\r\n\t\tedge = {\r\n\t\t\t// ...props,\r\n\t\t\ttype: edgeType,\r\n\t\t\tfill: d3.functor(fill)(item),\r\n\t\t\ttextFill: d3.functor(textFill)(item),\r\n\t\t\tshow: true,\r\n\t\t\tx1,\r\n\t\t\ty1,\r\n\t\t\tx2: edgeX,\r\n\t\t\ty2: y1,\r\n\t\t\tcoordinate: displayFormat(yValue),\r\n\t\t\tedgeAt: edgeX,\r\n\t\t\torient,\r\n\t\t};\r\n\t}\r\n\treturn edge;\r\n};\r\n\r\nEdgeIndicator.propTypes = {\r\n\tcanvasOriginX: PropTypes.number,\r\n\tcanvasOriginY: PropTypes.number,\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func.isRequired,\r\n\tchartId: PropTypes.number.isRequired,\r\n\tgetCanvasContexts: PropTypes.func,\r\n\tmargin: PropTypes.object.isRequired,\r\n\tcallbackForCanvasDraw: PropTypes.func.isRequired,\r\n\tgetAllCanvasDrawCallback: PropTypes.func,\r\n\tchartCanvasType: PropTypes.string.isRequired,\r\n\tplotData: PropTypes.array.isRequired,\r\n};\r\n\r\n\r\nexport default pure(EdgeIndicator, {\r\n\t// width: PropTypes.number.isRequired,\r\n\tcanvasOriginX: PropTypes.number,\r\n\tcanvasOriginY: PropTypes.number,\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func.isRequired,\r\n\tchartId: PropTypes.number.isRequired,\r\n\tgetCanvasContexts: PropTypes.func,\r\n\tmargin: PropTypes.object.isRequired,\r\n\tcallbackForCanvasDraw: PropTypes.func.isRequired,\r\n\tgetAllCanvasDrawCallback: PropTypes.func,\r\n\tchartCanvasType: PropTypes.string.isRequired,\r\n\tplotData: PropTypes.array.isRequired,\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/coordinates/EdgeIndicator.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport { hexToRGBA, isDefined } from \"../utils\";\r\n\r\nclass EdgeCoordinate extends Component {\r\n\r\n\trender() {\r\n\t\tvar { className } = this.props;\r\n\r\n\t\tvar edge = EdgeCoordinate.helper(this.props);\r\n\t\tif (edge === null) return null;\r\n\t\tvar line, coordinateBase, coordinate;\r\n\r\n\t\tif (isDefined(edge.line)) {\r\n\t\t\tline = <line\r\n\t\t\t\tclassName=\"react-stockcharts-cross-hair\" opacity={edge.line.opacity} stroke={edge.line.stroke}\r\n\t\t\t\tx1={edge.line.x1} y1={edge.line.y1}\r\n\t\t\t\tx2={edge.line.x2} y2={edge.line.y2} />;\r\n\t\t}\r\n\t\tif (isDefined(edge.coordinateBase)) {\r\n\t\t\tcoordinateBase = <rect key={1} className=\"react-stockchart-text-background\"\r\n\t\t\t\tx={edge.coordinateBase.edgeXRect}\r\n\t\t\t\ty={edge.coordinateBase.edgeYRect}\r\n\t\t\t\theight={edge.coordinateBase.rectHeight} width={edge.coordinateBase.rectWidth}\r\n\t\t\t\tfill={edge.coordinateBase.fill}  opacity={edge.coordinateBase.opacity} />;\r\n\r\n\t\t\tcoordinate = (<text key={2} x={edge.coordinate.edgeXText}\r\n\t\t\t\ty={edge.coordinate.edgeYText}\r\n\t\t\t\ttextAnchor={edge.coordinate.textAnchor}\r\n\t\t\t\tfontFamily={edge.coordinate.fontFamily}\r\n\t\t\t\tfontSize={edge.coordinate.fontSize}\r\n\t\t\t\tdy=\".32em\" fill={edge.coordinate.textFill} >{edge.coordinate.displayCoordinate}</text>);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t{line}\r\n\t\t\t\t{coordinateBase}\r\n\t\t\t\t{coordinate}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nEdgeCoordinate.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\ttype: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n\tcoordinate: PropTypes.any.isRequired,\r\n\tx1: PropTypes.number.isRequired,\r\n\ty1: PropTypes.number.isRequired,\r\n\tx2: PropTypes.number.isRequired,\r\n\ty2: PropTypes.number.isRequired,\r\n\torient: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\r\n\trectWidth: PropTypes.number,\r\n\thideLine: PropTypes.bool,\r\n\tfill: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\tfontFamily: PropTypes.string.isRequired,\r\n\tfontSize: PropTypes.number.isRequired,\r\n\trectHeight: PropTypes.number.isRequired,\r\n};\r\n\r\nEdgeCoordinate.defaultProps = {\r\n\tclassName: \"react-stockcharts-edgecoordinate\",\r\n\torient: \"left\",\r\n\thideLine: false,\r\n\tfill: \"#8a8a8a\",\r\n\topacity: 1,\r\n\ttextFill: \"#FFFFFF\",\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 13,\r\n\tlineStroke: \"#000000\",\r\n\tlineOpacity: 0.3,\r\n\trectHeight: 20,\r\n};\r\n\r\n\r\nEdgeCoordinate.helper = (props) => {\r\n\tvar { coordinate: displayCoordinate, show, rectWidth, type, orient, edgeAt, hideLine } = props;\r\n\tvar { fill, opacity, fontFamily, fontSize, textFill, lineStroke, lineOpacity, rectHeight } = props;\r\n\tvar { x1, y1, x2, y2 } = props;\r\n\r\n\tif (!show) return null;\r\n\r\n\trectWidth = rectWidth ? rectWidth : (type === \"horizontal\") ? 60 : 100;\r\n\r\n\tvar edgeXRect, edgeYRect, edgeXText, edgeYText;\r\n\r\n\tif (type === \"horizontal\") {\r\n\r\n\t\tedgeXRect = (orient === \"right\") ? edgeAt + 1 : edgeAt - rectWidth - 1;\r\n\t\tedgeYRect = y1 - (rectHeight / 2);\r\n\t\tedgeXText = (orient === \"right\") ? edgeAt + (rectWidth / 2) : edgeAt - (rectWidth / 2);\r\n\t\tedgeYText = y1;\r\n\t} else {\r\n\t\tedgeXRect = x1 - (rectWidth / 2);\r\n\t\tedgeYRect = (orient === \"bottom\") ? edgeAt : edgeAt - rectHeight;\r\n\t\tedgeXText = x1;\r\n\t\tedgeYText = (orient === \"bottom\") ? edgeAt + (rectHeight / 2) : edgeAt - (rectHeight / 2);\r\n\t}\r\n\tvar coordinateBase, coordinate, textAnchor = \"middle\";\r\n\tif (isDefined(displayCoordinate)) {\r\n\t\tcoordinateBase = {\r\n\t\t\tedgeXRect, edgeYRect, rectHeight, rectWidth, fill, opacity\r\n\t\t};\r\n\t\tcoordinate = {\r\n\t\t\tedgeXText, edgeYText, textAnchor, fontFamily, fontSize, textFill, displayCoordinate\r\n\t\t};\r\n\t}\r\n\tvar line = hideLine ? undefined : {\r\n\t\topacity: lineOpacity, stroke: lineStroke, x1, y1, x2, y2\r\n\t};\r\n\treturn {\r\n\t\tcoordinateBase, coordinate, line\r\n\t};\r\n};\r\n\r\nEdgeCoordinate.drawOnCanvasStatic = (ctx, props) => {\r\n\tprops = { ...EdgeCoordinate.defaultProps, ...props };\r\n\r\n\tvar edge = EdgeCoordinate.helper(props);\r\n\r\n\tif (edge === null) return;\r\n\r\n\tif (isDefined(edge.coordinateBase)) {\r\n\t\tctx.fillStyle = hexToRGBA(edge.coordinateBase.fill, edge.coordinateBase.opacity);\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(edge.coordinateBase.edgeXRect, edge.coordinateBase.edgeYRect, edge.coordinateBase.rectWidth, edge.coordinateBase.rectHeight);\r\n\t\tctx.fill();\r\n\r\n\t\tctx.font = `${ edge.coordinate.fontSize }px ${edge.coordinate.fontFamily}`;\r\n\t\tctx.fillStyle = edge.coordinate.textFill;\r\n\t\tctx.textAlign = edge.coordinate.textAnchor === \"middle\" ? \"center\" : edge.coordinate.textAnchor;\r\n\t\tctx.textBaseline = \"middle\";\r\n\r\n\t\tctx.fillText(edge.coordinate.displayCoordinate, edge.coordinate.edgeXText, edge.coordinate.edgeYText);\r\n\t}\r\n\tif (isDefined(edge.line)) {\r\n\t\tctx.strokeStyle = hexToRGBA(edge.line.stroke, edge.line.opacity);\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(edge.line.x1, edge.line.y1);\r\n\t\tctx.lineTo(edge.line.x2, edge.line.y2);\r\n\t\tctx.stroke();\r\n\t}\r\n};\r\n\r\nexport default EdgeCoordinate;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/coordinates/EdgeCoordinate.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport pure from \"../pure\";\r\nimport CrossHair from \"./CrossHair\";\r\n\r\nimport { isDefined } from \"../utils\";\r\n\r\nclass MouseCoordinates extends Component {\r\n\tcomponentDidMount() {\r\n\t\tvar { chartCanvasType, getCanvasContexts } = this.props;\r\n\r\n\t\tif (chartCanvasType !== \"svg\" && isDefined(getCanvasContexts)) {\r\n\t\t\tvar contexts = getCanvasContexts();\r\n\t\t\tif (contexts) MouseCoordinates.drawOnCanvas(contexts.mouseCoord, this.props);\r\n\t\t}\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tthis.componentDidMount();\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tthis.componentWillReceiveProps(this.props, this.props);\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tvar draw = MouseCoordinates.drawOnCanvasStatic.bind(null, nextProps);\r\n\r\n\t\tvar temp = nextProps.getAllCanvasDrawCallback().filter(each => each.type === \"mouse\");\r\n\t\tif (temp.length === 0) {\r\n\t\t\tnextProps.callbackForCanvasDraw({\r\n\t\t\t\ttype: \"mouse\",\r\n\t\t\t\tdraw: draw,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tnextProps.callbackForCanvasDraw(temp[0], {\r\n\t\t\t\ttype: \"mouse\",\r\n\t\t\t\tdraw: draw,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tvar { chartCanvasType, mouseXY, xScale, currentCharts, chartConfig, currentItem, show } = this.props;\r\n\t\tvar { stroke, opacity, textStroke, textBGFill, textBGopacity, fontFamily, fontSize } = this.props;\r\n\r\n\t\tif (chartCanvasType !== \"svg\") return null;\r\n\r\n\t\tvar pointer = MouseCoordinates.helper(this.props, show, xScale, mouseXY, currentCharts, chartConfig, currentItem);\r\n\r\n\t\tif (!pointer) return null;\r\n\r\n\t\treturn <CrossHair height={pointer.height} width={pointer.width} mouseXY={pointer.mouseXY}\r\n\t\t\t\t\txDisplayValue={pointer.xDisplayValue} edges={pointer.edges}\r\n\t\t\t\t\tstroke={stroke} opacity={opacity} textStroke={textStroke}\r\n\t\t\t\t\ttextBGFill={textBGFill} textBGopacity={textBGopacity}\r\n\t\t\t\t\tfontFamily={fontFamily} fontSize={fontSize} />;\r\n\t}\r\n}\r\n\r\nMouseCoordinates.propTypes = {\r\n\txDisplayFormat: PropTypes.func.isRequired,\r\n\ttype: PropTypes.oneOf([\"crosshair\"]).isRequired,\r\n\r\n\txScale: PropTypes.func.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\tdisplayXAccessor: PropTypes.func.isRequired,\r\n\tchartCanvasType: PropTypes.string,\r\n\tgetCanvasContexts: PropTypes.func,\r\n\tmouseXY: PropTypes.array,\r\n\tcurrentCharts: PropTypes.arrayOf(PropTypes.number),\r\n\tchartConfig: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\tshow: PropTypes.bool,\r\n\tstroke: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\ttextStroke: PropTypes.string,\r\n\ttextBGFill: PropTypes.string,\r\n\ttextBGopacity: PropTypes.number,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n};\r\n\r\nMouseCoordinates.defaultProps = {\r\n\t// show: false,\r\n\tsnapX: true,\r\n\tshowX: true,\r\n\ttype: \"crosshair\",\r\n\txDisplayFormat: d3.time.format(\"%Y-%m-%d\"),\r\n\tstroke: \"#000000\",\r\n\topacity: 0.2,\r\n\ttextStroke: \"#ffffff\",\r\n\ttextBGFill: \"#8a8a8a\",\r\n\ttextBGopacity: 1,\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 13,\r\n\trectWidth: 100,\r\n\trectHeight: 20,\r\n};\r\n\r\nMouseCoordinates.drawOnCanvas = (canvasContext, props) => {\r\n\tvar { mouseXY, currentCharts, chartConfig, currentItem, xScale, show } = props;\r\n\r\n\t// console.log(props.currentCharts);\r\n\tMouseCoordinates.drawOnCanvasStatic(props, canvasContext, show, xScale, mouseXY, currentCharts, chartConfig, currentItem);\r\n};\r\nMouseCoordinates.drawOnCanvasStatic = (props, ctx, show, xScale, mouseXY, currentCharts, chartConfig, currentItem) => {\r\n\tvar { margin } = props;\r\n\tvar pointer = MouseCoordinates.helper(props, show, xScale, mouseXY, currentCharts, chartConfig, currentItem);\r\n\r\n\tif (!pointer) return null;\r\n\r\n\tvar originX = 0.5 + margin.left;\r\n\tvar originY = 0.5 + margin.top;\r\n\r\n\tctx.save();\r\n\r\n\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\tctx.translate(originX, originY);\r\n\r\n\t// console.log(pointer);\r\n\tCrossHair.drawOnCanvasStatic(ctx, pointer);\r\n\tctx.restore();\r\n};\r\n\r\nMouseCoordinates.helper = (props, show, xScale, mouseXY, currentCharts, chartConfig, currentItem) => {\r\n\tvar { displayXAccessor, xAccessor, height, width, snapX, xDisplayFormat } = props;\r\n\r\n\tvar xValue = xAccessor(currentItem);\r\n\tvar x = snapX ? Math.round(xScale(xValue)) : mouseXY[0];\r\n\tvar y = mouseXY[1];\r\n\r\n\tvar displayValue = snapX ? displayXAccessor(currentItem) : xScale.invert(x);\r\n\r\n\tif (!show || !displayValue) return;\r\n\r\n\tvar edges = chartConfig\r\n\t\t.filter(eachChartConfig => currentCharts.indexOf(eachChartConfig.id) > -1)\r\n\t\t.filter(eachChartConfig => isDefined(eachChartConfig.mouseCoordinates.at))\r\n\t\t.filter(eachChartConfig => isDefined(eachChartConfig.mouseCoordinates.yDisplayFormat))\r\n\t\t.map(eachChartConfig => {\r\n\t\t\tvar mouseY = mouseXY[1] - eachChartConfig.origin[1];\r\n\t\t\tvar yValue = eachChartConfig.yScale.invert(mouseY);\r\n\t\t\treturn {\r\n\t\t\t\tid: eachChartConfig.id,\r\n\t\t\t\tyDisplayValue: eachChartConfig.mouseCoordinates.yDisplayFormat(yValue),\r\n\t\t\t\t...eachChartConfig.mouseCoordinates,\r\n\t\t\t\tyValue,\r\n\t\t\t};\r\n\t\t});\r\n\r\n\tvar { stroke, opacity, textStroke, textBGFill, textBGopacity, fontFamily, fontSize } = props;\r\n\r\n\tvar { showX, rectHeight, rectWidth } = props;\r\n\treturn { showX, rectHeight, rectWidth, height, width, mouseXY: [x, y], xDisplayValue: xDisplayFormat(displayValue), edges,\r\n\t\tstroke, opacity, textStroke, textBGFill, textBGopacity, fontFamily, fontSize };\r\n};\r\n\r\n// export default MouseCoordinates;\r\nexport default pure(MouseCoordinates, {\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n\tmargin: PropTypes.object.isRequired,\r\n\tshow: PropTypes.bool,\r\n\tmouseXY: PropTypes.array,\r\n\r\n\txScale: PropTypes.func.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\tdisplayXAccessor: PropTypes.func.isRequired,\r\n\tchartCanvasType: PropTypes.string.isRequired,\r\n\tchartConfig: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\tcurrentCharts: PropTypes.arrayOf(PropTypes.number),\r\n\r\n\tgetCanvasContexts: PropTypes.func,\r\n\tcallbackForCanvasDraw: PropTypes.func.isRequired,\r\n\tgetAllCanvasDrawCallback: PropTypes.func,\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/coordinates/MouseCoordinates.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport EdgeCoordinate from \"./EdgeCoordinate\";\r\n\r\nimport { hexToRGBA, isDefined } from \"../utils\";\r\n\r\nclass CrossHair extends Component {\r\n\tshouldComponentUpdate(nextProps) {\r\n\t\treturn nextProps.mouseXY !== this.props.mouseXY;\r\n\t}\r\n\trender() {\r\n\t\tvar result = CrossHair.helper(this.props);\r\n\t\tvar { line, edges } = result;\r\n\t\tvar svgLine = isDefined(line)\r\n\t\t\t? <line className=\"react-stockcharts-cross-hair\" opacity={line.opacity} stroke={line.stroke}\r\n\t\t\t\t\tx1={line.x1} y1={line.y1}\r\n\t\t\t\t\tx2={line.x2} y2={line.y2} />\r\n\t\t\t: null;\r\n\r\n\t\treturn (\r\n\t\t\t<g className=\"crosshair \">\r\n\t\t\t\t{svgLine}\r\n\t\t\t\t{edges.map((edge, idx) => <EdgeCoordinate\r\n\t\t\t\t\tkey={idx}\r\n\t\t\t\t\tclassName=\"horizontal\"\r\n\t\t\t\t\t{ ...edge }\r\n\t\t\t\t\t/>)}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nCrossHair.propTypes = {\r\n\tyAxisPad: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n\twidth: PropTypes.number.isRequired,\r\n\tmouseXY: PropTypes.array.isRequired,\r\n\txDisplayValue: PropTypes.string.isRequired,\r\n\tedges: PropTypes.array.isRequired\r\n};\r\n\r\nCrossHair.defaultProps = {\r\n\tyAxisPad: 5\r\n};\r\n\r\nCrossHair.helper = (props) => {\r\n\tvar { width, edges, yAxisPad, mouseXY, xDisplayValue, height } = props;\r\n\tvar { stroke, opacity, textStroke, textBGFill, textBGopacity, fontFamily, fontSize } = props;\r\n\tvar x1 = 0, x2 = width;\r\n\r\n\tvar edges = edges.map((edge) => {\r\n\t\tif (edge.at === \"left\") {\r\n\t\t\tx1 = -yAxisPad;\r\n\t\t}\r\n\t\tif (edge.at === \"right\") {\r\n\t\t\tx2 = width + yAxisPad;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t...edge,\r\n\t\t\ttype: \"horizontal\",\r\n\t\t\tshow: true,\r\n\t\t\tx1: 0,\r\n\t\t\ty1: mouseXY[1],\r\n\t\t\tx2: 0,\r\n\t\t\ty2: mouseXY[1],\r\n\t\t\tcoordinate: edge.yDisplayValue,\r\n\t\t\tedgeAt: (edge.at === \"left\" ? x1 : x2),\r\n\t\t\torient: edge.at,\r\n\t\t\thideLine: true,\r\n\t\t\tlineStroke: stroke,\r\n\t\t\tlineOpacity: opacity,\r\n\t\t\ttextFill: textStroke,\r\n\t\t\tfill: textBGFill,\r\n\t\t\topacity: textBGopacity,\r\n\t\t\tfontFamily, fontSize\r\n\t\t};\r\n\t});\r\n\tedges.push({\r\n\t\t...props,\r\n\t\ttype: \"vertical\",\r\n\t\tshow: true,\r\n\t\tx1: mouseXY[0],\r\n\t\ty1: 0,\r\n\t\tx2: mouseXY[0],\r\n\t\ty2: height,\r\n\t\tcoordinate: xDisplayValue,\r\n\t\tedgeAt: height,\r\n\t\torient: \"bottom\",\r\n\t\tlineStroke: stroke,\r\n\t\tlineOpacity: opacity,\r\n\t\ttextFill: textStroke,\r\n\t\tfill: textBGFill,\r\n\t\topacity: textBGopacity,\r\n\t\tfontFamily, fontSize\r\n\t});\r\n\r\n\tvar line;\r\n\tif (edges.length > 1) {\r\n\t\tline = {\r\n\t\t\topacity: opacity,\r\n\t\t\tstroke: stroke,\r\n\t\t\tx1: x1,\r\n\t\t\ty1: mouseXY[1],\r\n\t\t\tx2: x2,\r\n\t\t\ty2: mouseXY[1],\r\n\t\t};\r\n\t}\r\n\treturn { edges, line };\r\n};\r\n\r\nCrossHair.drawOnCanvasStatic = (ctx, props) => {\r\n\tprops = { ...CrossHair.defaultProps, ...props };\r\n\tvar result = CrossHair.helper(props);\r\n\tvar { line, edges } = result;\r\n\r\n\tedges.forEach(edge => EdgeCoordinate.drawOnCanvasStatic(ctx, edge));\r\n\r\n\tif (line) {\r\n\t\tctx.strokeStyle = hexToRGBA(line.stroke, line.opacity);\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(line.x1, line.y1);\r\n\t\tctx.lineTo(line.x2, line.y2);\r\n\t\tctx.stroke();\r\n\t}\r\n};\r\n\r\nexport default CrossHair;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/coordinates/CrossHair.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport pure from \"../pure\";\r\nimport { shallowEqual, isDefined, isNotDefined } from \"../utils\";\r\n\r\nclass CurrentCoordinate extends Component {\r\n\tcomponentDidMount() {\r\n\t\tvar { chartCanvasType, getCanvasContexts } = this.props;\r\n\r\n\t\tif (chartCanvasType !== \"svg\" && isDefined(getCanvasContexts)) {\r\n\t\t\tvar contexts = getCanvasContexts();\r\n\t\t\tif (contexts) CurrentCoordinate.drawOnCanvas(contexts.mouseCoord, this.props);\r\n\t\t}\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tthis.componentDidMount();\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tthis.componentWillReceiveProps(this.props);\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\t// console.log(\"HERE111\");\r\n\r\n\t\tvar draw = CurrentCoordinate.drawOnCanvasStatic.bind(null, nextProps);\r\n\t\tvar { id, chartId } = nextProps;\r\n\r\n\t\tif (!shallowEqual(this.props, nextProps)) {\r\n\t\t\tvar temp = nextProps.getAllCanvasDrawCallback()\r\n\t\t\t\t.filter(each => each.type === \"currentcoordinate\")\r\n\t\t\t\t.filter(each => each.chartId === chartId)\r\n\t\t\t\t.filter(each => each.id === id);\r\n\r\n\t\t\tif (temp.length === 0) {\r\n\t\t\t\tnextProps.callbackForCanvasDraw({\r\n\t\t\t\t\ttype: \"currentcoordinate\",\r\n\t\t\t\t\tid, chartId, draw,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tnextProps.callbackForCanvasDraw(temp[0], {\r\n\t\t\t\t\ttype: \"currentcoordinate\",\r\n\t\t\t\t\tid, chartId, draw,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tvar { className } = this.props;\r\n\t\tvar { chartCanvasType, show, chartConfig, currentItem, xScale } = this.props;\r\n\r\n\t\tif (chartCanvasType !== \"svg\") return null;\r\n\r\n\t\tvar circle = CurrentCoordinate.helper(this.props, show, xScale, chartConfig.yScale, currentItem);\r\n\r\n\t\tif (!circle) return null;\r\n\r\n\t\treturn (\r\n\t\t\t<circle className={className} cx={circle.x} cy={circle.y} r={circle.r} fill={circle.fill} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nCurrentCoordinate.propTypes = {\r\n\tid: PropTypes.number.isRequired,\r\n\tyAccessor: PropTypes.func,\r\n\tr: PropTypes.number.isRequired,\r\n\tclassName: PropTypes.string,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func.isRequired,\r\n\tchartCanvasType: PropTypes.string,\r\n\tgetCanvasContexts: PropTypes.func,\r\n\tshow: PropTypes.bool,\r\n\tchartId: PropTypes.number.isRequired,\r\n\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\r\n};\r\n\r\nCurrentCoordinate.defaultProps = {\r\n\tr: 3,\r\n\tclassName: \"react-stockcharts-current-coordinate\",\r\n};\r\n\r\nCurrentCoordinate.drawOnCanvas = (canvasContext, props) => {\r\n\tvar { chartConfig, currentItem, xScale, show } = props;\r\n\r\n\tCurrentCoordinate.drawOnCanvasStatic(props, canvasContext, show, xScale, chartConfig.yScale, currentItem);\r\n};\r\n\r\n// mouseContext, show, xScale, mouseXY, currentCharts, chartConfig, currentItem\r\n\r\nCurrentCoordinate.drawOnCanvasStatic = (props, ctx, show, xScale, yScale, currentItem) => {\r\n\tvar { canvasOriginX, canvasOriginY } = props;\r\n\r\n\tvar circle = CurrentCoordinate.helper(props, show, xScale, yScale, currentItem);\r\n\r\n\tif (!circle) return null;\r\n\r\n\tctx.save();\r\n\r\n\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\tctx.translate(canvasOriginX, canvasOriginY);\r\n\r\n\tctx.fillStyle = circle.fill;\r\n\tctx.beginPath();\r\n\tctx.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI, false);\r\n\tctx.fill();\r\n\t// CurrentCoordinate.drawOnCanvasStatic(ctx, pointer);\r\n\tctx.restore();\r\n};\r\n\r\nCurrentCoordinate.helper = (props, show, xScale, yScale, currentItem) => {\r\n\tvar { fill, xAccessor, yAccessor, r } = props;\r\n\r\n\t// console.log(show);\r\n\tif (!show || isNotDefined(currentItem)) return null;\r\n\r\n\tvar xValue = xAccessor(currentItem);\r\n\tvar yValue = yAccessor(currentItem);\r\n\r\n\tif (isNotDefined(yValue)) return null;\r\n\r\n\t// console.log(chartConfig);\r\n\tvar x = Math.round(xScale(xValue));\r\n\tvar y = Math.round(yScale(yValue));\r\n\r\n\treturn { x, y, r, fill };\r\n};\r\n\r\nexport default pure(CurrentCoordinate, {\r\n\tshow: PropTypes.bool.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\tmouseXY: PropTypes.array, // this is to avoid the flicker\r\n\tcanvasOriginX: PropTypes.number,\r\n\tcanvasOriginY: PropTypes.number,\r\n\r\n\txAccessor: PropTypes.func.isRequired,\r\n\txScale: PropTypes.func.isRequired,\r\n\tchartId: PropTypes.number.isRequired,\r\n\tgetCanvasContexts: PropTypes.func,\r\n\tmargin: PropTypes.object.isRequired,\r\n\tcallbackForCanvasDraw: PropTypes.func.isRequired,\r\n\tgetAllCanvasDrawCallback: PropTypes.func,\r\n\tchartCanvasType: PropTypes.string.isRequired,\r\n}, [\"mouseXY\"]);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/coordinates/CurrentCoordinate.jsx\n **/","\r\nimport * as defaultOptions from \"./defaultOptions\";\r\n\r\nimport ema from \"./ema\";\r\nimport sma from \"./sma\";\r\nimport bollingerBand from \"./bollingerBand\";\r\nimport haikinAshi from \"./haikinAshi\";\r\nimport kagi from \"./kagi\";\r\nimport pointAndFigure from \"./pointAndFigure\";\r\nimport renko from \"./renko\";\r\nimport macd from \"./macd\";\r\nimport rsi from \"./rsi\";\r\nimport atr from \"./atr\";\r\nimport stochasticOscilator from \"./stochasticOscilator\";\r\nimport forceIndex from \"./forceIndex\";\r\nimport elderRay from \"./elderRay\";\r\nimport change from \"./change\";\r\nimport elderImpulse from \"./elderImpulse\";\r\nimport compare from \"./compare\";\r\n\r\nexport {\r\n\tema,\r\n\tsma,\r\n\tbollingerBand,\r\n\thaikinAshi,\r\n\tkagi,\r\n\tpointAndFigure,\r\n\trenko,\r\n\tmacd,\r\n\trsi,\r\n\tatr,\r\n\tstochasticOscilator,\r\n\tforceIndex,\r\n\telderRay,\r\n\tchange,\r\n\telderImpulse,\r\n\tcompare,\r\n\tdefaultOptions\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/index.js\n **/","\"use strict\";\r\n\r\nexport const BollingerBand = {\r\n\tperiod: 20,\r\n\tsource: d => d.close, // \"high\", \"low\", \"open\", \"close\"\r\n\tmultiplier: 2,\r\n\tmovingAverageType: \"sma\"\r\n};\r\n\r\nexport const ATR = {\r\n\tperiod: 14,\r\n\tsource: d => ({ open: d.open, high: d.high, low: d.low, close: d.close }),\r\n};\r\n\r\nexport const ForceIndex = {\r\n\tclose: d => d.close, // \"high\", \"low\", \"open\", \"close\"\r\n\tvolume: d => d.volume\r\n};\r\n\r\nexport const ElderRay = {\r\n\tperiod: 13,\r\n\tsource: d => d.close, // \"high\", \"low\", \"open\", \"close\"\r\n\tmovingAverageType: \"sma\",\r\n\tohlc: d => ({ open: d.open, high: d.high, low: d.low, close: d.close }),\r\n};\r\n\r\nexport const ElderImpulse = {\r\n\tstroke: {\r\n\t\tup: \"#6BA583\",\r\n\t\tdown: \"#FF0000\",\r\n\t\tneutral: \"#0000FF\",\r\n\t}\r\n};\r\n\r\nexport const MACD = {\r\n\tfast: 12,\r\n\tslow: 26,\r\n\tsignal: 9,\r\n\tsource: d => d.close, // \"high\", \"low\", \"open\", \"close\"\r\n\tfill: {\r\n\t\tdivergence: \"#4682B4\"\r\n\t},\r\n\tstroke: {\r\n\t\tmacd: \"#FF0000\",\r\n\t\tsignal: \"#00F300\",\r\n\t},\r\n};\r\n\r\nexport const FullStochasticOscillator = {\r\n\tperiod: 12,\r\n\tK: 3,\r\n\tD: 3,\r\n\tsource: (d) => ({ open: d.open, high: d.high, low: d.low, close: d.close }),\r\n\tstroke: {\r\n\t\tD: \"#17becf\",\r\n\t\tK: \"#ff7f0e\",\r\n\t},\r\n\toverSold: 80,\r\n\tmiddle: 50,\r\n\toverBought: 20,\r\n};\r\n\r\nexport const RSI = {\r\n\tperiod: 14,\r\n\tsource: d => d.close, // \"high\", \"low\", \"open\", \"close\"\r\n\toverSold: 70,\r\n\tmiddle: 50,\r\n\toverBought: 30,\r\n};\r\n\r\nexport const EMA = {\r\n\tsource: d => d.close, // \"high\", \"low\", \"open\", \"close\"\r\n\tperiod: 10,\r\n};\r\n\r\nexport const SMA = {\r\n\tsource: d => d.close, // \"high\", \"low\", \"open\", \"close\"\r\n\tperiod: 10,\r\n};\r\n\r\nexport const Kagi = {\r\n\treversalType: \"ATR\", // \"ATR\", \"FIXED\"\r\n\tperiod: 14,\r\n\treversal: 2,\r\n\tsource: d => d.close, // \"high\", \"low\", \"open\", \"close\"\r\n\tdateAccessor: d => d.date,\r\n\tdateMutator: (d, date) => { d.date = date; },\r\n\tindexMutator: (d, idx) => { d.idx = idx; },\r\n};\r\n\r\nexport const Renko = {\r\n\treversalType: \"ATR\", // \"ATR\", \"FIXED\"\r\n\tperiod: 14,\r\n\tfixedBrickSize: 2,\r\n\tsource: d => ({ high: d.high, low: d.low }), // \"close\", \"hi/lo\"\r\n\tdateAccessor: d => d.date,\r\n\tdateMutator: (d, date) => { d.date = date; },\r\n\tindexMutator: (d, idx) => { d.idx = idx; },\r\n\tindexAccessor: d => d.idx,\r\n};\r\n\r\nexport const PointAndFigure = {\r\n\tboxSize: 0.5,\r\n\treversal: 3,\r\n\tsource: d => ({ high: d.high, low: d.low }), // \"close\", \"hi/lo\"\r\n\tdateAccessor: d => d.date,\r\n\tdateMutator: (d, date) => { d.date = date; },\r\n\tindexMutator: (d, idx) => { d.idx = idx; },\r\n\tindexAccessor: d => d.idx,\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/defaultOptions.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport { merge } from \"../utils\";\r\n\r\nimport { EMA as defaultOptions } from \"./defaultOptions\";\r\nimport { ema } from \"./algorithm\";\r\nimport baseIndicator from \"./baseIndicator\";\r\n\r\nconst ALGORITHM_TYPE = \"EMA\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.ema);\r\n\r\n\tvar underlyingAlgorithm = ema()\r\n\t\t.windowSize(defaultOptions.period)\r\n\t\t.source(defaultOptions.source);\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.ema = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\treturn mergedAlgorithm(data);\r\n\t};\r\n\tbase.tooltipLabel(() => `${ALGORITHM_TYPE}(${underlyingAlgorithm.windowSize()})`);\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\", \"tooltipLabel\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"windowSize\", \"source\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\treturn indicator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/ema.js\n **/","// import slidingWindow from \"./slidingWindow\";\r\n// import merge from \"./merge\";\r\n// import zipper from \"./zipper\";\r\nimport ema from \"./ema\";\r\nimport bollingerband from \"./bollingerband\";\r\nimport haikinAshi from \"./haikinAshi\";\r\nimport kagi from \"./kagi\";\r\nimport pointAndFigure from \"./pointAndFigure\";\r\nimport renko from \"./renko\";\r\n\r\nimport macd from \"./macd\";\r\nimport rsi from \"./rsi\";\r\nimport sto from \"./sto\";\r\nimport atr from \"./atr\";\r\nimport forceIndex from \"./forceIndex\";\r\nimport elderRay from \"./elderRay\";\r\nimport compare from \"./compare\";\r\n\r\nexport {\r\n\t// slidingWindow,\r\n\t// merge,\r\n\t// zipper\r\n\tema,\r\n\tbollingerband,\r\n\thaikinAshi,\r\n\tkagi,\r\n\tpointAndFigure,\r\n\trenko,\r\n\tmacd,\r\n\r\n\trsi,\r\n\tsto,\r\n\tatr,\r\n\tforceIndex,\r\n\telderRay,\r\n\tcompare,\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/index.js\n **/","\"use strict\";\r\n\r\n/*\r\nhttps://github.com/ScottLogic/d3fc/blob/master/src/indicator/algorithm/calculator/exponentialMovingAverage.js\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014-2015 Scott Logic Ltd.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nimport { identity, isNotDefined } from \"../../utils\";\r\n\r\nexport default function() {\r\n\r\n\tvar windowSize = 9,\r\n\t\tsource = identity;\r\n\r\n\tfunction calculator(data) {\r\n\r\n\t\tvar alpha = 2 / (windowSize + 1);\r\n\t\tvar previous;\r\n\t\tvar initialAccumulator = 0;\r\n\t\tvar skip = 0;\r\n\r\n\t\treturn data.map(function(d, i) {\r\n\t\t\tvar v = source(d, i);\r\n\t\t\tif (isNotDefined(previous) && isNotDefined(v)) {\r\n\t\t\t\tskip++;\r\n\t\t\t\treturn undefined;\r\n\t\t\t} else if (i < windowSize + skip - 1) {\r\n\t\t\t\tinitialAccumulator += v;\r\n\t\t\t\treturn undefined;\r\n\t\t\t} else if (i === windowSize + skip - 1) {\r\n\t\t\t\tinitialAccumulator += v;\r\n\t\t\t\tvar initialValue = initialAccumulator / windowSize;\r\n\t\t\t\tprevious = initialValue;\r\n\t\t\t\treturn initialValue;\r\n\t\t\t} else {\r\n\t\t\t\tvar nextValue = v * alpha + (1 - alpha) * previous;\r\n\t\t\t\tprevious = nextValue;\r\n\t\t\t\treturn nextValue;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tcalculator.windowSize = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn windowSize;\r\n\t\t}\r\n\t\twindowSize = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/ema.js\n **/","\"use strict\";\r\n\r\n/*\r\nhttps://github.com/ScottLogic/d3fc/blob/master/src/indicator/algorithm/calculator/bollingerBands.js\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014-2015 Scott Logic Ltd.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport ema from \"./ema\";\r\nimport { last, identity, slidingWindow, zipper } from \"../../utils\";\r\n\r\nimport { BollingerBand as defaultOptions } from \"../defaultOptions\";\r\n\r\nexport default function() {\r\n\r\n\tvar { period: windowSize, multiplier, movingAverageType } = defaultOptions;\r\n\tvar source = identity;\r\n\r\n\tfunction calculator(data) {\r\n\r\n\t\tvar meanAlgorithm = movingAverageType === \"ema\"\r\n\t\t\t? ema().windowSize(windowSize).source(source)\r\n\t\t\t: slidingWindow().windowSize(windowSize)\r\n\t\t\t\t.accumulator(values => d3.mean(values)).source(source);\r\n\r\n\t\tvar bollingerBandAlgorithm = slidingWindow()\r\n\t\t\t.windowSize(windowSize)\r\n\t\t\t.accumulator((values) => {\r\n\t\t\t\tvar avg = last(values).mean;\r\n\t\t\t\tvar stdDev = d3.deviation(values, (each) => source(each.datum));\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: avg + multiplier * stdDev,\r\n\t\t\t\t\tmiddle: avg,\r\n\t\t\t\t\tbottom: avg - multiplier * stdDev\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\tvar zip = zipper()\r\n\t\t\t.combine((datum, mean) => ({ datum, mean }));\r\n\r\n\t\tvar tuples = zip(data, meanAlgorithm(data));\r\n\t\treturn bollingerBandAlgorithm(tuples);\r\n\t};\r\n\r\n\tcalculator.windowSize = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn windowSize;\r\n\t\t}\r\n\t\twindowSize = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.multiplier = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn multiplier;\r\n\t\t}\r\n\t\tmultiplier = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.movingAverageType = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn movingAverageType;\r\n\t\t}\r\n\t\tmovingAverageType = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/bollingerband.js\n **/","\"use strict\";\r\n\r\nimport { mappedSlidingWindow, identity } from \"../../utils\";\r\n\r\nexport default function() {\r\n\r\n\tvar source = identity;\r\n\r\n\tfunction calculator(data) {\r\n\t\tvar algorithm = mappedSlidingWindow()\r\n\t\t\t.windowSize(2)\r\n\t\t\t.undefinedValue(({ open, high, low, close }) => {\r\n\t\t\t\tclose = (open + high + low + close) / 4;\r\n\t\t\t\treturn { open, high, low, close };\r\n\t\t\t})\r\n\t\t\t.accumulator(([prev, now]) => {\r\n\t\t\t\t// console.log(prev, now);\r\n\t\t\t\tvar close = (now.open + now.high + now.low + now.close) / 4;\r\n\t\t\t\tvar open = (prev.open + prev.close) / 2;\r\n\t\t\t\tvar high = Math.max(open, now.high, close);\r\n\t\t\t\tvar low = Math.min(open, now.low, close);\r\n\t\t\t\treturn { open, high, low, close };\r\n\t\t\t});\r\n\r\n\t\treturn algorithm(data);\r\n\t};\r\n\tcalculator.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/haikinAshi.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge, isNotDefined } from \"../../utils\";\r\nimport atr from \"./atr\";\r\n\r\nimport { Kagi as defaultOptions } from \"../defaultOptions\";\r\n\r\nexport default function() {\r\n\r\n\tvar { reversalType, period: windowSize, reversal, source } = defaultOptions;\r\n\tvar { dateAccessor, dateMutator, indexMutator } = defaultOptions;\r\n\r\n\tfunction calculator(data) {\r\n\t\tvar reversalThreshold;\r\n\r\n\t\tif (reversalType === \"ATR\") {\r\n\t\t\t// calculateATR(rawData, period);\r\n\t\t\tvar atrAlgorithm = atr().windowSize(windowSize);\r\n\r\n\t\t\tvar atrCalculator = merge()\r\n\t\t\t\t.algorithm(atrAlgorithm)\r\n\t\t\t\t.merge((d, c) => { d[\"atr\" + windowSize] = c; } );\r\n\r\n\t\t\tatrCalculator(data);\r\n\t\t\treversalThreshold = d => d[\"atr\" + windowSize];\r\n\t\t} else {\r\n\t\t\treversalThreshold = d3.functor(reversal);\r\n\t\t}\r\n\r\n\t\tvar kagiData = [];\r\n\r\n\t\tvar index = 0, prevPeak, prevTrough, direction;\r\n\t\tvar line = {};\r\n\r\n\t\tdata.forEach(function(d) {\r\n\t\t\tif (isNotDefined(line.from)) {\r\n\t\t\t\tindexMutator(line, index++);\r\n\t\t\t\tdateMutator(line, dateAccessor(d));\r\n\t\t\t\tline.from = dateAccessor(d);\r\n\r\n\t\t\t\tif (!line.open) line.open = d.open;\r\n\t\t\t\tline.high = d.high;\r\n\t\t\t\tline.low = d.low;\r\n\t\t\t\tif (!line.close) line.close = source(d);\r\n\t\t\t\tline.startOfYear = d.startOfYear;\r\n\t\t\t\tline.startOfQuarter = d.startOfQuarter;\r\n\t\t\t\tline.startOfMonth = d.startOfMonth;\r\n\t\t\t\tline.startOfWeek = d.startOfWeek;\r\n\t\t\t}\r\n\r\n\t\t\tif (!line.startOfYear) {\r\n\t\t\t\tline.startOfYear = d.startOfYear;\r\n\t\t\t\tif (line.startOfYear) {\r\n\t\t\t\t\tline.date = d.date;\r\n\t\t\t\t\t// line.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!line.startOfQuarter) {\r\n\t\t\t\tline.startOfQuarter = d.startOfQuarter;\r\n\t\t\t\tif (line.startOfQuarter && !line.startOfYear) {\r\n\t\t\t\t\tline.date = d.date;\r\n\t\t\t\t\t// line.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!line.startOfMonth) {\r\n\t\t\t\tline.startOfMonth = d.startOfMonth;\r\n\t\t\t\tif (line.startOfMonth && !line.startOfQuarter) {\r\n\t\t\t\t\tline.date = d.date;\r\n\t\t\t\t\t// line.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!line.startOfWeek) {\r\n\t\t\t\tline.startOfWeek = d.startOfWeek;\r\n\t\t\t\tif (line.startOfWeek && !line.startOfMonth) {\r\n\t\t\t\t\tline.date = d.date;\r\n\t\t\t\t\t// line.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tline.volume = (line.volume || 0) + d.volume;\r\n\t\t\tline.high = Math.max(line.high, d.high);\r\n\t\t\tline.low = Math.min(line.low, d.low);\r\n\t\t\tline.to = dateAccessor(d);\r\n\r\n\t\t\tvar priceMovement = (source(d) - line.close);\r\n\r\n\t\t\t// console.log(source(d), priceMovement)\r\n\t\t\tif ((line.close > line.open /* going up */ && priceMovement > 0 /* and moving in same direction */)\r\n\t\t\t\t\t|| (line.close < line.open /* going down */ && priceMovement < 0 /* and moving in same direction */)) {\r\n\t\t\t\tline.close = source(d);\r\n\t\t\t\tif (prevTrough && line.close < prevTrough) {\r\n\t\t\t\t\t// going below the prevTrough, so change from yang to yin\r\n\t\t\t\t\t// A yin line forms when a Kagi line breaks below the prior trough.\r\n\t\t\t\t\tline.changePoint = prevTrough;\r\n\t\t\t\t\tif (line.startAs !== \"yin\") {\r\n\t\t\t\t\t\tline.changeTo = \"yin\";\r\n\t\t\t\t\t\t// line.startAs = \"yang\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (prevPeak && line.close > prevPeak) {\r\n\t\t\t\t\t// going above the prevPeak, so change from yin to yang\r\n\t\t\t\t\t// A yang line forms when a Kagi line breaks above the prior peak\r\n\t\t\t\t\tline.changePoint = prevPeak;\r\n\t\t\t\t\tif (line.startAs !== \"yang\") {\r\n\t\t\t\t\t\tline.changeTo = \"yang\";\r\n\t\t\t\t\t\t// line.startAs = \"yin\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if ((line.close > line.open /* going up */\r\n\t\t\t\t\t\t\t&& priceMovement < 0 /* and moving in other direction */\r\n\t\t\t\t\t\t\t&& Math.abs(priceMovement) > reversalThreshold(d) /* and the movement is big enough for reversal */)\r\n\t\t\t\t\t|| (line.close < line.open /* going down */\r\n\t\t\t\t\t\t\t&& priceMovement > 0 /* and moving in other direction */\r\n\t\t\t\t\t\t\t&& Math.abs(priceMovement) > reversalThreshold(d) /* and the movement is big enough for reversal */)) {\r\n\t\t\t\t// reverse direction\r\n\t\t\t\tvar nextLineOpen = line.close;\r\n\r\n\t\t\t\tdirection = (line.close - line.open) / Math.abs(line.close - line.open);\r\n\r\n\t\t\t\tvar nextChangePoint, nextChangeTo;\r\n\t\t\t\tif (direction < 0 /* if direction so far has been -ve*/) {\r\n\t\t\t\t\t// compare with line.close becomes prevTrough\r\n\t\t\t\t\tif (isNotDefined(prevPeak)) prevPeak = line.open;\r\n\t\t\t\t\tprevTrough = line.close;\r\n\t\t\t\t\tif (source(d) > prevPeak) {\r\n\t\t\t\t\t\tnextChangePoint = prevPeak;\r\n\t\t\t\t\t\tnextChangeTo = \"yang\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (isNotDefined(prevTrough)) prevTrough = line.open;\r\n\t\t\t\t\tprevPeak = line.close;\r\n\t\t\t\t\tif (source(d) < prevTrough) {\r\n\t\t\t\t\t\tnextChangePoint = prevTrough;\r\n\t\t\t\t\t\tnextChangeTo = \"yin\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (isNotDefined(line.startAs)) {\r\n\t\t\t\t\tline.startAs = direction > 0 ? \"yang\" : \"yin\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar startAs = line.changeTo || line.startAs;\r\n\t\t\t\tline.added = true;\r\n\t\t\t\tkagiData.push(line);\r\n\t\t\t\tdirection = -1 * direction; // direction is reversed\r\n\r\n\t\t\t\tline = { ...line };\r\n\t\t\t\tline.open = nextLineOpen;\r\n\t\t\t\tline.close = source(d);\r\n\t\t\t\tline.startAs = startAs;\r\n\t\t\t\tline.changePoint = nextChangePoint;\r\n\t\t\t\tline.changeTo = nextChangeTo;\r\n\t\t\t\tline.added = false;\r\n\t\t\t\tline.from = undefined;\r\n\t\t\t\tline.volume = 0;\r\n\t\t\t\tindexMutator(line, index);\r\n\t\t\t} else {\r\n\t\t\t\t// console.log(\"MOVING IN REV DIR BUT..\", line.open, line.close, source(d));\r\n\t\t\t}\r\n\t\t\tline.current = source(d);\r\n\t\t\tvar dir = line.close - line.open;\r\n\t\t\tdir = dir / Math.abs(dir);\r\n\t\t\tline.reverseAt = dir > 0 ? line.close - reversalThreshold(d) : line.open - reversalThreshold(d);\r\n\t\t});\r\n\t\tif (!line.added) kagiData.push(line);\r\n\r\n\t\treturn kagiData;\r\n\t};\r\n\tcalculator.reversalType = function(x) {\r\n\t\tif (!arguments.length) return reversalType;\r\n\t\treversalType = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.dateMutator = function(x) {\r\n\t\tif (!arguments.length) return dateMutator;\r\n\t\tdateMutator = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.dateAccessor = function(x) {\r\n\t\tif (!arguments.length) return dateAccessor;\r\n\t\tdateAccessor = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.indexMutator = function(x) {\r\n\t\tif (!arguments.length) return indexMutator;\r\n\t\tindexMutator = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/kagi.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { slidingWindow, last, isDefined } from \"../../utils\";\r\n\r\nexport default function() {\r\n\r\n\tvar windowSize = 9,\r\n\t\tsource = d => ({ open: d.open, high: d.high, low: d.low, close: d.close });\r\n\r\n\tfunction atr(data) {\r\n\r\n\t\tvar trueRangeAlgorithm = slidingWindow()\r\n\t\t\t.windowSize(2)\r\n\t\t\t.source(source)\r\n\t\t\t.undefinedValue(d => d.high - d.low) // the first TR value is simply the High minus the Low\r\n\t\t\t.accumulator(values => {\r\n\t\t\t\tvar prev = values[0];\r\n\t\t\t\tvar d = values[1];\r\n\t\t\t\treturn Math.max(d.high - d.low,\r\n\t\t\t\t\td.high - prev.close,\r\n\t\t\t\t\td.low - prev.close);\r\n\t\t\t});\r\n\r\n\t\tvar prevATR;\r\n\r\n\t\tvar atrAlgorithm = slidingWindow()\r\n\t\t\t.skipInitial(1) // trueRange starts from index 1 so ATR starts from 1\r\n\t\t\t.windowSize(windowSize)\r\n\t\t\t.accumulator(values => {\r\n\t\t\t\tvar tr = last(values);\r\n\t\t\t\tvar atr = isDefined(prevATR)\r\n\t\t\t\t\t? ((prevATR * (windowSize - 1)) + tr) / windowSize\r\n\t\t\t\t\t: d3.sum(values) / windowSize;\r\n\r\n\t\t\t\tprevATR = atr;\r\n\t\t\t\treturn atr;\r\n\t\t\t});\r\n\r\n\t\tvar newData = atrAlgorithm(trueRangeAlgorithm(data));\r\n\r\n\t\treturn newData;\r\n\t};\r\n\r\n\tatr.windowSize = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn windowSize;\r\n\t\t}\r\n\t\twindowSize = x;\r\n\t\treturn atr;\r\n\t};\r\n\r\n\tatr.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn atr;\r\n\t};\r\n\r\n\treturn atr;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/atr.js\n **/","\"use strict\";\r\n\r\nimport { isNotDefined } from \"../../utils\";\r\nimport { PointAndFigure as defaultOptions } from \"../defaultOptions\";\r\n\r\nfunction createBox(d, dateAccessor, dateMutator) {\r\n\tvar box = {\r\n\t\topen: d.open,\r\n\t\tfromDate: dateAccessor(d),\r\n\t\ttoDate: dateAccessor(d),\r\n\t\tstartOfYear: d.startOfYear,\r\n\t\tstartOfQuarter: d.startOfQuarter,\r\n\t\tstartOfMonth: d.startOfMonth,\r\n\t\tstartOfWeek: d.startOfWeek\r\n\t};\r\n\tdateMutator(box, dateAccessor(d));\r\n\treturn box;\r\n}\r\n\r\nfunction updateColumns(columnData, dateAccessor, dateMutator) {\r\n\tcolumnData.forEach(function(d) {\r\n\t\t// var lastBox = d.boxes[d.boxes.length - 1];\r\n\r\n\t\td.startOfYear = false;\r\n\t\td.startOfQuarter = false;\r\n\t\td.startOfMonth = false;\r\n\t\td.startOfWeek = false;\r\n\r\n\t\td.boxes.forEach(function(eachBox) {\r\n\t\t\tif (isNotDefined(d.open)) d.open = eachBox.open;\r\n\t\t\td.close = eachBox.close;\r\n\t\t\td.high = Math.max(d.open, d.close);\r\n\t\t\td.low = Math.min(d.open, d.close);\r\n\r\n\t\t\tif (isNotDefined(d.fromDate)) d.fromDate = eachBox.fromDate;\r\n\t\t\tif (isNotDefined(d.date)) d.date = eachBox.date;\r\n\t\t\td.toDate = eachBox.toDate;\r\n\r\n\t\t\tif (eachBox.startOfYear) {\r\n\t\t\t\td.startOfYear = d.startOfYear || eachBox.startOfYear;\r\n\t\t\t\td.startOfQuarter = eachBox.startOfQuarter;\r\n\t\t\t\td.startOfMonth = eachBox.startOfMonth;\r\n\t\t\t\td.startOfWeek = eachBox.startOfWeek;\r\n\r\n\t\t\t\tdateMutator(d, dateAccessor(eachBox));\r\n\t\t\t}\r\n\t\t\tif (d.startOfQuarter !== true && eachBox.startOfQuarter) {\r\n\t\t\t\td.startOfQuarter = eachBox.startOfQuarter;\r\n\t\t\t\td.startOfMonth = eachBox.startOfMonth;\r\n\t\t\t\td.startOfWeek = eachBox.startOfWeek;\r\n\t\t\t\t// d.displayDate = eachBox.displayDate;\r\n\t\t\t\tdateMutator(d, dateAccessor(eachBox));\r\n\t\t\t}\r\n\t\t\tif (d.startOfMonth !== true && eachBox.startOfMonth) {\r\n\t\t\t\td.startOfMonth = eachBox.startOfMonth;\r\n\t\t\t\td.startOfWeek = eachBox.startOfWeek;\r\n\t\t\t\t// d.displayDate = eachBox.displayDate;\r\n\t\t\t\tdateMutator(d, dateAccessor(eachBox));\r\n\t\t\t}\r\n\t\t\tif (d.startOfWeek !== true && eachBox.startOfWeek) {\r\n\t\t\t\td.startOfWeek = eachBox.startOfWeek;\r\n\t\t\t\t// d.displayDate = eachBox.displayDate;\r\n\t\t\t\tdateMutator(d, dateAccessor(eachBox));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t// console.table(columnData);\r\n\t// console.table(rawData);\r\n\treturn columnData;\r\n}\r\n\r\n\r\nexport default function() {\r\n\tvar { reversal, boxSize, source } = defaultOptions;\r\n\tvar { dateAccessor, dateMutator, indexMutator, indexAccessor } = defaultOptions;\r\n\r\n\tfunction calculator(rawData) {\r\n\t\tvar pricingMethod = source;\r\n\r\n\r\n\t\tvar columnData = [];\r\n\r\n\t\tvar column = {\r\n\t\t\t\tboxes: [],\r\n\t\t\t\topen: rawData[0].open\r\n\t\t\t}, box = createBox(rawData[0], dateAccessor, dateMutator);\r\n\r\n\t\tindexMutator(column, 0);\r\n\t\tcolumnData.push(column);\r\n\r\n\t\trawData.forEach(function(d) {\r\n\t\t\tcolumn.volume = (column.volume || 0) + d.volume;\r\n\r\n\t\t\tif (!box.startOfYear) {\r\n\t\t\t\tbox.startOfYear = d.startOfYear;\r\n\t\t\t\tif (box.startOfYear) {\r\n\t\t\t\t\tdateMutator(box, dateAccessor(d));\r\n\t\t\t\t\t// box.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!box.startOfYear && !box.startOfQuarter) {\r\n\t\t\t\tbox.startOfQuarter = d.startOfQuarter;\r\n\t\t\t\tif (box.startOfQuarter && !box.startOfYear) {\r\n\t\t\t\t\tdateMutator(box, dateAccessor(d));\r\n\t\t\t\t\t// box.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!box.startOfQuarter && !box.startOfMonth) {\r\n\t\t\t\tbox.startOfMonth = d.startOfMonth;\r\n\t\t\t\tif (box.startOfMonth && !box.startOfQuarter) {\r\n\t\t\t\t\tdateMutator(box, dateAccessor(d));\r\n\t\t\t\t\t// box.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!box.startOfMonth && !box.startOfWeek) {\r\n\t\t\t\tbox.startOfWeek = d.startOfWeek;\r\n\t\t\t\tif (box.startOfWeek && !box.startOfMonth) {\r\n\t\t\t\t\tdateMutator(box, dateAccessor(d));\r\n\t\t\t\t\t// box.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (columnData.length === 1 && column.boxes.length === 0) {\r\n\t\t\t\tlet upwardMovement = (Math.max((pricingMethod(d).high - column.open), 0)); // upward movement\r\n\t\t\t\tlet downwardMovement = Math.abs(Math.min((column.open - pricingMethod(d).low), 0)); // downward movement\r\n\t\t\t\tcolumn.direction = upwardMovement > downwardMovement ? 1 : -1;\r\n\t\t\t\tif (boxSize * reversal < upwardMovement\r\n\t\t\t\t\t|| boxSize * reversal < downwardMovement) {\r\n\t\t\t\t\t// enough movement to trigger a reversal\r\n\t\t\t\t\tbox.toDate = dateAccessor(d);\r\n\t\t\t\t\tbox.open = column.open;\r\n\t\t\t\t\tlet noOfBoxes = column.direction > 0\r\n\t\t\t\t\t\t\t\t\t\t? Math.floor(upwardMovement / boxSize)\r\n\t\t\t\t\t\t\t\t\t\t: Math.floor(downwardMovement / boxSize);\r\n\t\t\t\t\tfor (let i = 0; i < noOfBoxes; i++) {\r\n\t\t\t\t\t\tbox.close = box.open + column.direction * boxSize;\r\n\t\t\t\t\t\tlet prevBoxClose = box.close;\r\n\t\t\t\t\t\tcolumn.boxes.push(box);\r\n\t\t\t\t\t\tbox = createBox(box, dateAccessor, dateMutator);\r\n\t\t\t\t\t\t// box = cloneMe(box);\r\n\t\t\t\t\t\tbox.open = prevBoxClose;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbox.fromDate = dateAccessor(d);\r\n\t\t\t\t\tbox.date = dateAccessor(d);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// one or more boxes already formed in the current column\r\n\t\t\t\tlet upwardMovement = (Math.max((pricingMethod(d).high - box.open), 0)); // upward movement\r\n\t\t\t\tlet downwardMovement = Math.abs(Math.min((pricingMethod(d).low - box.open), 0)); // downward movement\r\n\r\n\t\t\t\tif ((column.direction > 0 && upwardMovement > boxSize) /* rising column AND box can be formed */\r\n\t\t\t\t\t\t|| (column.direction < 0 && downwardMovement > boxSize) /* falling column AND box can be formed */ ) {\r\n\t\t\t\t\t// form another box\r\n\t\t\t\t\tbox.close = box.open + column.direction * boxSize;\r\n\t\t\t\t\tbox.toDate = dateAccessor(d);\r\n\t\t\t\t\tlet prevBoxClose = box.close;\r\n\t\t\t\t\tcolumn.boxes.push(box);\r\n\t\t\t\t\tbox = createBox(d, dateAccessor, dateMutator);\r\n\t\t\t\t\tbox.open = prevBoxClose;\r\n\t\t\t\t\tbox.fromDate = dateAccessor(d);\r\n\t\t\t\t\tdateMutator(box, dateAccessor(d));\r\n\t\t\t\t} else if ((column.direction > 0 && downwardMovement > boxSize * reversal) /* rising column and there is downward movement to trigger a reversal */\r\n\t\t\t\t\t\t|| (column.direction < 0 && upwardMovement > boxSize * reversal)/* falling column and there is downward movement to trigger a reversal */) {\r\n\t\t\t\t\t// reversal\r\n\r\n\t\t\t\t\tbox.open = box.open + -1 * column.direction * boxSize;\r\n\t\t\t\t\tbox.toDate = dateAccessor(d);\r\n\t\t\t\t\t// box.displayDate = d.displayDate;\r\n\t\t\t\t\tdateMutator(box, dateAccessor(d));\r\n\t\t\t\t\t// box.startOfYear = d.startOfYear;\r\n\t\t\t\t\t// box.startOfQuarter = d.startOfQuarter;\r\n\t\t\t\t\t// box.startOfMonth = d.startOfMonth;\r\n\t\t\t\t\t// box.startOfWeek = d.startOfWeek;\r\n\t\t\t\t\t// console.table(column.boxes);\r\n\t\t\t\t\tvar idx = indexAccessor(column) + 1;\r\n\t\t\t\t\tcolumn = {\r\n\t\t\t\t\t\tboxes: [],\r\n\t\t\t\t\t\tvolume: 0,\r\n\t\t\t\t\t\tdirection: -1 * column.direction\r\n\t\t\t\t\t};\r\n\t\t\t\t\tindexMutator(column, idx);\r\n\t\t\t\t\tlet noOfBoxes = column.direction > 0\r\n\t\t\t\t\t\t\t\t\t\t? Math.floor(upwardMovement / boxSize)\r\n\t\t\t\t\t\t\t\t\t\t: Math.floor(downwardMovement / boxSize);\r\n\t\t\t\t\tfor (let i = 0; i < noOfBoxes; i++) {\r\n\t\t\t\t\t\tbox.close = box.open + column.direction * boxSize;\r\n\t\t\t\t\t\tvar prevBoxClose = box.close;\r\n\t\t\t\t\t\tcolumn.boxes.push(box);\r\n\t\t\t\t\t\tbox = createBox(d, dateAccessor, dateMutator);\r\n\t\t\t\t\t\tbox.open = prevBoxClose;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolumnData.push(column);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tupdateColumns(columnData, dateAccessor, dateMutator);\r\n\r\n\t\treturn columnData;\r\n\t};\r\n\tcalculator.reversal = function(x) {\r\n\t\tif (!arguments.length) return reversal;\r\n\t\treversal = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.boxSize = function(x) {\r\n\t\tif (!arguments.length) return boxSize;\r\n\t\tboxSize = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.source = function(x) {\r\n\t\tif (!arguments.length) return source;\r\n\t\tsource = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.dateMutator = function(x) {\r\n\t\tif (!arguments.length) return dateMutator;\r\n\t\tdateMutator = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.dateAccessor = function(x) {\r\n\t\tif (!arguments.length) return dateAccessor;\r\n\t\tdateAccessor = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.indexMutator = function(x) {\r\n\t\tif (!arguments.length) return indexMutator;\r\n\t\tindexMutator = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.indexAccessor = function(x) {\r\n\t\tif (!arguments.length) return indexAccessor;\r\n\t\tindexAccessor = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/pointAndFigure.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport { merge, isNotDefined } from \"../../utils\";\r\n\r\nimport atr from \"./atr\";\r\n\r\nimport { Renko as defaultOptions } from \"../defaultOptions\";\r\n\r\nexport default function() {\r\n\r\n\tvar { reversalType, fixedBrickSize, source, period: windowSize } = defaultOptions;\r\n\tvar { dateAccessor, dateMutator, indexMutator, indexAccessor } = defaultOptions;\r\n\r\n\tfunction calculator(rawData) {\r\n\t\tvar pricingMethod = source, brickSize;\r\n\r\n\t\tif (reversalType === \"ATR\") {\r\n\t\t\t// calculateATR(rawData, period);\r\n\t\t\tvar atrAlgorithm = atr().windowSize(windowSize);\r\n\r\n\t\t\tvar atrCalculator = merge()\r\n\t\t\t\t.algorithm(atrAlgorithm)\r\n\t\t\t\t.merge((d, c) => { d[\"atr\" + windowSize] = c; } );\r\n\r\n\t\t\tatrCalculator(rawData);\r\n\t\t\tbrickSize = d => d[\"atr\" + windowSize];\r\n\t\t} else {\r\n\t\t\tbrickSize = d3.functor(fixedBrickSize);\r\n\t\t}\r\n\r\n\t\tvar renkoData = [];\r\n\r\n\t\tvar index = 0, prevBrickClose = rawData[index].open, prevBrickOpen = rawData[index].open;\r\n\t\tvar brick = {}, direction = 0;\r\n\r\n\t\trawData.forEach( function(d) {\r\n\t\t\tif (isNotDefined(brick.from)) {\r\n\t\t\t\tbrick.high = d.high;\r\n\t\t\t\tbrick.low = d.low;\r\n\t\t\t\tbrick.startOfYear = d.startOfYear;\r\n\t\t\t\tbrick.startOfQuarter = d.startOfQuarter;\r\n\t\t\t\tbrick.startOfMonth = d.startOfMonth;\r\n\t\t\t\tbrick.startOfWeek = d.startOfWeek;\r\n\r\n\t\t\t\tbrick.from = indexAccessor(d);\r\n\t\t\t\tbrick.fromDate = dateAccessor(d);\r\n\t\t\t\tindexMutator(brick, index++);\r\n\t\t\t\tdateMutator(brick, dateAccessor(d));\r\n\t\t\t}\r\n\t\t\tbrick.volume = (brick.volume || 0) + d.volume;\r\n\r\n\t\t\tvar prevCloseToHigh = (prevBrickClose - pricingMethod(d).high),\r\n\t\t\t\tprevCloseToLow = (prevBrickClose - pricingMethod(d).low),\r\n\t\t\t\tprevOpenToHigh = (prevBrickOpen - pricingMethod(d).high),\r\n\t\t\t\tprevOpenToLow = (prevBrickOpen - pricingMethod(d).low),\r\n\t\t\t\tpriceMovement = Math.min(\r\n\t\t\t\t\tMath.abs(prevCloseToHigh),\r\n\t\t\t\t\tMath.abs(prevCloseToLow),\r\n\t\t\t\t\tMath.abs(prevOpenToHigh),\r\n\t\t\t\t\tMath.abs(prevOpenToLow));\r\n\r\n\r\n\t\t\tbrick.high = Math.max(brick.high, d.high);\r\n\t\t\tbrick.low = Math.min(brick.low, d.low);\r\n\r\n\t\t\tif (!brick.startOfYear) {\r\n\t\t\t\tbrick.startOfYear = d.startOfYear;\r\n\t\t\t\tif (brick.startOfYear) {\r\n\t\t\t\t\tdateMutator(brick, dateAccessor(d));\r\n\t\t\t\t\t// brick.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!brick.startOfQuarter) {\r\n\t\t\t\tbrick.startOfQuarter = d.startOfQuarter;\r\n\t\t\t\tif (brick.startOfQuarter && !brick.startOfYear) {\r\n\t\t\t\t\tdateMutator(brick, dateAccessor(d));\r\n\t\t\t\t\t// brick.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!brick.startOfMonth) {\r\n\t\t\t\tbrick.startOfMonth = d.startOfMonth;\r\n\t\t\t\tif (brick.startOfMonth && !brick.startOfQuarter) {\r\n\t\t\t\t\tdateMutator(brick, dateAccessor(d));\r\n\t\t\t\t\t// brick.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!brick.startOfWeek) {\r\n\t\t\t\tbrick.startOfWeek = d.startOfWeek;\r\n\t\t\t\tif (brick.startOfWeek && !brick.startOfMonth) {\r\n\t\t\t\t\tdateMutator(brick, dateAccessor(d));\r\n\t\t\t\t\t// brick.displayDate = d.displayDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// d.brick = JSON.stringify(brick);\r\n\t\t\tif (brickSize(d)) {\r\n\t\t\t\tvar noOfBricks = Math.floor(priceMovement / brickSize(d));\r\n\r\n\t\t\t\tbrick.open = (Math.abs(prevCloseToHigh) < Math.abs(prevOpenToHigh)\r\n\t\t\t\t\t|| Math.abs(prevCloseToLow) < Math.abs(prevOpenToLow))\r\n\t\t\t\t\t\t\t\t? prevBrickClose\r\n\t\t\t\t\t\t\t\t: prevBrickOpen;\r\n\r\n\t\t\t\tif (noOfBricks >= 1) {\r\n\t\t\t\t\tlet j = 0;\r\n\t\t\t\t\tfor (j = 0; j < noOfBricks; j++) {\r\n\t\t\t\t\t\tbrick.close = (brick.open < pricingMethod(d).high)\r\n\t\t\t\t\t\t\t\t\t\t// if brick open is less than current price it means it is green/hollow brick\r\n\t\t\t\t\t\t\t\t\t\t\t? brick.open + brickSize(d)\r\n\t\t\t\t\t\t\t\t\t\t\t: brick.open - brickSize(d);\r\n\t\t\t\t\t\tdirection = brick.close > brick.open ? 1 : -1;\r\n\t\t\t\t\t\tbrick.direction = direction;\r\n\t\t\t\t\t\tbrick.to = indexAccessor(d);\r\n\t\t\t\t\t\tbrick.toDate = dateAccessor(d);\r\n\t\t\t\t\t\t// brick.diff = brick.open - brick.close;\r\n\t\t\t\t\t\t// brick.atr = d.atr;\r\n\t\t\t\t\t\tbrick.fullyFormed = true;\r\n\t\t\t\t\t\trenkoData.push(brick);\r\n\r\n\t\t\t\t\t\tprevBrickClose = brick.close;\r\n\t\t\t\t\t\tprevBrickOpen = brick.open;\r\n\r\n\t\t\t\t\t\tvar newBrick = {\r\n\t\t\t\t\t\t\thigh: brick.high,\r\n\t\t\t\t\t\t\tlow: brick.low,\r\n\t\t\t\t\t\t\topen: brick.close,\r\n\t\t\t\t\t\t\tstartOfYear: false,\r\n\t\t\t\t\t\t\tstartOfMonth: false,\r\n\t\t\t\t\t\t\tstartOfQuarter: false,\r\n\t\t\t\t\t\t\tstartOfWeek: false\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbrick = newBrick;\r\n\t\t\t\t\t\tbrick.from = indexAccessor(d);\r\n\t\t\t\t\t\tbrick.fromDate = dateAccessor(d);\r\n\t\t\t\t\t\tindexMutator(brick, index + j);\r\n\t\t\t\t\t\tdateMutator(brick, dateAccessor(d));\r\n\t\t\t\t\t\tbrick.volume = (brick.volume || 0) + d.volume;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindex = index + j - 1;\r\n\t\t\t\t\tbrick = {};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (indexAccessor(d) === rawData.length - 1) {\r\n\t\t\t\t\t\tbrick.close = direction > 0 ? pricingMethod(d).high : pricingMethod(d).low;\r\n\t\t\t\t\t\tbrick.to = indexAccessor(d);\r\n\t\t\t\t\t\tbrick.toDate = dateAccessor(d);\r\n\t\t\t\t\t\tdateMutator(brick, dateAccessor(d));\r\n\r\n\t\t\t\t\t\tbrick.fullyFormed = false;\r\n\t\t\t\t\t\trenkoData.push(brick);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t\treturn renkoData;\r\n\r\n\t};\r\n\tcalculator.reversalType = function(x) {\r\n\t\tif (!arguments.length) return reversalType;\r\n\t\treversalType = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.fixedBrickSize = function(x) {\r\n\t\tif (!arguments.length) return fixedBrickSize;\r\n\t\tfixedBrickSize = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.source = function(x) {\r\n\t\tif (!arguments.length) return source;\r\n\t\tsource = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.windowSize = function(x) {\r\n\t\tif (!arguments.length) return windowSize;\r\n\t\twindowSize = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.dateMutator = function(x) {\r\n\t\tif (!arguments.length) return dateMutator;\r\n\t\tdateMutator = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.dateAccessor = function(x) {\r\n\t\tif (!arguments.length) return dateAccessor;\r\n\t\tdateAccessor = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.indexMutator = function(x) {\r\n\t\tif (!arguments.length) return indexMutator;\r\n\t\tindexMutator = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.indexAccessor = function(x) {\r\n\t\tif (!arguments.length) return indexAccessor;\r\n\t\tindexAccessor = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/renko.js\n **/","\"use strict\";\r\n\r\n/*\r\nhttps://github.com/ScottLogic/d3fc/blob/master/src/indicator/algorithm/calculator/macd.js\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014-2015 Scott Logic Ltd.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nimport ema from \"./ema\";\r\n\r\nimport { isDefined, identity, zipper } from \"../../utils\";\r\nimport { MACD as defaultOptions } from \"../defaultOptions\";\r\n\r\nexport default function() {\r\n\r\n\tvar { fast, slow, signal } = defaultOptions;\r\n\tvar source = identity;\r\n\r\n\tfunction calculator(data) {\r\n\r\n\t\tvar fastEMA = ema()\r\n\t\t\t.windowSize(fast)\r\n\t\t\t.source(source);\r\n\t\tvar slowEMA = ema()\r\n\t\t\t.windowSize(slow)\r\n\t\t\t.source(source);\r\n\t\tvar signalEMA = ema()\r\n\t\t\t.windowSize(signal);\r\n\r\n\t\tvar macdCalculator = zipper()\r\n\t\t\t.combine((fastEMA, slowEMA) => (isDefined(fastEMA) && isDefined(slowEMA)) ? fastEMA - slowEMA : undefined);\r\n\r\n\t\tvar macdArray = macdCalculator(fastEMA(data), slowEMA(data));\r\n\r\n\t\tvar undefinedArray = new Array(slow);\r\n\t\tvar signalArray = undefinedArray.concat(signalEMA(macdArray.slice(slow)));\r\n\r\n\t\tvar zip = zipper()\r\n\t\t\t.combine((macd, signal) => ({\r\n\t\t\t\tmacd,\r\n\t\t\t\tsignal,\r\n\t\t\t\tdivergence: (isDefined(macd) && isDefined(signal)) ? macd - signal : undefined,\r\n\t\t\t}));\r\n\r\n\t\tvar macd = zip(macdArray, signalArray);\r\n\r\n\t\treturn macd;\r\n\t};\r\n\r\n\tcalculator.fast = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn fast;\r\n\t\t}\r\n\t\tfast = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.slow = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn slow;\r\n\t\t}\r\n\t\tslow = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.signal = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn signal;\r\n\t\t}\r\n\t\tsignal = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/macd.js\n **/","\"use strict\";\r\n\r\n/*\r\nhttps://github.com/ScottLogic/d3fc/blob/master/src/indicator/algorithm/calculator/relativeStrengthIndex.js\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014-2015 Scott Logic Ltd.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { isDefined, last, identity, slidingWindow } from \"../../utils\";\r\nimport { RSI as defaultOptions } from \"../defaultOptions\";\r\n\r\nexport default function() {\r\n\r\n\tvar { period: windowSize } = defaultOptions;\r\n\tvar source = identity;\r\n\r\n\tfunction calculator(data) {\r\n\r\n\t\tvar prevAvgGain, prevAvgLoss;\r\n\t\tvar rsiAlgorithm = slidingWindow()\r\n\t\t\t.windowSize(windowSize)\r\n\t\t\t.accumulator((values) => {\r\n\r\n\t\t\t\tvar avgGain = isDefined(prevAvgGain)\r\n\t\t\t\t\t? (prevAvgGain * (windowSize - 1) + last(values).gain) / windowSize\r\n\t\t\t\t\t: d3.mean(values, (each) => each.gain);\r\n\r\n\t\t\t\tvar avgLoss = isDefined(prevAvgLoss)\r\n\t\t\t\t\t? (prevAvgLoss * (windowSize - 1) + last(values).loss) / windowSize\r\n\t\t\t\t\t: d3.mean(values, (each) => each.loss);\r\n\r\n\t\t\t\tvar relativeStrength = avgGain / avgLoss;\r\n\t\t\t\tvar rsi = 100 - (100 / (1 + relativeStrength));\r\n\r\n\t\t\t\tprevAvgGain = avgGain;\r\n\t\t\t\tprevAvgLoss = avgLoss;\r\n\r\n\t\t\t\treturn rsi;\r\n\t\t\t});\r\n\r\n\t\tvar gainsAndLossesCalculator = slidingWindow()\r\n\t\t\t.windowSize(2)\r\n\t\t\t.undefinedValue(() => [0, 0])\r\n\t\t\t.accumulator(tuple => {\r\n\t\t\t\tvar prev = tuple[0];\r\n\t\t\t\tvar now = tuple[1];\r\n\t\t\t\tvar change = source(now) - source(prev);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgain: Math.max(change, 0),\r\n\t\t\t\t\tloss: Math.abs(Math.min(change, 0)),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\tvar gainsAndLosses = gainsAndLossesCalculator(data);\r\n\r\n\t\tvar rsiData = rsiAlgorithm(gainsAndLosses);\r\n\r\n\t\treturn rsiData;\r\n\t};\r\n\r\n\tcalculator.windowSize = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn windowSize;\r\n\t\t}\r\n\t\twindowSize = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/rsi.js\n **/","\"use strict\";\r\n\r\n/*\r\nhttps://github.com/ScottLogic/d3fc/blob/master/src/indicator/algorithm/calculator/stochasticOscillator.js\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014-2015 Scott Logic Ltd.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { last, slidingWindow, zipper } from \"../../utils\";\r\nimport { FullStochasticOscillator as defaultOptions } from \"../defaultOptions\";\r\n\r\nexport default function() {\r\n\r\n\tvar { period: windowSize, K: kWindowSize, D: dWindowSize, source } = defaultOptions;\r\n\r\n\tvar high = d => source(d).high,\r\n\t\tlow = d => source(d).low,\r\n\t\tclose = d => source(d).close;\r\n\r\n\tfunction calculator(data) {\r\n\t\tvar kWindow = slidingWindow()\r\n\t\t\t.windowSize(windowSize)\r\n\t\t\t.accumulator(values => {\r\n\r\n\t\t\t\tvar highestHigh = d3.max(values, high);\r\n\t\t\t\tvar lowestLow = d3.min(values, low);\r\n\r\n\t\t\t\tvar currentClose = close(last(values));\r\n\t\t\t\tvar k = (currentClose - lowestLow) / (highestHigh - lowestLow) * 100;\r\n\r\n\t\t\t\treturn k;\r\n\t\t\t});\r\n\r\n\t\tvar kSmoothed = slidingWindow()\r\n\t\t\t.skipInitial(windowSize - 1)\r\n\t\t\t.windowSize(kWindowSize)\r\n\t\t\t.accumulator(values => d3.mean(values));\r\n\r\n\t\tvar dWindow = slidingWindow()\r\n\t\t\t.skipInitial(windowSize - 1 + kWindowSize - 1)\r\n\t\t\t.windowSize(dWindowSize)\r\n\t\t\t.accumulator(values => d3.mean(values));\r\n\r\n\t\tvar stoAlgorithm = zipper()\r\n\t\t\t.combine((K, D) => ({ K, D }));\r\n\r\n\t\tvar kData = kSmoothed(kWindow(data));\r\n\t\tvar dData = dWindow(kData);\r\n\r\n\t\tvar newData = stoAlgorithm(kData, dData);\r\n\r\n\t\treturn newData;\r\n\t};\r\n\r\n\tcalculator.windowSize = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn windowSize;\r\n\t\t}\r\n\t\twindowSize = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.kWindowSize = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn kWindowSize;\r\n\t\t}\r\n\t\tkWindowSize = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.dWindowSize = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn dWindowSize;\r\n\t\t}\r\n\t\tdWindowSize = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/sto.js\n **/","\"use strict\";\r\n\r\nimport { slidingWindow } from \"../../utils\";\r\nimport { ForceIndex as defaultOptions } from \"../defaultOptions\";\r\n\r\nexport default function() {\r\n\r\n\tvar { close, volume } = defaultOptions;\r\n\r\n\tfunction calculator(data) {\r\n\r\n\t\tvar forceIndexCalulator = slidingWindow()\r\n\t\t\t.windowSize(2)\r\n\t\t\t.accumulator(([prev, curr]) => (close(curr) - close(prev)) * volume(curr));\r\n\r\n\t\tvar forceIndex = forceIndexCalulator(data);\r\n\r\n\t\treturn forceIndex;\r\n\t};\r\n\r\n\tcalculator.close = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn close;\r\n\t\t}\r\n\t\tclose = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.volume = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn volume;\r\n\t\t}\r\n\t\tvolume = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/forceIndex.js\n **/","\"use strict\";\r\n\r\n/*\r\nhttps://github.com/ScottLogic/d3fc/blob/master/src/indicator/algorithm/calculator/elderRay.js\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014-2015 Scott Logic Ltd.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport ema from \"./ema\";\r\n\r\nimport { ElderRay as defaultOptions } from \"../defaultOptions\";\r\nimport { isDefined, zipper, slidingWindow } from \"../../utils\";\r\n\r\nexport default function() {\r\n\r\n\tvar { period: windowSize, source, movingAverageType, ohlc } = defaultOptions;\r\n\tvar source = d3.functor(source);\r\n\r\n\tfunction calculator(data) {\r\n\r\n\t\tvar meanAlgorithm = movingAverageType === \"ema\"\r\n\t\t\t? ema().windowSize(windowSize).source(source)\r\n\t\t\t: slidingWindow().windowSize(windowSize).accumulator(values => d3.mean(values)).source(source);\r\n\r\n\t\tvar zip = zipper()\r\n\t\t\t.combine((datum, mean) => {\r\n\t\t\t\tvar bullPower = isDefined(mean) ? ohlc(datum).high - mean : undefined;\r\n\t\t\t\tvar bearPower = isDefined(mean) ? ohlc(datum).low - mean : undefined;\r\n\t\t\t\treturn { bullPower, bearPower };\r\n\t\t\t});\r\n\r\n\t\tvar newData = zip(data, meanAlgorithm(data));\r\n\t\treturn newData;\r\n\t};\r\n\r\n\tcalculator.windowSize = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn windowSize;\r\n\t\t}\r\n\t\twindowSize = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.ohlc = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn ohlc;\r\n\t\t}\r\n\t\tohlc = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.movingAverageType = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn movingAverageType;\r\n\t\t}\r\n\t\tmovingAverageType = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\tcalculator.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/elderRay.js\n **/","\"use strict\";\r\n\r\nimport { first } from \"../../utils\";\r\n\r\nexport default function() {\r\n\tvar base = d => d.close;\r\n\tvar mainKeys = [];\r\n\tvar compareKeys = [];\r\n\r\n\tfunction calculator(data) {\r\n\t\tvar f = first(data);\r\n\t\tvar b = base(f);\r\n\t\tvar compareData = data.map(d => {\r\n\t\t\tvar result = {};\r\n\r\n\t\t\tmainKeys.forEach(key => {\r\n\t\t\t\tresult[key] = (d[key] - b) / b;\r\n\t\t\t});\r\n\r\n\t\t\tcompareKeys.forEach(key => {\r\n\t\t\t\tresult[key] = (d[key] - f[key]) / f[key];\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t});\r\n\t\t// console.log(compareData[20]);\r\n\t\treturn compareData;\r\n\t};\r\n\tcalculator.base = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn base;\r\n\t\t}\r\n\t\tbase = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.mainKeys = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn mainKeys;\r\n\t\t}\r\n\t\tmainKeys = x;\r\n\t\treturn calculator;\r\n\t};\r\n\tcalculator.compareKeys = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn compareKeys;\r\n\t\t}\r\n\t\tcompareKeys = x;\r\n\t\treturn calculator;\r\n\t};\r\n\treturn calculator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/algorithm/compare.js\n **/","\"use strict\";\r\n\r\nimport { overlayColors } from \"../utils\";\r\n\r\nvar i = 0;\r\n\r\nexport default function() {\r\n\r\n\tvar id = i++, accessor, stroke, fill, echo, type, tooltipLabel, domain, tickValues;\r\n\r\n\tfunction baseIndicator() {\r\n\t}\r\n\r\n\tbaseIndicator.id = function(x) {\r\n\t\tif (!arguments.length) return id;\r\n\t\tid = x;\r\n\t\treturn baseIndicator;\r\n\t};\r\n\tbaseIndicator.accessor = function(x) {\r\n\t\tif (!arguments.length) return accessor;\r\n\t\taccessor = x;\r\n\t\treturn baseIndicator;\r\n\t};\r\n\tbaseIndicator.stroke = function(x) {\r\n\t\tif (!arguments.length) return !stroke ? stroke = overlayColors(id) : stroke;\r\n\t\tstroke = x;\r\n\t\treturn baseIndicator;\r\n\t};\r\n\tbaseIndicator.fill = function(x) {\r\n\t\tif (!arguments.length) return !fill ? fill = overlayColors(id) : fill;\r\n\t\tfill = x;\r\n\t\treturn baseIndicator;\r\n\t};\r\n\tbaseIndicator.echo = function(x) {\r\n\t\tif (!arguments.length) return echo;\r\n\t\techo = x;\r\n\t\treturn baseIndicator;\r\n\t};\r\n\tbaseIndicator.type = function(x) {\r\n\t\tif (!arguments.length) return type;\r\n\t\ttype = x;\r\n\t\treturn baseIndicator;\r\n\t};\r\n\tbaseIndicator.tooltipLabel = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\tif (typeof tooltipLabel === \"function\") return tooltipLabel();\r\n\t\t\treturn tooltipLabel;\r\n\t\t}\r\n\t\ttooltipLabel = x;\r\n\t\treturn baseIndicator;\r\n\t};\r\n\tbaseIndicator.domain = function(x) {\r\n\t\tif (!arguments.length) return domain;\r\n\t\tdomain = x;\r\n\t\treturn baseIndicator;\r\n\t};\r\n\tbaseIndicator.tickValues = function(x) {\r\n\t\tif (!arguments.length) return tickValues;\r\n\t\ttickValues = x;\r\n\t\treturn baseIndicator;\r\n\t};\r\n\treturn baseIndicator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/baseIndicator.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge, slidingWindow } from \"../utils\";\r\n\r\nimport { SMA as defaultOptions } from \"./defaultOptions\";\r\nimport baseIndicator from \"./baseIndicator\";\r\n\r\nconst ALGORITHM_TYPE = \"SMA\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.sma);\r\n\r\n\tvar underlyingAlgorithm = slidingWindow()\r\n\t\t.windowSize(defaultOptions.period)\r\n\t\t.source(defaultOptions.source)\r\n\t\t.accumulator(values => d3.mean(values));\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.sma = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\tvar newData = mergedAlgorithm(data);\r\n\t\treturn newData;\r\n\t};\r\n\r\n\tbase.tooltipLabel(() => `${ALGORITHM_TYPE}(${underlyingAlgorithm.windowSize()})`);\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\", \"tooltipLabel\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"windowSize\", \"source\", \"undefinedValue\", \"skipInitial\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\r\n\treturn indicator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/sma.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge } from \"../utils\";\r\n\r\nimport { BollingerBand as defaultOptions } from \"./defaultOptions\";\r\nimport baseIndicator from \"./baseIndicator\";\r\nimport { bollingerband } from \"./algorithm\";\r\n\r\nconst ALGORITHM_TYPE = \"BollingerBand\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.bollingerBand)\r\n\t\t.stroke({\r\n\t\t\ttop: \"#964B00\",\r\n\t\t\tmiddle: \"#000000\",\r\n\t\t\tbottom: \"#964B00\",\r\n\t\t})\r\n\t\t.fill(\"#4682B4\");\r\n\r\n\tvar underlyingAlgorithm = bollingerband()\r\n\t\t.windowSize(defaultOptions.period)\r\n\t\t.movingAverageType(defaultOptions.movingAverageType)\r\n\t\t.multiplier(defaultOptions.multiplier)\r\n\t\t.source(defaultOptions.source);\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.bollingerBand = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\r\n\t\tvar newData = mergedAlgorithm(data);\r\n\t\treturn newData;\r\n\t};\r\n\r\n\tbase.tooltipLabel(() => `BB (${underlyingAlgorithm.windowSize()}, ${underlyingAlgorithm.multiplier()}`\r\n\t\t+ `, ${underlyingAlgorithm.movingAverageType()}): `);\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\", \"tooltipLabel\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"windowSize\", \"movingAverageType\", \"multiplier\", \"source\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\treturn indicator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/bollingerBand.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { haikinAshi } from \"./algorithm\";\r\nimport baseIndicator from \"./baseIndicator\";\r\n\r\nimport { merge } from \"../utils\";\r\n\r\nconst ALGORITHM_TYPE = \"HaikinAshi\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.ha);\r\n\r\n\tvar underlyingAlgorithm = haikinAshi();\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.ha = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\treturn mergedAlgorithm(data);\r\n\t};\r\n\r\n\td3.rebind(indicator, base, \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\");\r\n\t// d3.rebind(indicator, underlyingAlgorithm, \"windowSize\", \"source\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\");\r\n\r\n\treturn indicator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/haikinAshi.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { kagi } from \"./algorithm\";\r\nimport baseIndicator from \"./baseIndicator\";\r\n\r\nconst ALGORITHM_TYPE = \"Kagi\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE);\r\n\r\n\tvar underlyingAlgorithm = kagi();\r\n\r\n\tvar indicator = function(data) {\r\n\t\treturn underlyingAlgorithm(data);\r\n\t};\r\n\r\n\td3.rebind(indicator, base, \"id\", \"stroke\", \"fill\", \"echo\", \"type\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"dateAccessor\", \"dateMutator\", \"indexMutator\");\r\n\t// d3.rebind(indicator, mergedAlgorithm, \"merge\"/*, \"skipUndefined\"*/);\r\n\r\n\treturn indicator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/kagi.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { pointAndFigure } from \"./algorithm\";\r\nimport baseIndicator from \"./baseIndicator\";\r\n\r\nconst ALGORITHM_TYPE = \"PointAndFigure\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE);\r\n\r\n\tvar underlyingAlgorithm = pointAndFigure();\r\n\r\n\tvar indicator = function(data) {\r\n\t\treturn underlyingAlgorithm(data);\r\n\t};\r\n\r\n\td3.rebind(indicator, base, \"id\", \"stroke\", \"fill\", \"echo\", \"type\", \"tooltipLabel\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"dateAccessor\", \"dateMutator\", \"indexMutator\", \"indexAccessor\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"reversal\", \"boxSize\", \"source\");\r\n\t// d3.rebind(indicator, mergedAlgorithm, \"merge\"/*, \"skipUndefined\"*/);\r\n\r\n\treturn indicator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/pointAndFigure.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { renko } from \"./algorithm\";\r\nimport baseIndicator from \"./baseIndicator\";\r\n\r\nconst ALGORITHM_TYPE = \"Renko\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE);\r\n\r\n\tvar underlyingAlgorithm = renko();\r\n\r\n\tvar indicator = function(data) {\r\n\t\treturn underlyingAlgorithm(data);\r\n\t};\r\n\r\n\td3.rebind(indicator, base, \"id\", \"stroke\", \"fill\", \"echo\", \"type\", \"tooltipLabel\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"dateAccessor\", \"dateMutator\", \"indexMutator\", \"indexAccessor\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"reversal\", \"boxSize\", \"source\");\r\n\r\n\treturn indicator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/renko.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge } from \"../utils\";\r\nimport { macd } from \"./algorithm\";\r\n\r\nimport baseIndicator from \"./baseIndicator\";\r\nimport { MACD as defaultOptions } from \"./defaultOptions\";\r\n\r\nconst ALGORITHM_TYPE = \"MACD\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.fill(defaultOptions.fill)\r\n\t\t.stroke(defaultOptions.stroke)\r\n\t\t.accessor(d => d.macd);\r\n\r\n\tvar underlyingAlgorithm = macd()\r\n\t\t.fast(defaultOptions.fast)\r\n\t\t.slow(defaultOptions.slow)\r\n\t\t.signal(defaultOptions.signal)\r\n\t\t.source(defaultOptions.source);\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.macd = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\treturn mergedAlgorithm(data);\r\n\t};\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\", \"tooltipLabel\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"source\", \"fast\", \"slow\", \"signal\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\treturn indicator;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/macd.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge } from \"../utils\";\r\nimport { rsi } from \"./algorithm\";\r\n\r\nimport baseIndicator from \"./baseIndicator\";\r\nimport { RSI as defaultOptions } from \"./defaultOptions\";\r\n\r\nconst ALGORITHM_TYPE = \"RSI\";\r\n\r\nexport default function() {\r\n\tvar { overSold, middle, overBought } = defaultOptions;\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.rsi);\r\n\r\n\tvar underlyingAlgorithm = rsi()\r\n\t\t.windowSize(defaultOptions.period)\r\n\t\t.source(defaultOptions.source);\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.rsi = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\treturn mergedAlgorithm(data);\r\n\t};\r\n\tbase.tooltipLabel(() => `${ALGORITHM_TYPE} (${underlyingAlgorithm.windowSize()}): `);\r\n\r\n\tbase.domain([0, 100]);\r\n\tbase.tickValues([overSold, middle, overBought]);\r\n\r\n\tindicator.overSold = function(x) {\r\n\t\tif (!arguments.length) return overSold;\r\n\t\toverSold = x;\r\n\t\tbase.tickValues([overSold, middle, overBought]);\r\n\t\treturn indicator;\r\n\t};\r\n\tindicator.middle = function(x) {\r\n\t\tif (!arguments.length) return middle;\r\n\t\tmiddle = x;\r\n\t\tbase.tickValues([overSold, middle, overBought]);\r\n\t\treturn indicator;\r\n\t};\r\n\tindicator.overBought = function(x) {\r\n\t\tif (!arguments.length) return overBought;\r\n\t\toverBought = x;\r\n\t\tbase.tickValues([overSold, middle, overBought]);\r\n\t\treturn indicator;\r\n\t};\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\", \"tooltipLabel\", \"domain\", \"tickValues\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"source\", \"windowSize\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\treturn indicator;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/rsi.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge } from \"../utils\";\r\nimport { atr } from \"./algorithm\";\r\n\r\nimport baseIndicator from \"./baseIndicator\";\r\nimport { ATR as defaultOptions } from \"./defaultOptions\";\r\n\r\nconst ALGORITHM_TYPE = \"ATR\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.atr);\r\n\r\n\tvar underlyingAlgorithm = atr()\r\n\t\t.windowSize(defaultOptions.period)\r\n\t\t.source(defaultOptions.source);\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.atr = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\treturn mergedAlgorithm(data);\r\n\t};\r\n\r\n\tbase.tooltipLabel(() => `${ALGORITHM_TYPE}(${underlyingAlgorithm.windowSize()})`);\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\", \"tooltipLabel\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"source\", \"windowSize\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\treturn indicator;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/atr.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge } from \"../utils\";\r\nimport { sto } from \"./algorithm\";\r\n\r\nimport baseIndicator from \"./baseIndicator\";\r\nimport { FullStochasticOscillator as defaultOptions } from \"./defaultOptions\";\r\n\r\nconst ALGORITHM_TYPE = \"RSI\";\r\n\r\nexport default function() {\r\n\tvar { K, D, source, period, overSold, overBought, middle, stroke } = defaultOptions;\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.stroke(stroke)\r\n\t\t.accessor(d => d.sto);\r\n\r\n\tvar underlyingAlgorithm = sto()\r\n\t\t.windowSize(period)\r\n\t\t.kWindowSize(K)\r\n\t\t.dWindowSize(D)\r\n\t\t.source(source);\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.sto = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\treturn mergedAlgorithm(data);\r\n\t};\r\n\tbase.tooltipLabel(() => `${ALGORITHM_TYPE} (${underlyingAlgorithm.windowSize()}`\r\n\t\t\t+ `, ${underlyingAlgorithm.kWindowSize()}, ${underlyingAlgorithm.dWindowSize()}): `);\r\n\r\n\tbase.domain([0, 100]);\r\n\tbase.tickValues([overSold, middle, overBought]);\r\n\r\n\tindicator.overSold = function(x) {\r\n\t\tif (!arguments.length) return overSold;\r\n\t\toverSold = x;\r\n\t\tbase.tickValues([overSold, middle, overBought]);\r\n\t\treturn indicator;\r\n\t};\r\n\tindicator.middle = function(x) {\r\n\t\tif (!arguments.length) return middle;\r\n\t\tmiddle = x;\r\n\t\tbase.tickValues([overSold, middle, overBought]);\r\n\t\treturn indicator;\r\n\t};\r\n\tindicator.overBought = function(x) {\r\n\t\tif (!arguments.length) return overBought;\r\n\t\toverBought = x;\r\n\t\tbase.tickValues([overSold, middle, overBought]);\r\n\t\treturn indicator;\r\n\t};\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\", \"tooltipLabel\", \"domain\", \"tickValues\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"source\", \"windowSize\", \"kWindowSize\", \"dWindowSize\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\treturn indicator;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/stochasticOscilator.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge } from \"../utils\";\r\nimport { forceIndex } from \"./algorithm\";\r\n\r\nimport baseIndicator from \"./baseIndicator\";\r\nimport { ForceIndex as defaultOptions } from \"./defaultOptions\";\r\n\r\nconst ALGORITHM_TYPE = \"ForceIndex\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.forceIndex);\r\n\r\n\tvar underlyingAlgorithm = forceIndex()\r\n\t\t.volume(defaultOptions.volume)\r\n\t\t.close(defaultOptions.close);\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.forceIndex = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\treturn mergedAlgorithm(data);\r\n\t};\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"close\", \"volume\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\treturn indicator;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/forceIndex.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge } from \"../utils\";\r\nimport { elderRay } from \"./algorithm\";\r\n\r\nimport baseIndicator from \"./baseIndicator\";\r\nimport { ElderRay as defaultOptions } from \"./defaultOptions\";\r\n\r\nconst ALGORITHM_TYPE = \"ElderRay\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.elderRay);\r\n\r\n\tvar underlyingAlgorithm = elderRay()\r\n\t\t.windowSize(defaultOptions.period)\r\n\t\t.ohlc(defaultOptions.ohlc)\r\n\t\t.movingAverageType(defaultOptions.movingAverageType)\r\n\t\t.source(defaultOptions.source);\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.elderRay = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\treturn mergedAlgorithm(data);\r\n\t};\r\n\r\n\tbase.tooltipLabel(`${ALGORITHM_TYPE}: `);\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\", \"tooltipLabel\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"windowSize\", \"ohlc\", \"movingAverageType\", \"source\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\treturn indicator;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/elderRay.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge, slidingWindow } from \"../utils\";\r\n\r\nimport baseIndicator from \"./baseIndicator\";\r\n\r\nconst ALGORITHM_TYPE = \"Change\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.elderRay);\r\n\r\n\tvar underlyingAlgorithm = slidingWindow()\r\n\t\t.windowSize(2)\r\n\t\t.source(d => d.close)\r\n\t\t.accumulator(([prev, curr]) => {\r\n\t\t\tvar absoluteChange = prev - curr;\r\n\t\t\tvar percentChange = absoluteChange * 100 / prev;\r\n\t\t\treturn { absoluteChange, percentChange };\r\n\t\t});\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => {\r\n\t\t\tdatum.absoluteChange = indicator.absoluteChange;\r\n\t\t\tdatum.percentChange = indicator.percentChange;\r\n\t\t});\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\treturn mergedAlgorithm(data);\r\n\t};\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"windowSize\", \"source\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\treturn indicator;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/change.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { isDefined, isNotDefined, merge, slidingWindow } from \"../utils\";\r\n\r\nimport { ElderImpulse as defaultOptions } from \"./defaultOptions\";\r\nimport baseIndicator from \"./baseIndicator\";\r\n\r\nconst ALGORITHM_TYPE = \"ElderImpulse\";\r\n\r\nexport default function() {\r\n\r\n\tvar macdSource, emaSource;\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.stroke(d => defaultOptions.stroke[d.elderImpulse])\r\n\t\t.accessor([d => d.close])\r\n\t\t.fill(undefined);\r\n\r\n\tvar underlyingAlgorithm = slidingWindow()\r\n\t\t.windowSize(2)\r\n\t\t.undefinedValue(\"neutral\")\r\n\t\t.accumulator(([prev, curr]) => {\r\n\t\t\tif (isNotDefined(macdSource)) throw new Error(`macdSource not defined for ${ALGORITHM_TYPE} calculator`);\r\n\t\t\tif (isNotDefined(emaSource)) throw new Error(`emaSource not defined for ${ALGORITHM_TYPE} calculator`);\r\n\r\n\t\t\tif (isDefined(macdSource(prev)) && isDefined(emaSource(prev))) {\r\n\t\t\t\tvar prevMACDDivergence = macdSource(prev).divergence;\r\n\t\t\t\tvar currMACDDivergence = macdSource(curr).divergence;\r\n\r\n\t\t\t\tvar prevEMA = emaSource(prev);\r\n\t\t\t\tvar currEMA = emaSource(curr);\r\n\r\n\t\t\t\tif (currMACDDivergence >= prevMACDDivergence\r\n\t\t\t\t\t&& currEMA >= prevEMA) return \"up\";\r\n\r\n\t\t\t\tif (currMACDDivergence <= prevMACDDivergence\r\n\t\t\t\t\t&& currEMA <= prevEMA) return \"down\";\r\n\t\t\t}\r\n\t\t\treturn \"neutral\";\r\n\t\t});\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.elderImpulse = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tvar newData = mergedAlgorithm(data);\r\n\t\treturn newData;\r\n\t};\r\n\tindicator.macdSource = function(x) {\r\n\t\tif (!arguments.length) return macdSource;\r\n\t\tmacdSource = x;\r\n\t\treturn indicator;\r\n\t};\r\n\tindicator.emaSource = function(x) {\r\n\t\tif (!arguments.length) return emaSource;\r\n\t\temaSource = x;\r\n\t\treturn indicator;\r\n\t};\r\n\td3.rebind(indicator, base, \"id\", \"stroke\", \"echo\", \"type\");\r\n\t// d3.rebind(indicator, underlyingAlgorithm, \"windowSize\", \"movingAverageType\", \"multiplier\", \"source\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\r\n\r\n\treturn indicator;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/elderImpulse.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\n\r\nimport { merge } from \"../utils\";\r\nimport { compare } from \"./algorithm\";\r\n\r\nimport baseIndicator from \"./baseIndicator\";\r\n\r\nconst ALGORITHM_TYPE = \"Compare\";\r\n\r\nexport default function() {\r\n\r\n\tvar base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.compare);\r\n\r\n\tvar underlyingAlgorithm = compare()\r\n\t\t.base(d => d.close)\r\n\t\t.mainKeys([\"open\", \"high\", \"low\", \"close\"]);\r\n\r\n\tvar mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => { datum.compare = indicator; });\r\n\r\n\tvar indicator = function(data) {\r\n\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\treturn mergedAlgorithm(data);\r\n\t};\r\n\r\n\td3.rebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\");\r\n\td3.rebind(indicator, underlyingAlgorithm, \"base\", \"mainKeys\", \"compareKeys\");\r\n\td3.rebind(indicator, mergedAlgorithm, \"merge\");\r\n\r\n\treturn indicator;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/indicator/compare.js\n **/","\"use strict\";\r\n\r\n\r\nimport XAxis from \"./XAxis\";\r\nimport YAxis from \"./YAxis\";\r\n\r\nexport { XAxis, YAxis };\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/axes/index.js\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes } from \"react\";\r\nimport Axis from \"./Axis\";\r\nimport PureComponent from \"../utils/PureComponent\";\r\n\r\nclass XAxis extends PureComponent {\r\n\trender() {\r\n\t\tvar { axisAt, showTicks, tickFormat, ticks } = this.props;\r\n\r\n\t\tvar axisLocation;\r\n\t\tif (axisAt === \"top\") axisLocation = 0;\r\n\t\telse if (axisAt === \"bottom\") axisLocation = this.context.height;\r\n\t\telse if (axisAt === \"middle\") axisLocation = (this.context.height) / 2;\r\n\t\telse axisLocation = axisAt;\r\n\r\n\t\tif (tickFormat && this.context.xScale.isPolyLinear && this.context.xScale.isPolyLinear()) {\r\n\t\t\tconsole.warn(\"Cannot set tickFormat on a poly linear scale, ignoring tickFormat on XAxis\");\r\n\t\t\ttickFormat = undefined;\r\n\t\t}\r\n\r\n\t\tif (ticks) ticks = [ticks];\r\n\t\treturn (\r\n\t\t\t<Axis {...this.props}\r\n\t\t\t\trange={[0, this.context.width]}\r\n\t\t\t\ttransform={[0, axisLocation]}\r\n\t\t\t\tshowTicks={showTicks} tickFormat={tickFormat} ticks={ticks}\r\n\t\t\t\tscale={this.context.xScale} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nXAxis.propTypes = {\r\n\taxisAt: PropTypes.oneOfType([\r\n\t\tPropTypes.oneOf([\"top\", \"bottom\", \"middle\"]),\r\n\t\tPropTypes.number\r\n\t]).isRequired,\r\n\torient: PropTypes.oneOf([\"top\", \"bottom\"]).isRequired,\r\n\tinnerTickSize: PropTypes.number,\r\n\touterTickSize: PropTypes.number,\r\n\ttickFormat: PropTypes.func,\r\n\ttickPadding: PropTypes.number,\r\n\ttickSize: PropTypes.number,\r\n\tticks: PropTypes.number,\r\n\ttickValues: PropTypes.array,\r\n\tshowTicks: PropTypes.bool,\r\n\tclassName: PropTypes.string,\r\n};\r\nXAxis.defaultProps = {\r\n\tshowGrid: false,\r\n\tshowTicks: true,\r\n\tclassName: \"react-stockcharts-x-axis\",\r\n\tticks: 10,\r\n};\r\n\r\nXAxis.contextTypes = {\r\n\txScale: PropTypes.func.isRequired,\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n\twidth: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default XAxis;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/axes/XAxis.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport AxisTicks from \"./AxisTicks\";\r\nimport AxisLine from \"./AxisLine\";\r\n\r\nimport { isDefined } from \"../utils\";\r\n\r\nclass Axis extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tthis.componentWillReceiveProps(this.props, this.context);\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tvar { margin, chartId, canvasOriginX, canvasOriginY } = nextContext;\r\n\t\tvar draw = Axis.drawOnCanvasStatic.bind(null, margin, nextProps, [canvasOriginX, canvasOriginY]);\r\n\r\n\t\tnextContext.callbackForCanvasDraw({\r\n\t\t\tchartId: chartId,\r\n\t\t\ttype: \"axis\",\r\n\t\t\tdraw: draw,\r\n\t\t});\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tif (this.context.chartCanvasType !== \"svg\" && isDefined(this.context.getCanvasContexts)) {\r\n\t\t\tvar contexts = this.context.getCanvasContexts();\r\n\t\t\tif (contexts) this.drawOnCanvas(contexts.axes);\r\n\t\t}\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tthis.componentDidMount();\r\n\t}\r\n\tdrawOnCanvas(ctx) {\r\n\t\tvar { margin, canvasOriginX, canvasOriginY } = this.context;\r\n\t\tvar { scale } = this.props;\r\n\r\n\t\tAxis.drawOnCanvasStatic(margin, this.props, [canvasOriginX, canvasOriginY], ctx, scale, scale);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.context.chartCanvasType !== \"svg\") return null;\r\n\r\n\t\tvar domain = this.props.showDomain\r\n\t\t\t? <AxisLine {...this.props} />\r\n\t\t\t: null;\r\n\t\tvar ticks = this.props.showTicks\r\n\t\t\t? <AxisTicks {...this.props} />\r\n\t\t\t: null;\r\n\r\n\t\tvar className = \"\";\r\n\t\tif (this.props.className) className = this.props.defaultClassName.concat(this.props.className);\r\n\t\treturn (\r\n\t\t\t<g className={className}\r\n\t\t\t\ttransform={`translate(${ this.props.transform[0] }, ${ this.props.transform[1] })`}>\r\n\t\t\t\t{ticks}\r\n\t\t\t\t{domain}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAxis.propTypes = {\r\n\tclassName: PropTypes.string.isRequired,\r\n\tdefaultClassName: PropTypes.string.isRequired,\r\n\ttransform: PropTypes.arrayOf(Number).isRequired,\r\n\torient: PropTypes.oneOf([\"top\", \"bottom\", \"left\", \"right\"]).isRequired,\r\n\tinnerTickSize: PropTypes.number,\r\n\touterTickSize: PropTypes.number,\r\n\ttickFormat: PropTypes.func,\r\n\ttickPadding: PropTypes.number,\r\n\ttickSize: PropTypes.number,\r\n\tticks: PropTypes.array,\r\n\ttickValues: PropTypes.array,\r\n\tscale: PropTypes.func.isRequired,\r\n\tshowDomain: PropTypes.bool.isRequired,\r\n\tshowTicks: PropTypes.bool.isRequired,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number.isRequired,\r\n};\r\n\r\nAxis.defaultProps = {\r\n\tdefaultClassName: \"react-stockcharts-axis \",\r\n\tshowDomain: true,\r\n\tshowTicks: true,\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 12,\r\n};\r\n\r\nAxis.contextTypes = {\r\n\tgetCanvasContexts: PropTypes.func,\r\n\tchartCanvasType: PropTypes.string,\r\n\tchartId: PropTypes.number.isRequired,\r\n\tmargin: PropTypes.object.isRequired,\r\n\tcanvasOriginX: PropTypes.number,\r\n\tcanvasOriginY: PropTypes.number,\r\n\t// secretToSuperFastCanvasDraw: PropTypes.array.isRequired,\r\n\tcallbackForCanvasDraw: PropTypes.func.isRequired,\r\n};\r\n\r\nAxis.drawOnCanvasStatic = (margin, props, canvasOrigin, ctx, xScale, yScale) => {\r\n\tvar { transform, showDomain, showTicks } = props;\r\n\tctx.save();\r\n\r\n\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\tctx.translate(canvasOrigin[0] + transform[0], canvasOrigin[1] + transform[1]);\r\n\r\n\tif (showDomain) AxisLine.drawOnCanvasStatic(props, ctx, xScale, yScale);\r\n\tif (showTicks) AxisTicks.drawOnCanvasStatic(props, ctx, xScale, yScale);\r\n\r\n\tctx.restore();\r\n};\r\n\r\nexport default Axis;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/axes/Axis.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport { hexToRGBA, isNotDefined, identity } from \"../utils\";\r\n\r\nfunction tickTransform_svg_axisX(scale, tick) {\r\n\treturn [~~ (0.5 + scale(tick)), 0];\r\n}\r\n\r\nfunction tickTransform_svg_axisY(scale, tick) {\r\n\treturn [0, ~~ (0.5 + scale(tick))];\r\n}\r\n\r\nclass Tick extends Component {\r\n\trender() {\r\n\t\tvar { transform, tickStroke, tickStrokeOpacity, textAnchor, fontSize, fontFamily } = this.props;\r\n\t\tvar { x, y, x2, y2, dy } = this.props;\r\n\t\treturn (\r\n\t\t\t<g className=\"tick\" transform={`translate(${ transform[0] }, ${ transform[1] })`} >\r\n\t\t\t\t<line shapeRendering=\"crispEdges\" opacity={tickStrokeOpacity} stroke={tickStroke} x2={x2} y2={y2} />\r\n\t\t\t\t<text\r\n\t\t\t\t\tdy={dy} x={x} y={y}\r\n\t\t\t\t\tfill={tickStroke}\r\n\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\ttextAnchor={textAnchor}>\r\n\t\t\t\t\t{this.props.children}\r\n\t\t\t\t</text>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nTick.propTypes = {\r\n\ttransform: PropTypes.arrayOf(Number),\r\n\ttickStroke: PropTypes.string,\r\n\ttickStrokeOpacity: PropTypes.number,\r\n\ttextAnchor: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tfontFamily: PropTypes.string,\r\n\tx: PropTypes.number,\r\n\ty: PropTypes.number,\r\n\tx2: PropTypes.number,\r\n\ty2: PropTypes.number,\r\n\tdy: PropTypes.string,\r\n\tchildren: PropTypes.node.isRequired,\r\n};\r\n\r\nTick.drawOnCanvasStatic = (tick, ctx, result) => {\r\n\tvar { scale, tickTransform, canvas_dy, x, y, x2, y2, format } = result;\r\n\r\n\tvar origin = tickTransform(scale, tick);\r\n\r\n\tctx.beginPath();\r\n\r\n\tctx.moveTo(origin[0], origin[1]);\r\n\tctx.lineTo(origin[0] + x2, origin[1] + y2);\r\n\tctx.stroke();\r\n\r\n\tctx.fillText(format(tick), origin[0] + x, origin[1] + y + canvas_dy);\r\n};\r\n\r\nclass AxisTicks extends Component {\r\n\trender() {\r\n\t\tvar result = AxisTicks.helper(this.props, this.props.scale);\r\n\t\tvar { ticks, scale, tickTransform, tickStroke, tickStrokeOpacity, dy, x, y, x2, y2, textAnchor, fontSize, fontFamily, format } = result;\r\n\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t{ticks.map((tick, idx) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Tick key={idx} transform={tickTransform(scale, tick)}\r\n\t\t\t\t\t\t\ttickStroke={tickStroke} tickStrokeOpacity={tickStrokeOpacity}\r\n\t\t\t\t\t\t\tdy={dy} x={x} y={y}\r\n\t\t\t\t\t\t\tx2={x2} y2={y2} textAnchor={textAnchor}\r\n\t\t\t\t\t\t\tfontSize={fontSize} fontFamily={fontFamily}>{format(tick)}</Tick>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAxisTicks.propTypes = {\r\n\torient: PropTypes.oneOf([\"top\", \"bottom\", \"left\", \"right\"]).isRequired,\r\n\tinnerTickSize: PropTypes.number,\r\n\ttickFormat: PropTypes.func,\r\n\ttickPadding: PropTypes.number,\r\n\tticks: PropTypes.array,\r\n\ttickValues: PropTypes.array,\r\n\tscale: PropTypes.func.isRequired,\r\n\ttickStroke: PropTypes.string,\r\n\ttickStrokeOpacity: PropTypes.number,\r\n};\r\n\r\nAxisTicks.defaultProps = {\r\n\tinnerTickSize: 5,\r\n\ttickPadding: 6,\r\n\tticks: [10],\r\n\ttickStroke: \"#000\",\r\n\ttickStrokeOpacity: 1,\r\n};\r\n\r\nAxisTicks.helper = (props, scale) => {\r\n\tvar { orient, innerTickSize, tickFormat, tickPadding, fontSize, fontFamily } = props;\r\n\tvar { ticks: tickArguments, tickValues, tickStroke, tickStrokeOpacity } = props;\r\n\r\n\tvar ticks = isNotDefined(tickValues)\r\n\t\t? (scale.ticks\r\n\t\t\t? scale.ticks.apply(scale, tickArguments)\r\n\t\t\t: scale.domain())\r\n\t\t: tickValues;\r\n\r\n\tvar baseFormat = scale.tickFormat\r\n\t\t\t? scale.tickFormat.apply(scale, tickArguments)\r\n\t\t\t: identity;\r\n\r\n\tvar format = isNotDefined(tickFormat)\r\n\t\t? baseFormat\r\n\t\t: d => baseFormat(d) ? tickFormat(d) : \"\";\r\n\r\n\tvar sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\r\n\tvar tickSpacing = Math.max(innerTickSize, 0) + tickPadding;\r\n\r\n\tvar tickTransform, x, y, x2, y2, dy, canvas_dy, textAnchor;\r\n\r\n\tif (orient === \"bottom\" || orient === \"top\") {\r\n\t\ttickTransform = tickTransform_svg_axisX;\r\n\t\tx2 = 0;\r\n\t\ty2 = sign * innerTickSize;\r\n\t\tx = 0;\r\n\t\ty = sign * tickSpacing;\r\n\t\tdy = sign < 0 ? \"0em\" : \".71em\";\r\n\t\tcanvas_dy = sign < 0 ? 0 : (fontSize * .71);\r\n\t\ttextAnchor = \"middle\";\r\n\t} else {\r\n\t\ttickTransform = tickTransform_svg_axisY;\r\n\t\tx2 = sign * innerTickSize;\r\n\t\ty2 = 0;\r\n\t\tx = sign * tickSpacing;\r\n\t\ty = 0;\r\n\t\tdy = \".32em\";\r\n\t\tcanvas_dy = (fontSize * .32);\r\n\t\ttextAnchor = sign < 0 ? \"end\" : \"start\";\r\n\t}\r\n\treturn { ticks, scale, tickTransform, tickStroke, tickStrokeOpacity, dy, canvas_dy, x, y, x2, y2, textAnchor, fontSize, fontFamily, format };\r\n};\r\n\r\nAxisTicks.drawOnCanvasStatic = (props, ctx, xScale, yScale) => {\r\n\tprops = { ...AxisTicks.defaultProps, ...props };\r\n\r\n\tvar { orient } = props;\r\n\tvar xAxis = (orient === \"bottom\" || orient === \"top\");\r\n\r\n\tvar result = AxisTicks.helper(props, xAxis ? xScale : yScale);\r\n\r\n\tvar { tickStroke, tickStrokeOpacity, textAnchor, fontSize, fontFamily } = result;\r\n\r\n\tctx.strokeStyle = hexToRGBA(tickStroke, tickStrokeOpacity);\r\n\r\n\tctx.font = `${ fontSize }px ${fontFamily}`;\r\n\tctx.fillStyle = tickStroke;\r\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\r\n\t// ctx.textBaseline = 'middle';\r\n\r\n\tresult.ticks.forEach((tick) => {\r\n\t\tTick.drawOnCanvasStatic(tick, ctx, result);\r\n\t});\r\n};\r\n\r\nexport default AxisTicks;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/axes/AxisTicks.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport { first, last, hexToRGBA } from \"../utils\";\r\n\r\n/*\r\nfunction d3_scaleExtent(domain) {\r\n\tvar start = domain[0], stop = domain[domain.length - 1];\r\n\treturn start < stop ? [start, stop] : [stop, start];\r\n}\r\n\r\nfunction d3_scaleRange(scale) {\r\n\treturn scale.rangeExtent ? scale.rangeExtent() : d3_scaleExtent(scale.range());\r\n}\r\n*/\r\nclass AxisLine extends Component {\r\n\trender() {\r\n\t\tvar { orient, outerTickSize, fill, stroke, strokeWidth, className, shapeRendering, opacity, range } = this.props;\r\n\t\tvar sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\r\n\r\n\t\t// var range = d3_scaleRange(scale);\r\n\r\n\t\tvar d;\r\n\r\n\t\tif (orient === \"bottom\" || orient === \"top\") {\r\n\t\t\td = \"M\" + range[0] + \",\" + sign * outerTickSize + \"V0H\" + range[1] + \"V\" + sign * outerTickSize;\r\n\t\t} else {\r\n\t\t\td = \"M\" + sign * outerTickSize + \",\" + range[0] + \"H0V\" + range[1] + \"H\" + sign * outerTickSize;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<path\r\n\t\t\t\tclassName={className}\r\n\t\t\t\tshapeRendering={shapeRendering}\r\n\t\t\t\td={d}\r\n\t\t\t\tfill={fill}\r\n\t\t\t\topacity={opacity}\r\n\t\t\t\tstroke={stroke}\r\n\t\t\t\tstrokeWidth={strokeWidth} >\r\n\t\t\t</path>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAxisLine.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tshapeRendering: PropTypes.string,\r\n\torient: PropTypes.string.isRequired,\r\n\tscale: PropTypes.func.isRequired,\r\n\touterTickSize: PropTypes.number,\r\n\tfill: PropTypes.string,\r\n\tstroke: PropTypes.string,\r\n\tstrokeWidth: PropTypes.number,\r\n\topacity: PropTypes.number,\r\n\trange: PropTypes.array,\r\n};\r\n\r\nAxisLine.defaultProps = {\r\n\tclassName: \"react-stockcharts-axis-line\",\r\n\tshapeRendering: \"crispEdges\",\r\n\touterTickSize: 0,\r\n\tfill: \"none\",\r\n\tstroke: \"#000000\",\r\n\tstrokeWidth: 1,\r\n\topacity: 1,\r\n};\r\n\r\nAxisLine.drawOnCanvasStatic = (props, ctx/* , xScale, yScale*/) => {\r\n\tprops = { ...AxisLine.defaultProps, ...props };\r\n\r\n\tvar { orient, outerTickSize, stroke, strokeWidth, opacity, range } = props;\r\n\r\n\tvar sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\r\n\tvar xAxis = (orient === \"bottom\" || orient === \"top\");\r\n\r\n\t// var range = d3_scaleRange(xAxis ? xScale : yScale);\r\n\r\n\tctx.lineWidth = strokeWidth;\r\n\tctx.strokeStyle = hexToRGBA(stroke, opacity);\r\n\r\n\tctx.beginPath();\r\n\r\n\tif (xAxis) {\r\n\t\tctx.moveTo(first(range), sign * outerTickSize);\r\n\t\tctx.lineTo(first(range), 0);\r\n\t\tctx.lineTo(last(range), 0);\r\n\t\tctx.lineTo(last(range), sign * outerTickSize);\r\n\t} else {\r\n\t\tctx.moveTo(sign * outerTickSize, first(range));\r\n\t\tctx.lineTo(0, first(range));\r\n\t\tctx.lineTo(0, last(range));\r\n\t\tctx.lineTo(sign * outerTickSize, last(range));\r\n\t}\r\n\tctx.stroke();\r\n\r\n\t// ctx.strokeStyle = strokeStyle;\r\n};\r\n\r\nexport default AxisLine;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/axes/AxisLine.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes } from \"react\";\r\n\r\nimport Axis from \"./Axis\";\r\nimport PureComponent from \"../utils/PureComponent\";\r\n\r\nclass YAxis extends PureComponent {\r\n\trender() {\r\n\t\tvar { axisAt, tickFormat, ticks, percentScale, tickValues } = this.props;\r\n\t\tvar { chartConfig } = this.context;\r\n\t\tvar yScale = (percentScale) ? chartConfig.yScale.copy().domain([0, 1]) : chartConfig.yScale;\r\n\r\n\t\ttickValues = tickValues || chartConfig.yTicks;\r\n\r\n\t\tvar axisLocation;\r\n\r\n\t\tif (axisAt === \"left\") axisLocation = 0;\r\n\t\telse if (axisAt === \"right\") axisLocation = this.context.width;\r\n\t\telse if (axisAt === \"middle\") axisLocation = (this.context.width) / 2;\r\n\t\telse axisLocation = axisAt;\r\n\r\n\t\treturn (\r\n\t\t\t<Axis {...this.props}\r\n\t\t\t\ttransform={[axisLocation, 0]}\r\n\t\t\t\trange={[0, this.context.height]}\r\n\t\t\t\ttickFormat={tickFormat} ticks={[ticks]} tickValues={tickValues}\r\n\t\t\t\tscale={yScale} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nYAxis.propTypes = {\r\n\taxisAt: PropTypes.oneOfType([\r\n\t\tPropTypes.oneOf([\"left\", \"right\", \"middle\"]),\r\n\t\tPropTypes.number\r\n\t]).isRequired,\r\n\torient: PropTypes.oneOf([\"left\", \"right\"]).isRequired,\r\n\tinnerTickSize: PropTypes.number,\r\n\touterTickSize: PropTypes.number,\r\n\ttickFormat: PropTypes.func,\r\n\ttickPadding: PropTypes.number,\r\n\ttickSize: PropTypes.number,\r\n\tticks: PropTypes.number,\r\n\ttickValues: PropTypes.array,\r\n\tpercentScale: PropTypes.bool,\r\n\tshowTicks: PropTypes.bool,\r\n\tshowDomain: PropTypes.bool,\r\n\tclassName: PropTypes.string,\r\n};\r\nYAxis.defaultProps = {\r\n\tshowGrid: false,\r\n\tshowDomain: false,\r\n\tclassName: \"react-stockcharts-y-axis\",\r\n\tticks: 10,\r\n};\r\nYAxis.contextTypes = {\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\txScale: PropTypes.func.isRequired,\r\n\twidth: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default YAxis;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/axes/YAxis.jsx\n **/","import MACDTooltip from \"./MACDTooltip\";\r\nimport TooltipContainer from \"./TooltipContainer\";\r\nimport OHLCTooltip from \"./OHLCTooltip\";\r\nimport SingleValueTooltip from \"./SingleValueTooltip\";\r\nimport MovingAverageTooltip from \"./MovingAverageTooltip\";\r\nimport BollingerBandTooltip from \"./BollingerBandTooltip\";\r\nimport RSITooltip from \"./RSITooltip\";\r\nimport StochasticTooltip from \"./StochasticTooltip\";\r\n\r\nexport {\r\n\tMACDTooltip,\r\n\tTooltipContainer,\r\n\tOHLCTooltip,\r\n\tSingleValueTooltip,\r\n\tMovingAverageTooltip,\r\n\tBollingerBandTooltip,\r\n\tRSITooltip,\r\n\tStochasticTooltip,\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/index.js\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport ToolTipText from \"./ToolTipText\";\r\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\r\n\r\nimport { first } from \"../utils\";\r\n\r\nclass MACDTooltip extends Component {\r\n\trender() {\r\n\r\n\t\tvar { forChart, onClick, fontFamily, fontSize, calculator, displayFormat } = this.props;\r\n\t\tvar { chartConfig, currentItem, width, height } = this.context;\r\n\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\tvar config = first(chartConfig.filter(each => each.id === forChart));\r\n\r\n\t\tvar macdValue = yAccessor(currentItem);\r\n\r\n\t\tvar macd = (macdValue && macdValue.macd && displayFormat(macdValue.macd)) || \"n/a\";\r\n\t\tvar signal = (macdValue && macdValue.signal && displayFormat(macdValue.signal)) || \"n/a\";\r\n\t\tvar divergence = (macdValue && macdValue.divergence && displayFormat(macdValue.divergence)) || \"n/a\";\r\n\r\n\t\tvar { origin: originProp } = this.props;\r\n\t\tvar origin = d3.functor(originProp);\r\n\t\tvar [x, y] = origin(width, height);\r\n\t\tvar [ox, oy] = config.origin;\r\n\r\n\t\treturn (\r\n\t\t\t<g transform={`translate(${ ox + x }, ${ oy + y })`} onClick={onClick}>\r\n\t\t\t\t<ToolTipText x={0} y={0}\r\n\t\t\t\t\tfontFamily={fontFamily} fontSize={fontSize}>\r\n\t\t\t\t\t<ToolTipTSpanLabel>MACD (</ToolTipTSpanLabel>\r\n\t\t\t\t\t\t<tspan fill={calculator.stroke().macd}>{calculator.slow()}</tspan>\r\n\t\t\t\t\t\t<ToolTipTSpanLabel>, </ToolTipTSpanLabel>\r\n\t\t\t\t\t\t<tspan fill={calculator.stroke().macd}>{calculator.fast()}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel>): </ToolTipTSpanLabel><tspan fill={calculator.stroke().macd}>{macd}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel> Signal (</ToolTipTSpanLabel>\r\n\t\t\t\t\t\t<tspan fill={calculator.stroke().signal}>{calculator.signal()}</tspan>\r\n\t\t\t\t\t\t<ToolTipTSpanLabel>): </ToolTipTSpanLabel><tspan fill={calculator.stroke().signal}>{signal}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel> Divergence: </ToolTipTSpanLabel><tspan fill={calculator.fill().divergence}>{divergence}</tspan>\r\n\t\t\t\t</ToolTipText>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMACDTooltip.contextTypes = {\r\n\tchartConfig: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n};\r\n\r\nMACDTooltip.propTypes = {\r\n\tforChart: PropTypes.number.isRequired,\r\n\torigin: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]).isRequired,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tcalculator: PropTypes.func.isRequired,\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n\tonClick: PropTypes.func,\r\n};\r\n\r\nMACDTooltip.defaultProps = {\r\n\torigin: [0, 0],\r\n\tdisplayFormat: d3.format(\".2f\"),\r\n};\r\n\r\nexport default MACDTooltip;\r\n// export default MACDTooltip;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/MACDTooltip.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nclass ToolTipText extends Component {\r\n\trender() {\r\n\t\treturn <text\r\n\t\t\tfontFamily={this.props.fontFamily}\r\n\t\t\tfontSize={this.props.fontSize}\r\n\t\t\t{...this.props}\r\n\t\t\tclassName=\"react-stockcharts-tooltip\">{this.props.children}</text>;\r\n\t}\r\n}\r\n\r\nToolTipText.propTypes = {\r\n\tfontFamily: PropTypes.string.isRequired,\r\n\tfontSize: PropTypes.number.isRequired,\r\n\tchildren: PropTypes.node.isRequired,\r\n};\r\n\r\nToolTipText.defaultProps = {\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 11,\r\n};\r\n\r\nexport default ToolTipText;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/ToolTipText.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nclass ToolTipTSpanLabel extends Component {\r\n\trender() {\r\n\t\treturn <tspan className=\"react-stockcharts-tooltip-label\" fill=\"#4682B4\" {...this.props}>{this.props.children}</tspan>;\r\n\t}\r\n}\r\n\r\nToolTipTSpanLabel.propTypes = {\r\n\tchildren: PropTypes.node.isRequired,\r\n};\r\n\r\nexport default ToolTipTSpanLabel;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/ToolTipTSpanLabel.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes } from \"react\";\r\n\r\nimport PureComponent from \"../utils/PureComponent\";\r\n\r\nclass TooltipContainer extends PureComponent {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<g className=\"react-stockcharts-toottip-hover\">\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nTooltipContainer.contextTypes = {\r\n\tchartConfig: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default TooltipContainer;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/TooltipContainer.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport { first, isDefined } from \"../utils\";\r\nimport ToolTipText from \"./ToolTipText\";\r\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\r\n\r\nclass OHLCTooltip extends Component {\r\n\trender() {\r\n\t\tvar { forChart, onClick, xDisplayFormat, fontFamily, fontSize, accessor, volumeFormat, ohlcFormat } = this.props;\r\n\r\n\t\tvar displayDate, open, high, low, close, volume;\r\n\r\n\t\tdisplayDate = open = high = low = close = volume = \"n/a\";\r\n\r\n\t\tvar { chartConfig, currentItem, width, height } = this.context;\r\n\t\tvar config = first(chartConfig.filter(each => each.id === forChart));\r\n\r\n\t\tif (isDefined(currentItem)\r\n\t\t\t\t&& isDefined(accessor(currentItem))\r\n\t\t\t\t&& isDefined(accessor(currentItem).close)) {\r\n\t\t\tvar item = accessor(currentItem);\r\n\t\t\tvolume = volumeFormat(item.volume);\r\n\r\n\t\t\tdisplayDate = xDisplayFormat(item.date);\r\n\t\t\topen = ohlcFormat(item.open);\r\n\t\t\thigh = ohlcFormat(item.high);\r\n\t\t\tlow = ohlcFormat(item.low);\r\n\t\t\tclose = ohlcFormat(item.close);\r\n\t\t}\r\n\r\n\t\tvar { origin: originProp } = this.props;\r\n\t\tvar origin = d3.functor(originProp);\r\n\t\tvar [x, y] = origin(width, height);\r\n\t\tvar [ox, oy] = config.origin;\r\n\r\n\t\treturn (\r\n\t\t\t<g transform={`translate(${ ox + x }, ${ oy + y })`} onClick={onClick}>\r\n\t\t\t\t<ToolTipText x={0} y={0}\r\n\t\t\t\t\tfontFamily={fontFamily} fontSize={fontSize}>\r\n\t\t\t\t\t<ToolTipTSpanLabel key=\"label\" x={0} dy=\"5\">Date: </ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan key=\"value\">{displayDate}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel key=\"label_O\"> O: </ToolTipTSpanLabel><tspan key=\"value_O\">{open}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel key=\"label_H\"> H: </ToolTipTSpanLabel><tspan key=\"value_H\">{high}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel key=\"label_L\"> L: </ToolTipTSpanLabel><tspan key=\"value_L\">{low}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel key=\"label_C\"> C: </ToolTipTSpanLabel><tspan key=\"value_C\">{close}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel key=\"label_Vol\"> Vol: </ToolTipTSpanLabel><tspan key=\"value_Vol\">{volume}</tspan>\r\n\t\t\t\t</ToolTipText>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nOHLCTooltip.contextTypes = {\r\n\tchartConfig: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n};\r\n\r\nOHLCTooltip.propTypes = {\r\n\tforChart: PropTypes.number.isRequired,\r\n\taccessor: PropTypes.func.isRequired,\r\n\txDisplayFormat: PropTypes.func.isRequired,\r\n\tohlcFormat: PropTypes.func.isRequired,\r\n\torigin: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]).isRequired,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tonClick: PropTypes.func,\r\n\tvolumeFormat: PropTypes.func,\r\n};\r\n\r\nOHLCTooltip.defaultProps = {\r\n\taccessor: (d) => { return { date: d.date, open: d.open, high: d.high, low: d.low, close: d.close, volume: d.volume }; },\r\n\txDisplayFormat: d3.time.format(\"%Y-%m-%d\"),\r\n\tvolumeFormat: d3.format(\".4s\"),\r\n\tohlcFormat: d3.format(\".2f\"),\r\n\torigin: [0, 0],\r\n};\r\n\r\nexport default OHLCTooltip;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/OHLCTooltip.jsx\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport ToolTipText from \"./ToolTipText\";\r\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\r\nimport { first, isDefined, identity, noop } from \"../utils\";\r\n\r\nclass SingleValueTooltip extends Component {\r\n\trender() {\r\n\r\n\t\tvar { forChart, onClick, fontFamily, fontSize, labelStroke, valueStroke } = this.props;\r\n\t\tvar { xDisplayFormat, yDisplayFormat, xLabel, yLabel, xAccessor, yAccessor } = this.props;\r\n\r\n\t\tvar { chartConfig, currentItem, width, height } = this.context;\r\n\r\n\t\tvar config = first(chartConfig.filter(each => each.id === forChart));\r\n\r\n\t\tvar xDisplayValue = isDefined(xAccessor(currentItem)) ? xDisplayFormat(xAccessor(currentItem)) : \"n/a\";\r\n\t\tvar yDisplayValue = isDefined(yAccessor(currentItem)) ? yDisplayFormat(yAccessor(currentItem)) : \"n/a\";\r\n\r\n\t\tvar { origin: originProp } = this.props;\r\n\t\tvar origin = d3.functor(originProp);\r\n\t\tvar [x, y] = origin(width, height);\r\n\t\tvar [ox, oy] = config.origin;\r\n\r\n\t\treturn (\r\n\t\t\t<g transform={`translate(${ ox + x }, ${ oy + y })`} onClick={onClick}>\r\n\t\t\t\t<ToolTipText x={0} y={0}\r\n\t\t\t\t\tfontFamily={fontFamily} fontSize={fontSize}>\r\n\t\t\t\t\t{ xLabel ? <ToolTipTSpanLabel x={0} dy=\"5\" fill={labelStroke}>{`${xLabel}: `}</ToolTipTSpanLabel> : null}\r\n\t\t\t\t\t{ xLabel ? <tspan fill={valueStroke}>{`${xDisplayValue} `}</tspan> : null}\r\n\t\t\t\t\t<ToolTipTSpanLabel fill={labelStroke}>{`${yLabel}: `}</ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan fill={valueStroke} >{yDisplayValue}</tspan>\r\n\t\t\t\t</ToolTipText>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSingleValueTooltip.contextTypes = {\r\n\tchartConfig: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n};\r\n\r\nSingleValueTooltip.propTypes = {\r\n\tforChart: PropTypes.number.isRequired,\r\n\txDisplayFormat: PropTypes.func,\r\n\tyDisplayFormat: PropTypes.func.isRequired,\r\n\txLabel: PropTypes.string,\r\n\tyLabel: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.func\r\n\t]).isRequired,\r\n\tlabelStroke: PropTypes.string.isRequired,\r\n\tvalueStroke: PropTypes.string,\r\n\torigin: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]).isRequired,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tonClick: PropTypes.func,\r\n\txAccessor: PropTypes.func,\r\n\tyAccessor: PropTypes.func,\r\n};\r\n\r\nSingleValueTooltip.defaultProps = {\r\n\torigin: [0, 0],\r\n\tlabelStroke: \"#4682B4\",\r\n\tvalueStroke: \"#000000\",\r\n\tyDisplayFormat: d3.format(\".2f\"),\r\n\txAccessor: noop,\r\n\tyAccessor: identity,\r\n};\r\n\r\nexport default SingleValueTooltip;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/SingleValueTooltip.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport ToolTipText from \"./ToolTipText\";\r\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\r\n\r\nimport { first } from \"../utils\";\r\n\r\nclass SingleMAToolTip extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n\t}\r\n\thandleClick(e) {\r\n\t\tvar { onClick, forChart, options } = this.props;\r\n\t\tonClick({ chartId: forChart, ...options }, e);\r\n\t}\r\n\trender() {\r\n\t\tvar translate = \"translate(\" + this.props.origin[0] + \", \" + this.props.origin[1] + \")\";\r\n\t\treturn (\r\n\t\t\t<g transform={translate}>\r\n\t\t\t\t<line x1={0} y1={2} x2={0} y2={28} stroke={this.props.color} strokeWidth=\"4px\"/>\r\n\t\t\t\t<ToolTipText x={5} y={11}\r\n\t\t\t\t\tfontFamily={this.props.fontFamily} fontSize={this.props.fontSize}>\r\n\t\t\t\t\t<ToolTipTSpanLabel>{this.props.displayName}</ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan x=\"5\" dy=\"15\">{this.props.value}</tspan>\r\n\t\t\t\t</ToolTipText>\r\n\t\t\t\t<rect x={0} y={0} width={55} height={30}\r\n\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\tfill=\"none\" stroke=\"none\" />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSingleMAToolTip.propTypes = {\r\n\torigin: PropTypes.array.isRequired,\r\n\tcolor: PropTypes.string.isRequired,\r\n\tdisplayName: PropTypes.string.isRequired,\r\n\tvalue: PropTypes.string.isRequired,\r\n\tonClick: PropTypes.func,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tforChart: PropTypes.number.isRequired,\r\n\toptions: PropTypes.object.isRequired,\r\n};\r\n\r\nclass MovingAverageTooltip extends Component {\r\n\trender() {\r\n\t\tvar { chartConfig, currentItem, width, height } = this.context;\r\n\r\n\t\tvar { className, onClick, forChart, width, fontFamily, fontSize, origin: originProp, calculators, displayFormat } = this.props;\r\n\r\n\t\tvar config = first(chartConfig.filter(each => each.id === forChart));\r\n\r\n\t\tvar origin = d3.functor(originProp);\r\n\t\tvar [x, y] = origin(width, height);\r\n\t\tvar [ox, oy] = config.origin;\r\n\r\n\t\treturn (\r\n\t\t\t<g transform={`translate(${ ox + x }, ${ oy + y })`} className={className}>\r\n\t\t\t\t{calculators\r\n\t\t\t\t\t.map((each, idx) => {\r\n\t\t\t\t\t\tvar yValue = each.accessor()(currentItem);\r\n\t\t\t\t\t\tvar options = {\r\n\t\t\t\t\t\t\tmaType: each.type(),\r\n\t\t\t\t\t\t\tperiod: each.windowSize(),\r\n\t\t\t\t\t\t\tsource: each.source(),\r\n\t\t\t\t\t\t\techo: each.echo()\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvar yDisplayValue = yValue ? displayFormat(yValue) : \"n/a\";\r\n\t\t\t\t\t\treturn <SingleMAToolTip\r\n\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\torigin={[width * idx, 0]}\r\n\t\t\t\t\t\t\tcolor={each.stroke()}\r\n\t\t\t\t\t\t\tdisplayName={each.tooltipLabel()}\r\n\t\t\t\t\t\t\tvalue={yDisplayValue}\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tforChart={forChart} onClick={onClick}\r\n\t\t\t\t\t\t\tfontFamily={fontFamily} fontSize={fontSize} />;\r\n\t\t\t\t\t})}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMovingAverageTooltip.contextTypes = {\r\n\tchartConfig: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n};\r\n\r\nMovingAverageTooltip.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tforChart: PropTypes.number.isRequired,\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n\torigin: PropTypes.array.isRequired,\r\n\tonClick: PropTypes.func,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\twidth: PropTypes.number,\r\n\tcalculators: PropTypes.array.isRequired,\r\n\tforDataSeries: PropTypes.arrayOf(PropTypes.number),\r\n};\r\n\r\nMovingAverageTooltip.defaultProps = {\r\n\tclassName: \"react-stockcharts-moving-average-tooltip\",\r\n\tdisplayFormat: d3.format(\".2f\"),\r\n\torigin: [0, 10],\r\n\twidth: 65,\r\n};\r\n\r\nexport default MovingAverageTooltip;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/MovingAverageTooltip.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport d3 from \"d3\";\r\n\r\nimport { first, isDefined } from \"../utils\";\r\nimport ToolTipText from \"./ToolTipText\";\r\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\r\n\r\nclass BollingerBandTooltip extends Component {\r\n\trender() {\r\n\t\tvar { onClick, forChart, displayFormat, calculator } = this.props;\r\n\r\n\t\tvar { chartConfig, currentItem, width, height } = this.context;\r\n\t\tvar config = first(chartConfig.filter(each => each.id === forChart));\r\n\r\n\t\tvar top, middle, bottom;\r\n\t\ttop = middle = bottom = \"n/a\";\r\n\t\tvar accessor = calculator.accessor();\r\n\r\n\t\tif (isDefined(currentItem)\r\n\t\t\t\t&& isDefined(accessor(currentItem))) {\r\n\t\t\tvar item = accessor(currentItem);\r\n\t\t\ttop = displayFormat(item.top);\r\n\t\t\tmiddle = displayFormat(item.middle);\r\n\t\t\tbottom = displayFormat(item.bottom);\r\n\t\t}\r\n\r\n\t\tvar { origin: originProp } = this.props;\r\n\t\tvar origin = d3.functor(originProp);\r\n\t\tvar [x, y] = origin(width, height);\r\n\t\tvar [ox, oy] = config.origin;\r\n\t\tvar tooltipLabel = d3.functor(calculator.tooltipLabel());\r\n\r\n\t\treturn (\r\n\t\t\t<g transform={`translate(${ ox + x }, ${ oy + y })`}\r\n\t\t\t\t\tclassName={this.props.className} onClick={onClick}>\r\n\t\t\t\t<ToolTipText x={0} y={0}\r\n\t\t\t\t\tfontFamily={this.props.fontFamily} fontSize={this.props.fontSize}>\r\n\t\t\t\t\t<ToolTipTSpanLabel>{tooltipLabel()}</ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan>{`${ top }, ${ middle }, ${ bottom }`}</tspan>\r\n\t\t\t\t</ToolTipText>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nBollingerBandTooltip.contextTypes = {\r\n\tchartConfig: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n};\r\nBollingerBandTooltip.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tforChart: PropTypes.number.isRequired,\r\n\tcalculator: PropTypes.func.isRequired,\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n\torigin: PropTypes.array.isRequired,\r\n\tonClick: PropTypes.func,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tforDataSeries: PropTypes.number,\r\n};\r\n\r\nBollingerBandTooltip.defaultProps = {\r\n\tclassName: \"react-stockcharts-bollingerband-tooltip\",\r\n\tdisplayFormat: d3.format(\".2f\"),\r\n\torigin: [0, 10],\r\n};\r\n\r\nexport default BollingerBandTooltip;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/BollingerBandTooltip.jsx\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport { first, isDefined } from \"../utils\";\r\nimport ToolTipText from \"./ToolTipText\";\r\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\r\n\r\nclass RSITooltip extends Component {\r\n\trender() {\r\n\r\n\t\tvar { forChart, onClick, fontFamily, fontSize, calculator, displayFormat } = this.props;\r\n\t\tvar { chartConfig, currentItem, width, height } = this.context;\r\n\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\tvar config = first(chartConfig.filter(each => each.id === forChart));\r\n\t\tvar rsi = yAccessor(currentItem);\r\n\r\n\t\tvar value = (isDefined(rsi) && displayFormat(rsi)) || \"n/a\";\r\n\r\n\t\tvar { origin: originProp } = this.props;\r\n\t\tvar origin = d3.functor(originProp);\r\n\t\tvar [x, y] = origin(width, height);\r\n\t\tvar [ox, oy] = config.origin;\r\n\r\n\t\treturn (\r\n\t\t\t<g transform={`translate(${ ox + x }, ${ oy + y })`} onClick={onClick}>\r\n\t\t\t\t<ToolTipText x={0} y={0}\r\n\t\t\t\t\tfontFamily={fontFamily} fontSize={fontSize}>\r\n\t\t\t\t\t<ToolTipTSpanLabel>{calculator.tooltipLabel()}</ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan>{value}</tspan>\r\n\t\t\t\t</ToolTipText>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nRSITooltip.contextTypes = {\r\n\tchartConfig: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n};\r\n\r\nRSITooltip.propTypes = {\r\n\tforChart: PropTypes.number.isRequired,\r\n\torigin: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]).isRequired,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tonClick: PropTypes.func,\r\n\tcalculator: PropTypes.func.isRequired,\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n};\r\n\r\nRSITooltip.defaultProps = {\r\n\tdisplayFormat: d3.format(\".2f\"),\r\n\torigin: [0, 0]\r\n};\r\n\r\nexport default RSITooltip;\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/RSITooltip.jsx\n **/","\"use strict\";\r\n\r\nimport d3 from \"d3\";\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport { first } from \"../utils\";\r\nimport ToolTipText from \"./ToolTipText\";\r\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\r\n\r\nclass StochasticTooltip extends Component {\r\n\trender() {\r\n\t\tvar { forChart, onClick, fontFamily, fontSize, calculator, displayFormat, children } = this.props;\r\n\t\tvar { chartConfig, currentItem, width, height } = this.context;\r\n\r\n\t\tvar yAccessor = calculator.accessor();\r\n\t\tvar stroke = calculator.stroke();\r\n\t\tvar config = first(chartConfig.filter(each => each.id === forChart));\r\n\t\tvar stochastic = yAccessor(currentItem);\r\n\r\n\t\tvar K = (stochastic && stochastic.K && displayFormat(stochastic.K)) || \"n/a\";\r\n\t\tvar D = (stochastic && stochastic.D && displayFormat(stochastic.D)) || \"n/a\";\r\n\t\tvar label = children || \"Stochastic\";\r\n\r\n\t\tvar { origin: originProp } = this.props;\r\n\t\tvar origin = d3.functor(originProp);\r\n\t\tvar [x, y] = origin(width, height);\r\n\t\tvar [ox, oy] = config.origin;\r\n\r\n\t\treturn (\r\n\t\t\t<g transform={`translate(${ ox + x }, ${ oy + y })`} onClick={onClick}>\r\n\t\t\t\t<ToolTipText x={0} y={0} fontFamily={fontFamily} fontSize={fontSize}>\r\n\t\t\t\t\t<ToolTipTSpanLabel>{`${ label } %K(`}</ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan fill={stroke.K}>{`${ calculator.windowSize() }, ${ calculator.kWindowSize() }`}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel>): </ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan fill={stroke.K}>{K}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel> %D (</ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan fill={stroke.D}>{calculator.dWindowSize()}</tspan>\r\n\t\t\t\t\t<ToolTipTSpanLabel>): </ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan fill={stroke.D}>{D}</tspan>\r\n\t\t\t\t</ToolTipText>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nStochasticTooltip.contextTypes = {\r\n\tchartConfig: PropTypes.array.isRequired,\r\n\tcurrentItem: PropTypes.object.isRequired,\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n};\r\n\r\nStochasticTooltip.propTypes = {\r\n\tforChart: PropTypes.number.isRequired,\r\n\torigin: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]).isRequired,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tonClick: PropTypes.func,\r\n\tcalculator: PropTypes.func.isRequired,\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n\tchildren: PropTypes.node.isRequired,\r\n};\r\n\r\nStochasticTooltip.defaultProps = {\r\n\tdisplayFormat: d3.format(\".2f\"),\r\n\torigin: [0, 0]\r\n};\r\n\r\nexport default StochasticTooltip;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/tooltip/StochasticTooltip.jsx\n **/","\r\nimport TypeChooser from \"./TypeChooser\";\r\nimport ChartWidthMixin from \"./ChartWidthMixin\";\r\nimport SaveChartAsImage from \"./SaveChartAsImage\";\r\nimport fitWidth from \"./fitWidth\";\r\n\r\nexport {\r\n\tTypeChooser,\r\n\tChartWidthMixin,\r\n\tSaveChartAsImage,\r\n\tfitWidth\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/helper/index.js\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nclass TypeChooser extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttype: this.props.type\r\n\t\t};\r\n\t\tthis.handleTypeChange = this.handleTypeChange.bind(this);\r\n\t}\r\n\thandleTypeChange(e) {\r\n\t\t// console.log(e.target.value);\r\n\t\tthis.setState({\r\n\t\t\ttype: e.target.value\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<label forHtml=\"type\">Type: </label>\r\n\t\t\t\t<select name=\"type\" id=\"type\" onChange={this.handleTypeChange} value={this.state.type} >\r\n\t\t\t\t\t<option value=\"svg\">svg</option>\r\n\t\t\t\t\t<option value=\"hybrid\">canvas + svg</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t{this.props.children(this.state.type)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nTypeChooser.propTypes = {\r\n\ttype: PropTypes.oneOf([\"svg\", \"hybrid\"]),\r\n\tchildren: PropTypes.func.isRequired,\r\n};\r\n\r\nTypeChooser.defaultProps = {\r\n\ttype: \"hybrid\"\r\n};\r\n\r\nexport default TypeChooser;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/helper/TypeChooser.jsx\n **/","\"use strict\";\r\n\r\nimport React from \"react\";\r\n// import ReactDOM from \"react-dom\";\r\n\r\nvar ChartWidthMixin = {\r\n\thandleWindowResize() {\r\n\t\tvar el = React.findDOMNode(this);\r\n\t\t// console.log(this.refs, el, this);\r\n\r\n\t\tvar w = el.parentNode.clientWidth;\r\n\t\t// console.log(\"width = \", w);\r\n\t\tthis.setState({\r\n\t\t\twidth: w\r\n\t\t});\r\n\t},\r\n\tcomponentWillUnmount() {\r\n\t\t// console.log(\"unmounting...\")\r\n\t\twindow.removeEventListener(\"resize\", this.handleWindowResize);\r\n\t},\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener(\"resize\", this.handleWindowResize);\r\n\t\tvar el = React.findDOMNode(this);\r\n\t\t// console.log(this.refs, el);\r\n\t\tvar w = el.parentNode.clientWidth;\r\n\t\tthis.setState({\r\n\t\t\twidth: w\r\n\t\t});\r\n\t},\r\n};\r\n\r\nexport default ChartWidthMixin;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/helper/ChartWidthMixin.jsx\n **/","\"use strict\";\r\n\r\nimport saveAsPng from \"save-svg-as-png\";\r\nimport { isDefined } from \"../utils\";\r\n\r\nvar SaveChartAsImage = {\r\n\tsave(doc, container, background, cb) {\r\n\t\tsaveAsPng.svgAsDataUri(container.getElementsByTagName(\"svg\")[0], {}, function(uri) {\r\n\t\t\tvar image = new Image();\r\n\t\t\timage.onload = function() {\r\n\t\t\t\tvar canvas = doc.createElement(\"canvas\");\r\n\t\t\t\tcanvas.width = image.width;\r\n\t\t\t\tcanvas.height = image.height;\r\n\t\t\t\tvar context = canvas.getContext(\"2d\");\r\n\r\n\t\t\t\tif (isDefined(background)) {\r\n\t\t\t\t\tcontext.fillStyle = background;\r\n\t\t\t\t\tcontext.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t\t}\r\n\t\t\t\tvar canvasList = container.getElementsByTagName(\"canvas\");\r\n\t\t\t\tfor (var i = 0; i < canvasList.length; i++) {\r\n\t\t\t\t\tvar each = canvasList[i];\r\n\t\t\t\t\tif (isDefined(each)) {\r\n\t\t\t\t\t\tvar parent = each.parentNode.parentNode.getBoundingClientRect();\r\n\t\t\t\t\t\tvar rect = each.getBoundingClientRect();\r\n\t\t\t\t\t\tcontext.drawImage(each, rect.left - parent.left, rect.top - parent.top);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcontext.drawImage(image, 0, 0);\r\n\t\t\t\tcb(canvas.toDataURL(\"image/png\"));\r\n\t\t\t};\r\n\t\t\timage.src = uri;\r\n\t\t});\r\n\t},\r\n\tsaveWithWhiteBG(doc, container, cb) {\r\n\t\treturn this.saveWithBG(doc, container, \"white\", cb);\r\n\t},\r\n\tsaveWithDarkBG(doc, container, cb) {\r\n\t\treturn this.saveWithBG(doc, container, \"#303030\", cb);\r\n\t},\r\n\tsaveWithBG(doc, container, background, cb) {\r\n\t\treturn this.save(doc, container, background, cb);\r\n\t},\r\n\tsaveChartAsImage(container) {\r\n\t\tthis.saveWithWhiteBG(document, container, function(src) {\r\n\t\t\tvar a = document.createElement(\"a\");\r\n\t\t\ta.setAttribute(\"href\", src);\r\n\t\t\ta.setAttribute(\"download\", \"Chart.png\");\r\n\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\ta.addEventListener(\"click\", function(/* e */) {\r\n\t\t\t\ta.parentNode.removeChild(a);\r\n\t\t\t});\r\n\r\n\t\t\ta.click();\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport default SaveChartAsImage;\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/helper/SaveChartAsImage.js\n **/","(function() {\n  var out$ = typeof exports != 'undefined' && exports || this;\n\n  var doctype = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">';\n\n  function isExternal(url) {\n    return url && url.lastIndexOf('http',0) == 0 && url.lastIndexOf(window.location.host) == -1;\n  }\n\n  function inlineImages(el, callback) {\n    var images = el.querySelectorAll('image');\n    var left = images.length;\n    if (left == 0) {\n      callback();\n    }\n    for (var i = 0; i < images.length; i++) {\n      (function(image) {\n        var href = image.getAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\");\n        if (href) {\n          if (isExternal(href.value)) {\n            console.warn(\"Cannot render embedded images linking to external hosts: \"+href.value);\n            return;\n          }\n        }\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        var img = new Image();\n        href = href || image.getAttribute('href');\n        img.src = href;\n        img.onload = function() {\n          canvas.width = img.width;\n          canvas.height = img.height;\n          ctx.drawImage(img, 0, 0);\n          image.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", canvas.toDataURL('image/png'));\n          left--;\n          if (left == 0) {\n            callback();\n          }\n        }\n        img.onerror = function() {\n          console.log(\"Could not load \"+href);\n          left--;\n          if (left == 0) {\n            callback();\n          }\n        }\n      })(images[i]);\n    }\n  }\n\n  function styles(el, selectorRemap) {\n    var css = \"\";\n    var sheets = document.styleSheets;\n    for (var i = 0; i < sheets.length; i++) {\n      try {\n        var rules = sheets[i].cssRules;\n      } catch (e) {\n        console.warn(\"Stylesheet could not be loaded: \"+sheets[i].href);\n        continue;\n      }\n\n      if (rules != null) {\n        for (var j = 0; j < rules.length; j++) {\n          var rule = rules[j];\n          if (typeof(rule.style) != \"undefined\") {\n            var match = null;\n            try {\n              match = el.querySelector(rule.selectorText);\n            } catch(err) {\n              console.warn('Invalid CSS selector \"' + rule.selectorText + '\"', err);\n            }\n            if (match) {\n              var selector = selectorRemap ? selectorRemap(rule.selectorText) : rule.selectorText;\n              css += selector + \" { \" + rule.style.cssText + \" }\\n\";\n            } else if(rule.cssText.match(/^@font-face/)) {\n              css += rule.cssText + '\\n';\n            }\n          }\n        }\n      }\n    }\n    return css;\n  }\n\n  function getDimension(el, clone, dim) {\n    var v = (el.viewBox.baseVal && el.viewBox.baseVal[dim]) ||\n      (clone.getAttribute(dim) !== null && !clone.getAttribute(dim).match(/%$/) && parseInt(clone.getAttribute(dim))) ||\n      el.getBoundingClientRect()[dim] ||\n      parseInt(clone.style[dim]) ||\n      parseInt(window.getComputedStyle(el).getPropertyValue(dim));\n    return (typeof v === 'undefined' || v === null || isNaN(parseFloat(v))) ? 0 : v;\n  }\n\n  function reEncode(data) {\n    data = encodeURIComponent(data);\n    data = data.replace(/%([0-9A-F]{2})/g, function(match, p1) {\n      var c = String.fromCharCode('0x'+p1);\n      return c === '%' ? '%25' : c;\n    });\n    return decodeURIComponent(data);\n  }\n\n  out$.svgAsDataUri = function(el, options, cb) {\n    options = options || {};\n    options.scale = options.scale || 1;\n    var xmlns = \"http://www.w3.org/2000/xmlns/\";\n\n    inlineImages(el, function() {\n      var outer = document.createElement(\"div\");\n      var clone = el.cloneNode(true);\n      var width, height;\n      if(el.tagName == 'svg') {\n        width = options.width || getDimension(el, clone, 'width');\n        height = options.height || getDimension(el, clone, 'height');\n      } else if(el.getBBox) {\n        var box = el.getBBox();\n        width = box.x + box.width;\n        height = box.y + box.height;\n        clone.setAttribute('transform', clone.getAttribute('transform').replace(/translate\\(.*?\\)/, ''));\n\n        var svg = document.createElementNS('http://www.w3.org/2000/svg','svg')\n        svg.appendChild(clone)\n        clone = svg;\n      } else {\n        console.error('Attempted to render non-SVG element', el);\n        return;\n      }\n\n      clone.setAttribute(\"version\", \"1.1\");\n      clone.setAttributeNS(xmlns, \"xmlns\", \"http://www.w3.org/2000/svg\");\n      clone.setAttributeNS(xmlns, \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n      clone.setAttribute(\"width\", width * options.scale);\n      clone.setAttribute(\"height\", height * options.scale);\n      clone.setAttribute(\"viewBox\", [\n        options.left || 0,\n        options.top || 0,\n        width,\n        height\n      ].join(\" \"));\n\n      outer.appendChild(clone);\n\n      var css = styles(el, options.selectorRemap);\n      var s = document.createElement('style');\n      s.setAttribute('type', 'text/css');\n      s.innerHTML = \"<![CDATA[\\n\" + css + \"\\n]]>\";\n      var defs = document.createElement('defs');\n      defs.appendChild(s);\n      clone.insertBefore(defs, clone.firstChild);\n\n      var svg = doctype + outer.innerHTML;\n      var uri = 'data:image/svg+xml;base64,' + window.btoa(reEncode(svg));\n      if (cb) {\n        cb(uri);\n      }\n    });\n  }\n\n  out$.svgAsPngUri = function(el, options, cb) {\n    out$.svgAsDataUri(el, options, function(uri) {\n      var image = new Image();\n      image.onload = function() {\n        var canvas = document.createElement('canvas');\n        canvas.width = image.width;\n        canvas.height = image.height;\n        var context = canvas.getContext('2d');\n        if(options && options.backgroundColor){\n          context.fillStyle = options.backgroundColor;\n          context.fillRect(0, 0, canvas.width, canvas.height);\n        }\n        context.drawImage(image, 0, 0);\n        var a = document.createElement('a'), png;\n        try {\n          png = canvas.toDataURL('image/png');\n        } catch (e) {\n          if (e instanceof SecurityError) {\n            console.error(\"Rendered SVG images cannot be downloaded in this browser.\");\n            return;\n          } else {\n            throw e;\n          }\n        }\n        cb(png);\n      }\n      image.src = uri;\n    });\n  }\n\n  out$.saveSvgAsPng = function(el, name, options) {\n    options = options || {};\n    out$.svgAsPngUri(el, options, function(uri) {\n      var a = document.createElement('a');\n      a.download = name;\n      a.href = uri;\n      document.body.appendChild(a);\n      a.addEventListener(\"click\", function(e) {\n        a.parentNode.removeChild(a);\n      });\n      a.click();\n    });\n  }\n})();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/save-svg-as-png/saveSvgAsPng.js\n ** module id = 112\n ** module chunks = 0\n **/","import React, { Component } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nfunction getDisplayName(Series) {\r\n\tvar name = Series.displayName || Series.name || \"Series\";\r\n\treturn name;\r\n}\r\n\r\nexport default function fitWidth(WrappedComponent, withRef = true) {\r\n\tclass ResponsiveComponent extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.handleWindowResize = this.handleWindowResize.bind(this);\r\n\t\t\tthis.getWrappedInstance = this.getWrappedInstance.bind(this);\r\n\t\t}\r\n\t\tcomponentDidMount() {\r\n\t\t\twindow.addEventListener(\"resize\", this.handleWindowResize);\r\n\t\t\tvar el = ReactDOM.findDOMNode(this);\r\n\t\t\tvar w = el.parentNode.clientWidth;\r\n\t\t\tthis.setState({\r\n\t\t\t\twidth: w\r\n\t\t\t});\r\n\t\t}\r\n\t\tcomponentWillUnmount() {\r\n\t\t\twindow.removeEventListener(\"resize\", this.handleWindowResize);\r\n\t\t}\r\n\t\thandleWindowResize() {\r\n\t\t\tvar el = ReactDOM.findDOMNode(this);\r\n\t\t\tvar w = el.parentNode.clientWidth;\r\n\t\t\tthis.setState({\r\n\t\t\t\twidth: w\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetWrappedInstance() {\r\n\t\t\treturn this.refs.component;\r\n\t\t}\r\n\t\trender() {\r\n\t\t\tvar ref = withRef ? { ref: \"component\" } : {};\r\n\r\n\t\t\tif (this.state && this.state.width) {\r\n\t\t\t\treturn <WrappedComponent width={this.state.width} {...this.props} {...ref} />;\r\n\t\t\t} else {\r\n\t\t\t\treturn <div />;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tResponsiveComponent.displayName = `fitWidth(${ getDisplayName(WrappedComponent) })`;\r\n\r\n\treturn ResponsiveComponent;\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/helper/fitWidth.jsx\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_114__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ReactDOM\"\n ** module id = 114\n ** module chunks = 0\n **/","import TrendLine from \"./TrendLine\";\r\nimport FibonacciRetracement from \"./FibonacciRetracement\";\r\nimport ClickCallback from \"./ClickCallback\";\r\nimport Brush from \"./Brush\";\r\nimport makeInteractive from \"./makeInteractive\";\r\n\r\nexport {\r\n\tTrendLine,\r\n\tFibonacciRetracement,\r\n\tClickCallback,\r\n\tBrush,\r\n\tmakeInteractive,\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/interactive/index.js\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport makeInteractive from \"./makeInteractive\";\r\nimport { head, last, hexToRGBA, noop } from \"../utils\";\r\n\r\nfunction getYValue(values, currentValue) {\r\n\tvar diff = values\r\n\t\t.map(each => each - currentValue)\r\n\t\t.reduce((diff1, diff2) => Math.abs(diff1) < Math.abs(diff2) ? diff1 : diff2);\r\n\treturn currentValue + diff;\r\n}\r\n\r\nclass TrendLine extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onMousemove = this.onMousemove.bind(this);\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t}\r\n\tremoveLast(interactive) {\r\n\t\tvar { trends, start } = interactive;\r\n\t\tif (!start && trends.length > 0) {\r\n\t\t\treturn { ...interactive, trends: trends.slice(0, trends.length - 1) };\r\n\t\t}\r\n\t\treturn interactive;\r\n\t}\r\n\tterminate(interactive) {\r\n\t\tvar { start } = interactive;\r\n\t\tif (start) {\r\n\t\t\treturn { ...interactive, start: null };\r\n\t\t}\r\n\t\treturn interactive;\r\n\t}\r\n\tonMousemove({ chartId, xAccessor }, interactive, { mouseXY, currentItem, currentCharts, chartConfig }, e) {\r\n\t\tvar { enabled, snapTo, snap, shouldDisableSnap } = this.props;\r\n\t\tif (enabled) {\r\n\t\t\tvar { yScale } = chartConfig;\r\n\r\n\t\t\tvar yValue = (snap && !shouldDisableSnap(e))\r\n\t\t\t\t? getYValue(snapTo(currentItem), yScale.invert(mouseXY[1]))\r\n\t\t\t\t: yScale.invert(mouseXY[1]);\r\n\t\t\tvar xValue = xAccessor(currentItem);\r\n\r\n\t\t\treturn { interactive: { ...interactive, currentPos: [xValue, yValue], } };\r\n\t\t}\r\n\t\treturn { interactive };\r\n\t}\r\n\tonClick({ chartId, xAccessor }, interactive, { mouseXY, currentItem, currentChartstriggerCallback, chartConfig }, e) {\r\n\t\tvar { onStart, onComplete, enabled, snapTo, snap, shouldDisableSnap } = this.props;\r\n\r\n\t\tif (enabled) {\r\n\t\t\tvar { start, trends } = interactive;\r\n\r\n\t\t\tvar { yScale } = chartConfig;\r\n\r\n\t\t\tvar yValue = (snap && !shouldDisableSnap(e))\r\n\t\t\t\t? getYValue(snapTo(currentItem), yScale.invert(mouseXY[1]))\r\n\t\t\t\t: yScale.invert(mouseXY[1]);\r\n\t\t\tvar xValue = xAccessor(currentItem);\r\n\t\t\tif (start) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinteractive: {\r\n\t\t\t\t\t\t...interactive,\r\n\t\t\t\t\t\tstart: null,\r\n\t\t\t\t\t\ttrends: trends.concat({ start, end: [xValue, yValue] }),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback: onComplete.bind(null, { currentItem, point: [xValue, yValue] }, e),\r\n\t\t\t\t};\r\n\t\t\t} else if (e.button === 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinteractive: { ...interactive, start: [xValue, yValue], },\r\n\t\t\t\t\tcallback: onStart.bind(null, { currentItem, point: [xValue, yValue] }, e),\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { interactive };\r\n\t}\r\n\trender() {\r\n\t\tvar { xScale, chartCanvasType, chartConfig, plotData, xAccessor, interactive, enabled, show } = this.props;\r\n\r\n\t\tif (chartCanvasType !== \"svg\") return null;\r\n\r\n\t\tvar { yScale } = chartConfig;\r\n\t\tvar { currentPos } = interactive;\r\n\r\n\t\tvar { currentPositionStroke, currentPositionStrokeWidth, currentPositionOpacity, currentPositionRadius } = this.props;\r\n\t\tvar { stroke, opacity, type } = this.props;\r\n\r\n\t\tvar circle = (currentPos && enabled && show)\r\n\t\t\t? <circle cx={xScale(currentPos[0])} cy={yScale(currentPos[1])}\r\n\t\t\t\tstroke={currentPositionStroke}\r\n\t\t\t\topacity={currentPositionOpacity}\r\n\t\t\t\tfill=\"none\"\r\n\t\t\t\tstrokeWidth={currentPositionStrokeWidth}\r\n\t\t\t\tr={currentPositionRadius} />\r\n\t\t\t: null;\r\n\r\n\t\tvar lines = TrendLine.helper(plotData, type, xAccessor, interactive);\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t{circle}\r\n\t\t\t\t{lines\r\n\t\t\t\t.map((coords, idx) =>\r\n\t\t\t\t\t<line key={idx} stroke={stroke} opacity={opacity} x1={xScale(coords.x1)} y1={yScale(coords.y1)}\r\n\t\t\t\t\t\tx2={xScale(coords.x2)} y2={yScale(coords.y2)} />)}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\nTrendLine.drawOnCanvas = (props,\r\n\t\tinteractive,\r\n\t\tctx,\r\n\t\t{ show, xScale, plotData, chartConfig }) => {\r\n\r\n\tvar { currentPos } = interactive;\r\n\r\n\tvar { type, xAccessor } = props;\r\n\tvar lines = TrendLine.helper(plotData, type, xAccessor, interactive);\r\n\r\n\tvar { yScale } = chartConfig;\r\n\t// console.error(show);\r\n\r\n\tvar { enabled, currentPositionStroke, currentPositionStrokeWidth, currentPositionOpacity, currentPositionRadius } = props;\r\n\tif (currentPos && enabled && show) {\r\n\t\tctx.strokeStyle = hexToRGBA(currentPositionStroke, currentPositionOpacity);\r\n\t\tctx.lineWidth = currentPositionStrokeWidth;\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(xScale(currentPos[0]), yScale(currentPos[1]), currentPositionRadius, 0, 2 * Math.PI, false);\r\n\t\tctx.stroke();\r\n\t}\r\n\tctx.lineWidth = 1;\r\n\tctx.strokeStyle = hexToRGBA(props.stroke, props.opacity);\r\n\r\n\tlines.forEach(each => {\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(xScale(each.x1), yScale(each.y1));\r\n\t\tctx.lineTo(xScale(each.x2), yScale(each.y2));\r\n\t\t// console.log(each);\r\n\t\tctx.stroke();\r\n\t});\r\n};\r\n\r\nTrendLine.helper = (plotData, type, xAccessor, interactive/* , chartConfig */) => {\r\n\tvar { currentPos, start, trends } = interactive;\r\n\tvar temp = trends;\r\n\tif (start && currentPos) {\r\n\t\ttemp = temp.concat({ start, end: currentPos });\r\n\t}\r\n\tvar lines = temp\r\n\t\t.filter(each => each.start[0] !== each.end[0])\r\n\t\t.map((each) => generateLine(type, each.start, each.end, xAccessor, plotData));\r\n\r\n\treturn lines;\r\n};\r\n\r\nfunction generateLine(type, start, end, xAccessor, plotData) {\r\n\t/* if (end[0] - start[0] === 0) {\r\n\t\t// vertical line\r\n\t\tthrow new Error(\"Trendline cannot be a vertical line\")\r\n\t} */\r\n\tvar m /* slope */ = (end[1] - start[1]) / (end[0] - start[0]);\r\n\tvar b /* y intercept */ = -1 * m * end[0] + end[1];\r\n\t// y = m * x + b\r\n\tvar x1 = type === \"XLINE\"\r\n\t\t? xAccessor(plotData[0])\r\n\t\t: start[0]; // RAY or LINE start is the same\r\n\r\n\tvar y1 = m * x1 + b;\r\n\r\n\tvar x2 = type === \"XLINE\"\r\n\t\t? xAccessor(last(plotData))\r\n\t\t: type === \"RAY\"\r\n\t\t\t? end[0] > start[0] ? xAccessor(last(plotData)) : xAccessor(head(plotData))\r\n\t\t\t: end[0];\r\n\tvar y2 = m * x2 + b;\r\n\treturn { x1, y1, x2, y2 };\r\n}\r\n\r\nTrendLine.propTypes = {\r\n\tsnap: PropTypes.bool.isRequired,\r\n\tshow: PropTypes.bool,\r\n\tenabled: PropTypes.bool.isRequired,\r\n\tsnapTo: PropTypes.func,\r\n\tshouldDisableSnap: PropTypes.func.isRequired,\r\n\tchartCanvasType: PropTypes.string,\r\n\tchartConfig: PropTypes.object,\r\n\tplotData: PropTypes.array,\r\n\txScale: PropTypes.func,\r\n\txAccessor: PropTypes.func,\r\n\tonStart: PropTypes.func.isRequired,\r\n\tonComplete: PropTypes.func.isRequired,\r\n\tinteractive: PropTypes.object,\r\n\tcurrentPositionStroke: PropTypes.string,\r\n\tcurrentPositionStrokeWidth: PropTypes.number,\r\n\tcurrentPositionOpacity: PropTypes.number,\r\n\tcurrentPositionRadius: PropTypes.number,\r\n\tstroke: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\ttype: PropTypes.oneOf([\r\n\t\t\"XLINE\", // extends from -Infinity to +Infinity\r\n\t\t\"RAY\", // extends to +/-Infinity in one direction\r\n\t\t\"LINE\", // extends between the set bounds\r\n\t]),\r\n};\r\n\r\nTrendLine.defaultProps = {\r\n\tstroke: \"#000000\",\r\n\ttype: \"XLINE\",\r\n\topacity: 0.7,\r\n\tonStart: noop,\r\n\tonComplete: noop,\r\n\tshouldDisableSnap: e => (e.button === 2 || e.shiftKey),\r\n\tcurrentPositionStroke: \"#000000\",\r\n\tcurrentPositionOpacity: 1,\r\n\tcurrentPositionStrokeWidth: 3,\r\n\tcurrentPositionRadius: 4,\r\n};\r\n\r\nexport default makeInteractive(TrendLine, [\"click\", \"mousemove\"], { trends: [] });\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/interactive/TrendLine.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport pure from \"../pure\";\r\n\r\nfunction getDisplayName(Series) {\r\n\tvar name = Series.displayName || Series.name || \"Series\";\r\n\treturn name;\r\n}\r\n\r\nfunction capitalizeFirst(str) {\r\n\treturn str.charAt(0).toUpperCase() + str.substring(1);\r\n}\r\n\r\nexport default function makeInteractive(InteractiveComponent, subscription = [], initialState, reDrawOnPan = true) {\r\n\r\n\tclass InteractiveComponentWrapper extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.subscription = this.subscription.bind(this);\r\n\t\t\tthis.updateInteractiveState = this.updateInteractiveState.bind(this);\r\n\t\t\tvar { subscribe, chartId } = props;\r\n\r\n\t\t\tthis.subscriptionIds = subscription.map(each => subscribe(chartId, each, this.subscription.bind(this, each)));\r\n\t\t}\r\n\t\tgetInteractiveState(props) {\r\n\t\t\tvar { interactiveState } = props;\r\n\t\t\t// console.log(interactiveState);\r\n\t\t\tvar state = interactiveState.filter(each => each.id === props.id);\r\n\t\t\tvar response = { interactive: initialState };\r\n\t\t\tif (state.length > 0) {\r\n\t\t\t\tresponse = state[0];\r\n\t\t\t}\r\n\t\t\t// console.log(interactiveState, response.interactive, this.props.id);\r\n\t\t\treturn response;\r\n\t\t}\r\n\t\tupdateInteractiveState(interactive) {\r\n\t\t\tvar { setInteractiveState, interactiveState, id } = this.props;\r\n\r\n\t\t\tvar newInteractive = interactiveState\r\n\t\t\t\t.map(each => each.id === id\r\n\t\t\t\t\t? { id, interactive }\r\n\t\t\t\t\t: each);\r\n\r\n\t\t\tsetInteractiveState(newInteractive);\r\n\t\t}\r\n\t\tremoveLast() {\r\n\t\t\tvar { interactive } = this.getInteractiveState(this.props);\r\n\r\n\t\t\tif (this.refs.interactive.removeLast) {\r\n\t\t\t\tvar newInteractive = this.refs.interactive.removeLast(interactive);\r\n\t\t\t\tthis.updateInteractiveState(newInteractive);\r\n\t\t\t}\r\n\t\t}\r\n\t\tterminate() {\r\n\t\t\tvar { interactive } = this.getInteractiveState(this.props);\r\n\r\n\t\t\tif (this.refs.interactive.terminate) {\r\n\t\t\t\tvar newInteractive = this.refs.interactive.terminate(interactive);\r\n\t\t\t\tthis.updateInteractiveState(newInteractive);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsubscription(event, arg, e) {\r\n\t\t\tvar { chartId, xAccessor, displayXAccessor } = this.props;\r\n\t\t\tvar { enabled } = this.props;\r\n\r\n\t\t\tvar { interactive } = this.getInteractiveState(this.props);\r\n\r\n\t\t\tvar interactiveState = { interactive };\r\n\t\t\tvar handler = this.refs.interactive[`on${ capitalizeFirst(event) }`];\r\n\t\t\tif (enabled) {\r\n\t\t\t\tinteractiveState = handler({ chartId, xAccessor, displayXAccessor }, interactive, arg, e);\r\n\t\t\t}\r\n\t\t\t// if (interactiveState.interactive === interactive) return false;\r\n\t\t\treturn {\r\n\t\t\t\tid: this.props.id,\r\n\t\t\t\t...interactiveState,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcomponentDidMount() {\r\n\t\t\tthis.componentDidUpdate();\r\n\t\t}\r\n\t\tcomponentDidUpdate() {\r\n\t\t\t// console.log(\"Update\");\r\n\r\n\t\t\tvar callback = InteractiveComponent.drawOnCanvas;\r\n\r\n\t\t\tif (callback) {\r\n\t\t\t\tvar { getCanvasContexts, chartCanvasType, plotData, chartConfig, xScale, show } = this.props;\r\n\t\t\t\tif (chartCanvasType !== \"svg\") {\r\n\r\n\t\t\t\t\tvar { defaultProps } = InteractiveComponent;\r\n\t\t\t\t\tvar props = { ...defaultProps, ...this.props };\r\n\t\t\t\t\tvar contexts = getCanvasContexts();\r\n\t\t\t\t\tvar { interactive } = this.getInteractiveState(this.props);\r\n\r\n\t\t\t\t\t// console.log(interactive);\r\n\t\t\t\t\tif (contexts) {\r\n\t\t\t\t\t\tInteractiveComponentWrapper.drawOnCanvas(callback,\r\n\t\t\t\t\t\t\tprops, interactive,\r\n\t\t\t\t\t\t\tcontexts.interactive, { show, xScale, plotData, chartConfig });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcomponentWillMount() {\r\n\t\t\tthis.componentWillReceiveProps(this.props, this.context);\r\n\t\t}\r\n\t\tcomponentWillReceiveProps(nextProps) {\r\n\t\t\t// var nextContext = this.context;\r\n\t\t\t// var nextProps = this.props;\r\n\r\n\t\t\t// console.log(\"HERE\", nextProps.interactiveState);\r\n\t\t\tvar { chartId, getAllCanvasDrawCallback, callbackForCanvasDraw } = nextProps;\r\n\t\t\tvar callback = InteractiveComponent.drawOnCanvas;\r\n\r\n\t\t\tif (reDrawOnPan && callback) {\r\n\t\t\t\t// var { defaultProps } = ;\r\n\t\t\t\tvar props = { ...InteractiveComponent.defaultProps, ...nextProps };\r\n\r\n\t\t\t\tvar draw = InteractiveComponentWrapper.drawOnCanvas.bind(null, callback,\r\n\t\t\t\t\tprops, this.getInteractiveState(nextProps).interactive);\r\n\r\n\t\t\t\tvar temp = getAllCanvasDrawCallback()\r\n\t\t\t\t\t.filter(each => each.type === \"interactive\")\r\n\t\t\t\t\t.filter(each => each.id === nextProps.id)\r\n\t\t\t\t\t.filter(each => each.chartId === chartId)\r\n\t\t\t\t\t;\r\n\t\t\t\tif (temp.length === 0) {\r\n\t\t\t\t\tcallbackForCanvasDraw({\r\n\t\t\t\t\t\ttype: \"interactive\",\r\n\t\t\t\t\t\tchartId: chartId,\r\n\t\t\t\t\t\tid: nextProps.id,\r\n\t\t\t\t\t\tdraw: draw,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallbackForCanvasDraw(temp[0], {\r\n\t\t\t\t\t\ttype: \"interactive\",\r\n\t\t\t\t\t\tchartId: chartId,\r\n\t\t\t\t\t\tid: nextProps.id,\r\n\t\t\t\t\t\tdraw: draw,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcomponentWillUnmount() {\r\n\t\t\tvar { unsubscribe } = this.props;\r\n\t\t\tthis.subscriptionIds.forEach((each) => {\r\n\t\t\t\tunsubscribe(each);\r\n\t\t\t});\r\n\t\t}\r\n\t\trender() {\r\n\t\t\tvar { interactive } = this.getInteractiveState(this.props);\r\n\r\n\t\t\treturn <InteractiveComponent ref=\"interactive\" {...this.props} interactive={interactive} />;\r\n\t\t}\r\n\t}\r\n\r\n\tInteractiveComponentWrapper.displayName = getDisplayName(InteractiveComponent);\r\n\r\n\tInteractiveComponentWrapper.drawOnCanvas = (callback, props, interactiveState, ctx, chartContext) => {\r\n\t\t// console.log( props, interactiveState);\r\n\t\tvar { canvasOriginX, canvasOriginY, width, height } = props;\r\n\r\n\t\tctx.save();\r\n\r\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\tctx.translate(canvasOriginX, canvasOriginY);\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(-1, -1, width + 1, height + 1);\r\n\t\tctx.clip();\r\n\r\n\t\tif (callback) {\r\n\t\t\tcallback(props, interactiveState, ctx, chartContext);\r\n\t\t}\r\n\r\n\t\tctx.restore();\r\n\t};\r\n\r\n\tInteractiveComponentWrapper.propTypes = {\r\n\t\tid: PropTypes.number.isRequired,\r\n\t\tenabled: PropTypes.bool.isRequired,\r\n\r\n\t\t/* comes from pure converted from context to prop - START */\r\n\t\tchartId: PropTypes.number.isRequired,\r\n\t\tinteractiveState: PropTypes.array.isRequired,\r\n\t\tgetCanvasContexts: PropTypes.func,\r\n\t\tcallbackForCanvasDraw: PropTypes.func.isRequired,\r\n\t\tgetAllCanvasDrawCallback: PropTypes.func,\r\n\t\tchartCanvasType: PropTypes.string.isRequired,\r\n\t\tsubscribe: PropTypes.func.isRequired,\r\n\t\tsetInteractiveState: PropTypes.func.isRequired,\r\n\t\tunsubscribe: PropTypes.func.isRequired,\r\n\t\tplotData: PropTypes.array.isRequired,\r\n\t\txAccessor: PropTypes.func.isRequired,\r\n\t\txScale: PropTypes.func.isRequired,\r\n\t\tchartConfig: PropTypes.object.isRequired,\r\n\t\tcurrentItem: PropTypes.object.isRequired,\r\n\t\tcanvasOriginX: PropTypes.number,\r\n\t\tcanvasOriginY: PropTypes.number,\r\n\t\theight: PropTypes.number.isRequired,\r\n\t\twidth: PropTypes.number.isRequired,\r\n\t\tshow: PropTypes.bool.isRequired,\r\n\t\tdisplayXAccessor: PropTypes.func.isRequired,\r\n\t\t/* comes from pure converted from context to prop - END */\r\n\t};\r\n\r\n\treturn pure(InteractiveComponentWrapper, {\r\n\t\tchartId: PropTypes.number.isRequired,\r\n\t\tinteractiveState: PropTypes.array.isRequired,\r\n\t\tgetCanvasContexts: PropTypes.func,\r\n\t\tcallbackForCanvasDraw: PropTypes.func.isRequired,\r\n\t\tgetAllCanvasDrawCallback: PropTypes.func,\r\n\t\tchartCanvasType: PropTypes.string.isRequired,\r\n\t\tsubscribe: PropTypes.func.isRequired,\r\n\t\tsetInteractiveState: PropTypes.func.isRequired,\r\n\t\tunsubscribe: PropTypes.func.isRequired,\r\n\t\tplotData: PropTypes.array.isRequired,\r\n\t\txAccessor: PropTypes.func.isRequired,\r\n\t\txScale: PropTypes.func.isRequired,\r\n\t\tchartConfig: PropTypes.object.isRequired,\r\n\t\tcurrentItem: PropTypes.object.isRequired,\r\n\t\tcanvasOriginX: PropTypes.number,\r\n\t\tcanvasOriginY: PropTypes.number,\r\n\t\theight: PropTypes.number.isRequired,\r\n\t\twidth: PropTypes.number.isRequired,\r\n\t\tshow: PropTypes.bool.isRequired,\r\n\t\tdisplayXAccessor: PropTypes.func.isRequired,\r\n\t});\r\n}\r\n\r\nexport default makeInteractive;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/interactive/makeInteractive.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\nimport makeInteractive from \"./makeInteractive\";\r\nimport { head, last, hexToRGBA } from \"../utils\";\r\n\r\nclass FibonacciRetracement extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onMousemove = this.onMousemove.bind(this);\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t}\r\n\tremoveLast(interactive) {\r\n\t\tvar { retracements, start } = interactive;\r\n\t\tif (!start && retracements.length > 0) {\r\n\t\t\treturn { ...interactive, retracements: retracements.slice(0, retracements.length - 1) };\r\n\t\t}\r\n\t\treturn interactive;\r\n\t}\r\n\tterminate(interactive) {\r\n\t\tvar { start } = interactive;\r\n\t\tif (start) {\r\n\t\t\treturn { ...interactive, start: null };\r\n\t\t}\r\n\t\treturn interactive;\r\n\t}\r\n\tonMousemove({ chartId, xAccessor }, interactive, { mouseXY, currentItem, chartConfig } /* , e */) {\r\n\t\tvar { enabled } = this.props;\r\n\t\tif (enabled) {\r\n\t\t\tvar { yScale } = chartConfig;\r\n\r\n\t\t\tvar yValue = yScale.invert(mouseXY[1]);\r\n\t\t\tvar xValue = xAccessor(currentItem);\r\n\r\n\t\t\tif (interactive.start) {\r\n\t\t\t\treturn { interactive: { ...interactive, tempEnd: [xValue, yValue], } };\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { interactive };\r\n\t}\r\n\tonClick({ chartId, xAccessor }, interactive, { mouseXY, currentItem, currentChartstriggerCallback, chartConfig }, e) {\r\n\t\tvar { enabled, onStart, onComplete } = this.props;\r\n\t\tif (enabled) {\r\n\t\t\tvar { start, retracements } = interactive;\r\n\r\n\t\t\tvar { yScale } = chartConfig;\r\n\r\n\t\t\tvar yValue = yScale.invert(mouseXY[1]);\r\n\t\t\tvar xValue = xAccessor(currentItem);\r\n\r\n\t\t\tif (start) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinteractive: {\r\n\t\t\t\t\t\t...interactive,\r\n\t\t\t\t\t\tstart: null,\r\n\t\t\t\t\t\ttempEnd: null,\r\n\t\t\t\t\t\tretracements: retracements.concat({ start, end: [xValue, yValue] }),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback: onComplete.bind(null, { currentItem, point: [xValue, yValue] }, e),\r\n\t\t\t\t};\r\n\t\t\t} else if (e.button === 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinteractive: {\r\n\t\t\t\t\t\t...interactive,\r\n\t\t\t\t\t\tstart: [xValue, yValue],\r\n\t\t\t\t\t\ttempEnd: null,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback: onStart.bind(null, { currentItem, point: [xValue, yValue] }, e),\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { interactive };\r\n\t}\r\n\trender() {\r\n\t\tvar { chartCanvasType, chartConfig, plotData, xScale, xAccessor, interactive } = this.props;\r\n\t\tvar { stroke, opacity, fontFamily, fontSize, fontStroke, type } = this.props;\r\n\r\n\t\tif (chartCanvasType !== \"svg\") return null;\r\n\r\n\t\tvar { yScale } = chartConfig;\r\n\t\tvar retracements = FibonacciRetracement.helper(plotData, type, xAccessor, interactive, chartConfig);\r\n\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t{retracements.map((eachRetracement, idx) => {\r\n\t\t\t\t\tvar dir = eachRetracement[0].y1 > eachRetracement[eachRetracement.length - 1].y1 ? 3 : -1.3;\r\n\t\t\t\t\treturn <g key={idx}>\r\n\t\t\t\t\t\t{eachRetracement.map((line, i) => {\r\n\t\t\t\t\t\t\tvar text = `${ line.y.toFixed(2) } (${ line.percent.toFixed(2) }%)`;\r\n\r\n\t\t\t\t\t\t\treturn (<g key={i}>\r\n\t\t\t\t\t\t\t\t<line\r\n\t\t\t\t\t\t\t\t\tx1={xScale(line.x1)} y1={yScale(line.y)}\r\n\t\t\t\t\t\t\t\t\tx2={xScale(line.x2)} y2={yScale(line.y)}\r\n\t\t\t\t\t\t\t\t\tstroke={stroke} opacity={opacity} />\r\n\t\t\t\t\t\t\t\t<text x={xScale(Math.min(line.x1, line.x2)) + 10} y={yScale(line.y) + dir * 4}\r\n\t\t\t\t\t\t\t\t\tfontFamily={fontFamily} fontSize={fontSize} fill={fontStroke}>{text}</text>\r\n\t\t\t\t\t\t\t</g>);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</g>;\r\n\t\t\t\t})}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nFibonacciRetracement.drawOnCanvas = (props,\r\n\t\tinteractive,\r\n\t\tctx,\r\n\t\t{ xScale, plotData, chartConfig }) => {\r\n\r\n\tvar { xAccessor } = props;\r\n\tvar { yScale } = chartConfig;\r\n\tvar { fontSize, fontFamily, fontStroke, type } = props;\r\n\tvar lines = FibonacciRetracement.helper(plotData, type, xAccessor, interactive, chartConfig);\r\n\r\n\tctx.strokeStyle = hexToRGBA(props.stroke, props.opacity);\r\n\tctx.font = `${ fontSize }px ${ fontFamily }`;\r\n\tctx.fillStyle = fontStroke;\r\n\r\n\tlines.forEach(retracements => {\r\n\t\tvar dir = retracements[0].y1 > retracements[retracements.length - 1].y1 ? 3 : -1.3;\r\n\r\n\t\tretracements.forEach((each) => {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(xScale(each.x1), yScale(each.y));\r\n\t\t\tctx.lineTo(xScale(each.x2), yScale(each.y));\r\n\r\n\t\t\tvar text = `${ each.y.toFixed(2) } (${ each.percent.toFixed(2) }%)`;\r\n\t\t\tctx.fillText(text, xScale(Math.min(each.x1, each.x2)) + 10, yScale(each.y) + dir * 4);\r\n\r\n\t\t\tctx.stroke();\r\n\t\t});\r\n\t});\r\n};\r\n\r\nFibonacciRetracement.helper = (plotData, type, xAccessor, interactive/* , chartConfig */) => {\r\n\tvar { retracements, start, tempEnd } = interactive;\r\n\r\n\tvar temp = retracements;\r\n\r\n\tif (start && tempEnd) {\r\n\t\ttemp = temp.concat({ start, end: tempEnd });\r\n\t}\r\n\tvar lines = temp\r\n\t\t.map((each) => generateLine(type, each.start, each.end, xAccessor, plotData));\r\n\r\n\treturn lines;\r\n};\r\n\r\nfunction generateLine(type, start, end, xAccessor, plotData) {\r\n\tvar dy = end[1] - start[1];\r\n\treturn [100, 61.8, 50, 38.2, 23.6, 0]\r\n\t\t.map(each => ({\r\n\t\t\tpercent: each,\r\n\t\t\tx1: type === \"EXTEND\" ? xAccessor(head(plotData)) : start[0],\r\n\t\t\tx2: type === \"EXTEND\" ? xAccessor(last(plotData)) : end[0],\r\n\t\t\ty: (end[1] - (each / 100) * dy)\r\n\t\t}));\r\n}\r\n\r\nFibonacciRetracement.propTypes = {\r\n\tsnap: PropTypes.bool.isRequired,\r\n\tenabled: PropTypes.bool.isRequired,\r\n\tsnapTo: PropTypes.func,\r\n\tfontFamily: PropTypes.string.isRequired,\r\n\tfontSize: PropTypes.number.isRequired,\r\n\tchartCanvasType: PropTypes.string,\r\n\tchartConfig: PropTypes.object,\r\n\tplotData: PropTypes.array,\r\n\txAccessor: PropTypes.func,\r\n\txScale: PropTypes.func,\r\n\tinteractive: PropTypes.object,\r\n\twidth: PropTypes.number,\r\n\tstroke: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\tfontStroke: PropTypes.string,\r\n\tonStart: PropTypes.func,\r\n\tonComplete: PropTypes.func,\r\n\ttype: PropTypes.oneOf([\r\n\t\t\"EXTEND\", // extends from -Infinity to +Infinity\r\n\t\t\"BOUND\", // extends between the set bounds\r\n\t]).isRequired,\r\n};\r\n\r\nFibonacciRetracement.defaultProps = {\r\n\tsnap: true,\r\n\tenabled: true,\r\n\tstroke: \"#000000\",\r\n\topacity: 0.4,\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 10,\r\n\tfontStroke: \"#000000\",\r\n\ttype: \"EXTEND\",\r\n\r\n};\r\n\r\nexport default makeInteractive(FibonacciRetracement, [\"click\", \"mousemove\"], { retracements: [] });\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/interactive/FibonacciRetracement.jsx\n **/","\"use strict\";\r\n\r\nimport { PropTypes, Component } from \"react\";\r\nimport makeInteractive from \"./makeInteractive\";\r\nimport { noop } from \"../utils\";\r\n\r\nclass ClickCallback extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t}\r\n\tonClick({ chartId, xAccessor }, interactive, { mouseXY, currentItem, chartConfig }, e) {\r\n\t\tvar { onClick, displayXAccessor } = this.props;\r\n\r\n\t\tvar { yScale } = chartConfig;\r\n\r\n\t\tvar yValue = yScale.invert(mouseXY[1]);\r\n\t\tvar xValue = displayXAccessor(currentItem);\r\n\t\tonClick({\r\n\t\t\txy: [xValue, yValue],\r\n\t\t\tmouseXY,\r\n\t\t\tcurrentItem\r\n\t\t}, e);\r\n\t\treturn { interactive }; // returning the same input to indicate that the state of the chart is not changing\r\n\t}\r\n\trender() {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nClickCallback.drawOnCanvas = noop;\r\n\r\nClickCallback.propTypes = {\r\n\tonClick: PropTypes.func.isRequired,\r\n\t/* comes from pure converted from context to prop - START */\r\n\tdisplayXAccessor: PropTypes.func.isRequired,\r\n\t/* comes from pure converted from context to prop - END */\r\n};\r\n\r\nClickCallback.defaultProps = {\r\n\tonClick: (e) => { console.log(e); },\r\n};\r\n\r\nexport default makeInteractive(ClickCallback, [\"click\"], {});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/interactive/ClickCallback.jsx\n **/","\"use strict\";\r\n\r\nimport React, { PropTypes, Component } from \"react\";\r\n\r\nimport makeInteractive from \"./makeInteractive\";\r\n\r\nimport { hexToRGBA, isDefined, noop } from \"../utils\";\r\n\r\nclass Brush extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onMousemove = this.onMousemove.bind(this);\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t}\r\n\tterminate() {\r\n\t\treturn {\r\n\t\t\tx1: null, y1: null,\r\n\t\t\tx2: null, y2: null,\r\n\t\t\tstartItem: null,\r\n\t\t\tstartClick: null,\r\n\t\t};\r\n\t}\r\n\tonMousemove({ chartId, xAccessor }, interactive, { currentItem, chartConfig, mouseXY } /* , e */) {\r\n\t\tvar { enabled } = this.props;\r\n\t\tvar { x1, y1 } = interactive;\r\n\r\n\t\tif (enabled && isDefined(x1) && isDefined(y1)) {\r\n\t\t\tvar { yScale } = chartConfig;\r\n\r\n\t\t\tvar x2 = xAccessor(currentItem);\r\n\t\t\tvar y2 = yScale.invert(mouseXY[1]);\r\n\r\n\t\t\treturn { interactive: { ...interactive, x2, y2 } };\r\n\t\t}\r\n\t\treturn { interactive };\r\n\t}\r\n\tonClick(props, interactive, state, e) {\r\n\t\tvar { displayXAccessor, xAccessor } = props;\r\n\t\tvar { mouseXY, currentItem, chartConfig } = state;\r\n\t\tvar { enabled, onStart, onBrush } = this.props;\r\n\r\n\t\tif (enabled) {\r\n\t\t\tvar { x1, y1, startItem, startClick } = interactive;\r\n\t\t\tvar { yScale } = chartConfig;\r\n\r\n\t\t\tvar xValue = xAccessor(currentItem);\r\n\t\t\tvar yValue = yScale.invert(mouseXY[1]);\r\n\r\n\t\t\tif (isDefined(x1)) {\r\n\t\t\t\tvar onCompleteCallback = onBrush.bind(null, {\r\n\t\t\t\t\tx1: displayXAccessor(startItem),\r\n\t\t\t\t\ty1,\r\n\t\t\t\t\tx2: displayXAccessor(currentItem),\r\n\t\t\t\t\ty2: yValue\r\n\t\t\t\t}, [startItem, currentItem], [startClick, mouseXY], e);\r\n\r\n\t\t\t\tvar onCompleteBrushCoords =  {\r\n\t\t\t\t\t...interactive,\r\n\t\t\t\t\tx1: null, y1: null,\r\n\t\t\t\t\tx2: null, y2: null,\r\n\t\t\t\t\tstartItem: null,\r\n\t\t\t\t\tstartClick: null,\r\n\t\t\t\t};\r\n\t\t\t\treturn { interactive: onCompleteBrushCoords, callback: onCompleteCallback };\r\n\t\t\t} else if (e.button === 0) {\r\n\r\n\t\t\t\tvar onStartCallback = onStart.bind(null, { currentItem, point: [xValue, yValue] }, e);\r\n\r\n\t\t\t\tlet onStartBrushCoords =  {\r\n\t\t\t\t\t...interactive,\r\n\t\t\t\t\tx1: xValue,\r\n\t\t\t\t\ty1: yValue,\r\n\t\t\t\t\tstartItem: currentItem,\r\n\t\t\t\t\tstartClick: mouseXY,\r\n\t\t\t\t\tx2: null,\r\n\t\t\t\t\ty2: null,\r\n\t\t\t\t};\r\n\t\t\t\treturn { interactive: onStartBrushCoords, callback: onStartCallback };\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { interactive };\r\n\t}\r\n\trender() {\r\n\t\tvar { chartCanvasType, chartConfig, plotData, xScale, xAccessor, interactive, enabled } = this.props;\r\n\t\tvar { type, fill, stroke, opacity } = this.props;\r\n\r\n\t\tif (chartCanvasType !== \"svg\") return null;\r\n\r\n\t\tvar { x1, y1, x2, y2 } = interactive;\r\n\r\n\t\tif (enabled && isDefined(x1) && isDefined(y1) && isDefined(x2) && isDefined(y2)) {\r\n\t\t\tvar brush = Brush.helper(type, plotData, xScale, xAccessor, chartConfig, { x1, y1, x2, y2 });\r\n\t\t\treturn <rect {...brush} fill={fill} stroke={stroke} fillOpacity={opacity} />;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nBrush.drawOnCanvas = (props,\r\n\t\tinteractive,\r\n\t\tctx,\r\n\t\t{ xScale, plotData, chartConfig }) => {\r\n\r\n\tvar { x1, y1, x2, y2 } = interactive;\r\n\tvar { xAccessor, enabled, stroke, opacity, fill, type } = props;\r\n\r\n\tif (enabled && x1 && x2) {\r\n\t\tvar rect = Brush.helper(type, plotData, xScale, xAccessor, chartConfig, { x1, y1, x2, y2 });\r\n\r\n\t\tctx.strokeStyle = stroke;\r\n\t\tctx.fillStyle = hexToRGBA(fill, opacity);\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(rect.x, rect.y, rect.width, rect.height);\r\n\t\tctx.stroke();\r\n\t\tctx.fill();\r\n\t}\r\n};\r\n\r\nBrush.helper = (type, plotData, xScale, xAccessor, chartConfig, { x1, y1, x2, y2 }) => {\r\n\tvar { yScale } = chartConfig;\r\n\r\n\tvar left = Math.min(x1, x2);\r\n\tvar right = Math.max(x1, x2);\r\n\r\n\tvar top = Math.max(y1, y2);\r\n\tvar bottom = Math.min(y1, y2);\r\n\r\n\tvar x = xScale(left);\r\n\tvar width = xScale(right) - xScale(left);\r\n\r\n\tvar y = type === \"1D\" ? 0 : yScale(top);\r\n\tvar height = type === \"1D\" ? chartConfig.height : yScale(bottom) - yScale(top);\r\n\r\n\t// console.log(chartConfig);\r\n\treturn {\r\n\t\tx,\r\n\t\ty,\r\n\t\twidth,\r\n\t\theight,\r\n\t};\r\n};\r\n\r\nBrush.propTypes = {\r\n\tenabled: PropTypes.bool.isRequired,\r\n\tonStart: PropTypes.func.isRequired,\r\n\tonBrush: PropTypes.func.isRequired,\r\n\r\n\ttype: PropTypes.oneOf([\"1D\", \"2D\"]),\r\n\tchartCanvasType: PropTypes.string,\r\n\tchartConfig: PropTypes.object,\r\n\tplotData: PropTypes.array,\r\n\txAccessor: PropTypes.func,\r\n\txScale: PropTypes.func,\r\n\tinteractive: PropTypes.object,\r\n\tstroke: PropTypes.string,\r\n\tfill: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n};\r\n\r\nBrush.defaultProps = {\r\n\ttype: \"2D\",\r\n\tstroke: \"#000000\",\r\n\topacity: 0.3,\r\n\tfill: \"#3h3h3h\",\r\n\tonBrush: noop,\r\n\tonStart: noop,\r\n};\r\n\r\nexport default makeInteractive(Brush, [\"click\", \"mousemove\"], {} );\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/interactive/Brush.jsx\n **/"],"sourceRoot":""}